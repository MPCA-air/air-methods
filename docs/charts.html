<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.5.2 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="start-finish.html">
<link rel="next" href="time-series.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.3/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a><ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#tidyverse"><i class="fa fa-check"></i><b>1.1</b> Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.2</b> Pollutant names</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#keeping-r-up-to-date"><i class="fa fa-check"></i><b>1.3</b> Keeping R up-to-date</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#script-layout"><i class="fa fa-check"></i><b>1.4</b> Script layout</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.5</b> Divide and conquer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-data.html"><a href="getting-data.html"><i class="fa fa-check"></i><b>2</b> Getting data</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-data.html"><a href="getting-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-data.html"><a href="getting-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-data.html"><a href="getting-data.html#rqamd"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-data.html"><a href="getting-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.3</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.4" data-path="getting-data.html"><a href="getting-data.html#monitors"><i class="fa fa-check"></i><b>2.1.4</b> Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.5" data-path="getting-data.html"><a href="getting-data.html#lims"><i class="fa fa-check"></i><b>2.1.5</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.6" data-path="getting-data.html"><a href="getting-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.6</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.7" data-path="getting-data.html"><a href="getting-data.html#wair"><i class="fa fa-check"></i><b>2.1.7</b> Retrieving data from MPCA WAIR database</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-data.html"><a href="getting-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-data.html"><a href="getting-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-data.html"><a href="getting-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQs and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-data.html"><a href="getting-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a><ul>
<li class="chapter" data-level="2.3.1" data-path="getting-data.html"><a href="getting-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="getting-data.html"><a href="getting-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="getting-data.html"><a href="getting-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="getting-data.html"><a href="getting-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-data.html"><a href="getting-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a><ul>
<li class="chapter" data-level="2.4.1" data-path="getting-data.html"><a href="getting-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="getting-data.html"><a href="getting-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="getting-data.html"><a href="getting-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="getting-data.html"><a href="getting-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="getting-data.html"><a href="getting-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="getting-data.html"><a href="getting-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="getting-data.html"><a href="getting-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="getting-data.html"><a href="getting-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Remove blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Remove <em>Qualified</em> data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#leaks"><i class="fa fa-check"></i><b>3.3</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="3.4" data-path="data-cleaning.html"><a href="data-cleaning.html#outs"><i class="fa fa-check"></i><b>3.4</b> Exceptional values and outliers</a></li>
<li class="chapter" data-level="3.5" data-path="data-cleaning.html"><a href="data-cleaning.html#sticky2"><i class="fa fa-check"></i><b>3.5</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="3.6" data-path="data-cleaning.html"><a href="data-cleaning.html#unique"><i class="fa fa-check"></i><b>3.6</b> Unique detected values</a></li>
<li class="chapter" data-level="3.7" data-path="data-cleaning.html"><a href="data-cleaning.html#valid_ref"><i class="fa fa-check"></i><b>3.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>4</b> Collocated monitors</a><ul>
<li class="chapter" data-level="4.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>4.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="4.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>4.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>5</b> Detection limits</a><ul>
<li class="chapter" data-level="5.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i><b>5.1</b> Method Detection Limit</a></li>
<li class="chapter" data-level="5.2" data-path="detection-limits.html"><a href="detection-limits.html#procedure-for-calculating-method-detection-limits"><i class="fa fa-check"></i><b>5.2</b> Procedure for calculating method detection limits</a></li>
<li class="chapter" data-level="5.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-detection-limits"><i class="fa fa-check"></i><b>5.3</b> Finding detection limits</a></li>
<li class="chapter" data-level="5.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>5.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="5.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values-what-not-to-do"><i class="fa fa-check"></i><b>5.5</b> Estimating below detection values <em>(what not to do)</em></a></li>
<li class="chapter" data-level="5.6" data-path="detection-limits.html"><a href="detection-limits.html#below-detection-values"><i class="fa fa-check"></i><b>5.6</b> Below detection values</a></li>
<li class="chapter" data-level="5.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>5.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="5.8" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>5.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>6</b> Completeness checks</a><ul>
<li class="chapter" data-level="6.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>6.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="7" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>7</b> Summary statistics</a><ul>
<li class="chapter" data-level="7.1" data-path="summary-statistics.html"><a href="summary-statistics.html#test-for-normality"><i class="fa fa-check"></i><b>7.1</b> Test for normality</a></li>
<li class="chapter" data-level="7.2" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>7.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="7.3" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>7.3</b> Below the detection limit</a></li>
<li class="chapter" data-level="7.4" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>7.4</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="7.5" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>7.5</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="7.6" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>7.6</b> Comparison of data to inhalation health benchmarks</a></li>
<li class="chapter" data-level="7.7" data-path="summary-statistics.html"><a href="summary-statistics.html#roll365"><i class="fa fa-check"></i><b>7.7</b> Rolling 365 day summaries</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>8</b> Site comparisons</a><ul>
<li class="chapter" data-level="8.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>8.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="8.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-data"><i class="fa fa-check"></i><b>8.2</b> Tools to visualize data</a><ul>
<li class="chapter" data-level="8.2.1" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i><b>8.2.1</b> Beeswarm Plots</a></li>
<li class="chapter" data-level="8.2.2" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i><b>8.2.2</b> Correlation matrices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>9</b> Start to finish</a><ul>
<li class="chapter" data-level="9.1" data-path="start-finish.html"><a href="start-finish.html#functions"><i class="fa fa-check"></i><b>9.1</b> Functions</a></li>
<li class="chapter" data-level="9.2" data-path="start-finish.html"><a href="start-finish.html#analysis-steps"><i class="fa fa-check"></i><b>9.2</b> Analysis steps</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>10</b> Charts</a><ul>
<li class="chapter" data-level="10.1" data-path="charts.html"><a href="charts.html#boxplots"><i class="fa fa-check"></i><b>10.1</b> Boxplots</a><ul>
<li class="chapter" data-level="10.1.1" data-path="charts.html"><a href="charts.html#log-boxplots"><i class="fa fa-check"></i><b>10.1.1</b> Log boxplots</a></li>
<li class="chapter" data-level="10.1.2" data-path="charts.html"><a href="charts.html#outliers"><i class="fa fa-check"></i><b>10.1.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>10.2</b> Calendar plots</a></li>
<li class="chapter" data-level="10.3" data-path="charts.html"><a href="charts.html#color-palettes"><i class="fa fa-check"></i><b>10.3</b> Color palettes</a></li>
<li class="chapter" data-level="10.4" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>10.4</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>11</b> Time series</a><ul>
<li class="chapter" data-level="11.1" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i><b>11.1</b> Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>12</b> Maps</a><ul>
<li class="chapter" data-level="12.1" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r-and-joining-to-ej-areas"><i class="fa fa-check"></i><b>12.1</b> Creating shapefiles in R and joining to EJ areas</a></li>
<li class="chapter" data-level="12.2" data-path="maps.html"><a href="maps.html#spatial-averaging-and-aggregation"><i class="fa fa-check"></i><b>12.2</b> Spatial averaging and aggregation</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>13</b> Additional resources</a></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>14</b> AQI explorer</a></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a></li>
<li class="chapter" data-level="16" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>16</b> Air toxics explorer</a><ul>
<li class="chapter" data-level="16.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#mpca-air-toxics-methods"><i class="fa fa-check"></i><b>16.1</b> MPCA Air Toxics Methods</a><ul>
<li class="chapter" data-level="16.1.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>16.1.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="16.1.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>16.1.2</b> Data Validation</a></li>
<li class="chapter" data-level="16.1.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i><b>16.1.3</b> Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="16.1.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>16.1.4</b> Producing Annual Summaries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="charts" class="section level1">
<h1><span class="header-section-number"></span> Charts</h1>
<div class="figure">
<img src="http://imgs.xkcd.com/comics/cat_proximity.png" style="width:45.0%" />

</div>
<div id="boxplots" class="section level2">
<h2><span class="header-section-number">10.1</span> Boxplots</h2>
<p>Dividing by zero is an amazing super power. Unfortunately for you your computer does not have this power. Making a log boxplot with data containing zeros or negative values will result in your computer melting itself. It will never forgive you.</p>
<div id="log-boxplots" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Log boxplots</h3>
<p><em>Coming soon…</em></p>
</div>
<div id="outliers" class="section level3">
<h3><span class="header-section-number">10.1.2</span> Outliers</h3>
<p><em>Coming soon…</em></p>
</div>
</div>
<div id="calendar-plots" class="section level2">
<h2><span class="header-section-number">10.2</span> Calendar plots</h2>
<p>The openair package provides a convenient function, calendarPlot, for presenting data in a calendar format.</p>
<p><img src="air-methods_files/figure-html/unnamed-chunk-95-1.png" width="672" /></p>
</div>
<div id="color-palettes" class="section level2">
<h2><span class="header-section-number">10.3</span> Color palettes</h2>
</div>
<div id="pollution-roses" class="section level2">
<h2><span class="header-section-number">10.4</span> Pollution roses</h2>
<p>Pollution roses are a visual display of pollutant concentrations and wind directions correspnding to those concentrations. The length of each “paddle” is correlated with the percentage of days of valid measurements taken when the wind was blowing from that direction. So if the longest paddle is the one extending upward, then the wind blew from the North on average more times than any other direction for days with valid measurements of a pollutant. The colors on a paddle correspond to the concentration of the pollutant. Blue means lower concentrations up to red which are the highest concentrations.</p>
<p>Note that for 24-hour samples, wind direction is the vector averaged wind direction of each hour in a day.</p>
<p><br></p>
<p><strong>Sample <code>R</code> script</strong></p>
<p>Click the button below to view an example R script.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<p><br></p>
<p>This script produces an interactive shiny App for exploring pollutant concentrations in relation to wind direction and speed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pollution_roses =<span class="st"> </span><span class="cf">function</span>(data, met_data_filepath, <span class="dt">num_breaks =</span> <span class="dv">5</span>) { <span class="co">#Met data must be in Tableau format</span>
  
  <span class="kw">library</span>(tidyverse)
  <span class="kw">library</span>(lubridate)
  <span class="kw">library</span>(openair)
  <span class="kw">library</span>(reshape)
  <span class="kw">library</span>(shiny)
  <span class="kw">library</span>(rsconnect)
  
  data<span class="op">$</span>Date =<span class="st"> </span><span class="kw">ymd</span>(data<span class="op">$</span>Date)
  
  met_data =<span class="st"> </span><span class="kw">read.csv</span>(met_data_filepath)
  <span class="kw">names</span>(met_data)[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">9</span>)] =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Day&quot;</span>,<span class="st">&quot;wd&quot;</span>,<span class="st">&quot;ws&quot;</span>)
  met_data =<span class="st"> </span><span class="kw">mutate</span>(met_data, <span class="dt">date =</span> <span class="kw">paste0</span>(Year,<span class="st">&quot;/&quot;</span>,Month,<span class="st">&quot;/&quot;</span>,Day,<span class="st">&quot; &quot;</span>,Hour,<span class="st">&quot;:00&quot;</span>))
  met_data<span class="op">$</span>date =<span class="st"> </span><span class="kw">ymd_hm</span>(met_data<span class="op">$</span>date)
  met_data =<span class="st"> </span>met_data[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">10</span>)]
  met_data =<span class="st"> </span><span class="kw">timeAverage</span>(met_data, <span class="dt">avg.time =</span> <span class="st">&quot;day&quot;</span>)
  met_data<span class="op">$</span>date =<span class="st"> </span><span class="kw">ymd</span>(met_data<span class="op">$</span>date)
  
  data =<span class="st"> </span><span class="kw">left_join</span>(data, met_data, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;Date&quot;</span> =<span class="st"> &quot;date&quot;</span>))
  
  Pollutant &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>Pollutant)
  Site &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>AQSID)
  Year &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>Year)

  <span class="kw">shinyApp</span>(
  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(<span class="dt">responsive =</span> <span class="ot">FALSE</span>,
                 <span class="kw">fluidRow</span>(
                   <span class="kw">column</span>(<span class="dv">3</span>,
                          <span class="dt">style =</span> <span class="st">&quot;padding-bottom: 20px;&quot;</span>,
                          <span class="kw">inputPanel</span>(
                            <span class="kw">selectInput</span>(<span class="st">&quot;Pollutant&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a pollutant&quot;</span>, <span class="dt">choices =</span> Pollutant),
                            <span class="kw">selectInput</span>(<span class="st">&quot;Year&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a year&quot;</span>, <span class="dt">choices =</span> Year),
                            <span class="kw">selectInput</span>(<span class="st">&quot;Site&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a site&quot;</span>, <span class="dt">choices =</span> Site))),
                   <span class="kw">column</span>(<span class="dv">9</span>,
                          <span class="kw">plotOutput</span>(<span class="st">&#39;normviz&#39;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)))),
  
  
  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {
    
    
    
    
    output<span class="op">$</span>normviz &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
      <span class="kw">print</span>(input<span class="op">$</span>Pollutant)
      <span class="kw">print</span>(input<span class="op">$</span>Site)
      <span class="kw">print</span>(input<span class="op">$</span>Year)
      data_sub =<span class="st"> </span><span class="kw">filter</span>(data, Pollutant<span class="op">==</span>input<span class="op">$</span>Pollutant, AQSID <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>Site, Year <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>Year, <span class="op">!</span><span class="kw">is.na</span>(Result))
      data_sub =<span class="st"> </span>data_sub <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">MDL =</span> <span class="kw">max</span>(MDL), <span class="dt">minimum =</span> <span class="kw">min</span>(Result), <span class="dt">maximum =</span> <span class="kw">max</span>(Result), <span class="dt">Result =</span> <span class="kw">ifelse</span>(Censored, <span class="fl">1e-16</span>, Result))
      breaks_site =<span class="st"> </span><span class="ot">NULL</span>
      <span class="cf">if</span>(<span class="op">!</span><span class="kw">all</span>(data_sub<span class="op">$</span>Censored)){
        
        breaks_site =<span class="st"> </span><span class="kw">c</span>(breaks_site, <span class="dv">0</span>, <span class="co">#c(round_any(data_sub$minimum[1], 0.001, floor),</span>
                      <span class="kw">round_any</span>( <span class="kw">c</span>(data_sub<span class="op">$</span>MDL[<span class="dv">1</span>], data_sub<span class="op">$</span>MDL[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>(data_sub<span class="op">$</span>maximum[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>data_sub<span class="op">$</span>MDL[<span class="dv">1</span>]) <span class="op">*</span><span class="st"> </span>
<span class="st">                                     </span>(<span class="dv">1</span><span class="op">:</span>(num_breaks<span class="op">-</span><span class="dv">1</span>) <span class="op">/</span><span class="st"> </span>(num_breaks<span class="op">-</span><span class="dv">1</span>) ) ), <span class="fl">0.0001</span>, ceiling ) )
        <span class="kw">pollutionRose</span>(data_sub, <span class="dt">statistic =</span> <span class="st">&quot;abs.count&quot;</span>, <span class="dt">pollutant =</span> <span class="st">&quot;Result&quot;</span>, <span class="dt">breaks =</span> breaks_site, 
                  <span class="dt">key.footer=</span><span class="st">&quot;ug/m3&quot;</span>, <span class="dt">main=</span><span class="kw">paste</span>(<span class="st">&quot;Daily Average Pollution Rose for&quot;</span>,
                  data_sub<span class="op">$</span>Pollutant[<span class="dv">1</span>],<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, data_sub<span class="op">$</span>AQSID[<span class="dv">1</span>]) )
      }
      <span class="cf">else</span> {
        breaks_site =<span class="st"> </span><span class="kw">c</span>(breaks_site, <span class="kw">c</span>(<span class="kw">round_any</span>(<span class="dv">0</span>, <span class="fl">0.0001</span>, floor),
                      <span class="kw">round_any</span>( <span class="kw">c</span>(data_sub<span class="op">$</span>MDL[<span class="dv">1</span>], <span class="dv">2</span><span class="op">*</span>data_sub<span class="op">$</span>MDL[<span class="dv">1</span>] ), <span class="fl">0.0001</span>, ceiling ) ) )
        <span class="kw">pollutionRose</span>(data_sub, <span class="dt">statistic =</span> <span class="st">&quot;abs.count&quot;</span>, <span class="dt">pollutant =</span> <span class="st">&quot;Result&quot;</span>, <span class="dt">breaks =</span> breaks_site, 
                  <span class="dt">key.footer=</span><span class="st">&quot;ug/m3&quot;</span>, <span class="dt">main=</span><span class="kw">paste</span>(<span class="st">&quot;Daily Average Pollution Rose for&quot;</span>,
                  data_sub<span class="op">$</span>Pollutant[<span class="dv">1</span>],<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, data_sub<span class="op">$</span>AQSID[<span class="dv">1</span>]) )
        
      }
      
    })
    
  })

}</code></pre></div>
</div>

</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="start-finish.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/60-Charts.Rmd",
"text": "Edit"
},
"download": ["air-methods.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
