<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.5.2 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="best-practices.html">
<link rel="next" href="quality-assurance-methods.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.3/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a><ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#tidyverse"><i class="fa fa-check"></i><b>1.1</b> Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.2</b> Pollutant names</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#keeping-r-up-to-date"><i class="fa fa-check"></i><b>1.3</b> Keeping R up-to-date</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#script-layout"><i class="fa fa-check"></i><b>1.4</b> Script layout</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.5</b> Divide and conquer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-data.html"><a href="getting-data.html"><i class="fa fa-check"></i><b>2</b> Getting data</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-data.html"><a href="getting-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-data.html"><a href="getting-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-data.html"><a href="getting-data.html#rqamd"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-data.html"><a href="getting-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.3</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.4" data-path="getting-data.html"><a href="getting-data.html#monitors"><i class="fa fa-check"></i><b>2.1.4</b> Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.5" data-path="getting-data.html"><a href="getting-data.html#lims"><i class="fa fa-check"></i><b>2.1.5</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.6" data-path="getting-data.html"><a href="getting-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.6</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.7" data-path="getting-data.html"><a href="getting-data.html#wair"><i class="fa fa-check"></i><b>2.1.7</b> Retrieving data from MPCA WAIR database</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-data.html"><a href="getting-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-data.html"><a href="getting-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-data.html"><a href="getting-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQs and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-data.html"><a href="getting-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a><ul>
<li class="chapter" data-level="2.3.1" data-path="getting-data.html"><a href="getting-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="getting-data.html"><a href="getting-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="getting-data.html"><a href="getting-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="getting-data.html"><a href="getting-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-data.html"><a href="getting-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a><ul>
<li class="chapter" data-level="2.4.1" data-path="getting-data.html"><a href="getting-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="getting-data.html"><a href="getting-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="getting-data.html"><a href="getting-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="getting-data.html"><a href="getting-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="getting-data.html"><a href="getting-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="getting-data.html"><a href="getting-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="getting-data.html"><a href="getting-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="getting-data.html"><a href="getting-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Remove blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Remove <em>Qualified</em> data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#leaks"><i class="fa fa-check"></i><b>3.3</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="3.4" data-path="data-cleaning.html"><a href="data-cleaning.html#outs"><i class="fa fa-check"></i><b>3.4</b> Exceptional values and outliers</a></li>
<li class="chapter" data-level="3.5" data-path="data-cleaning.html"><a href="data-cleaning.html#sticky2"><i class="fa fa-check"></i><b>3.5</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="3.6" data-path="data-cleaning.html"><a href="data-cleaning.html#unique"><i class="fa fa-check"></i><b>3.6</b> Unique detected values</a></li>
<li class="chapter" data-level="3.7" data-path="data-cleaning.html"><a href="data-cleaning.html#valid_ref"><i class="fa fa-check"></i><b>3.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>4</b> Collocated monitors</a><ul>
<li class="chapter" data-level="4.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>4.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="4.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>4.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>5</b> Detection limits</a><ul>
<li class="chapter" data-level="5.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit---definition"><i class="fa fa-check"></i><b>5.1</b> Method Detection Limit - <em>Definition</em></a></li>
<li class="chapter" data-level="5.2" data-path="detection-limits.html"><a href="detection-limits.html#procedure-for-calculating-method-detection-limits"><i class="fa fa-check"></i><b>5.2</b> Procedure for calculating method detection limits</a></li>
<li class="chapter" data-level="5.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-detection-limits"><i class="fa fa-check"></i><b>5.3</b> Finding detection limits</a></li>
<li class="chapter" data-level="5.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>5.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="5.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values-what-not-to-do"><i class="fa fa-check"></i><b>5.5</b> Estimating below detection values <em>(what not to do)</em></a></li>
<li class="chapter" data-level="5.6" data-path="detection-limits.html"><a href="detection-limits.html#below-detection-values"><i class="fa fa-check"></i><b>5.6</b> Below detection values</a></li>
<li class="chapter" data-level="5.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>5.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="5.8" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>5.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>6</b> Completeness checks</a><ul>
<li class="chapter" data-level="6.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>6.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="7" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>7</b> Summary statistics</a><ul>
<li class="chapter" data-level="7.1" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>7.1</b> Bootstrapping</a></li>
<li class="chapter" data-level="7.2" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>7.2</b> Below the detection limit</a></li>
<li class="chapter" data-level="7.3" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>7.3</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="7.4" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>7.4</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="7.5" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>7.5</b> Comparison of data to inhalation health benchmarks</a></li>
<li class="chapter" data-level="7.6" data-path="summary-statistics.html"><a href="summary-statistics.html#roll365"><i class="fa fa-check"></i><b>7.6</b> Rolling 365 day summaries</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>8</b> Site comparisons</a><ul>
<li class="chapter" data-level="8.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>8.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="8.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-data"><i class="fa fa-check"></i><b>8.2</b> Tools to visualize data</a><ul>
<li class="chapter" data-level="8.2.1" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i><b>8.2.1</b> Beeswarm Plots</a></li>
<li class="chapter" data-level="8.2.2" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i><b>8.2.2</b> Correlation matrices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>9</b> Start to finish</a><ul>
<li class="chapter" data-level="9.1" data-path="start-finish.html"><a href="start-finish.html#functions"><i class="fa fa-check"></i><b>9.1</b> <strong>Functions</strong></a></li>
<li class="chapter" data-level="9.2" data-path="start-finish.html"><a href="start-finish.html#analysis-steps"><i class="fa fa-check"></i><b>9.2</b> <strong>Analysis Steps</strong></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>10</b> Charts</a><ul>
<li class="chapter" data-level="10.1" data-path="charts.html"><a href="charts.html#boxplots"><i class="fa fa-check"></i><b>10.1</b> Boxplots</a><ul>
<li class="chapter" data-level="10.1.1" data-path="charts.html"><a href="charts.html#log-boxplots"><i class="fa fa-check"></i><b>10.1.1</b> Log boxplots</a></li>
<li class="chapter" data-level="10.1.2" data-path="charts.html"><a href="charts.html#outliers"><i class="fa fa-check"></i><b>10.1.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>10.2</b> Calendar plots</a></li>
<li class="chapter" data-level="10.3" data-path="charts.html"><a href="charts.html#color-palettes"><i class="fa fa-check"></i><b>10.3</b> Color palettes</a></li>
<li class="chapter" data-level="10.4" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>10.4</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>11</b> Time series</a><ul>
<li class="chapter" data-level="11.1" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i><b>11.1</b> Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>12</b> Maps</a><ul>
<li class="chapter" data-level="12.1" data-path="maps.html"><a href="maps.html#kriging"><i class="fa fa-check"></i><b>12.1</b> Kriging</a></li>
<li class="chapter" data-level="12.2" data-path="maps.html"><a href="maps.html#spatial-averaging-and-aggregation"><i class="fa fa-check"></i><b>12.2</b> Spatial averaging and aggregation</a></li>
<li class="chapter" data-level="12.3" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r-adn-joining-to-ej-areas"><i class="fa fa-check"></i><b>12.3</b> Creating shapefiles in R adn joining to EJ areas</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>13</b> Additional resources</a></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>14</b> AQI explorer</a></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a></li>
<li class="chapter" data-level="16" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>16</b> Air toxics explorer</a><ul>
<li class="chapter" data-level="16.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#mpca-air-toxics-methods"><i class="fa fa-check"></i><b>16.1</b> MPCA Air Toxics Methods</a><ul>
<li class="chapter" data-level="16.1.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>16.1.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="16.1.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>16.1.2</b> Data Validation</a></li>
<li class="chapter" data-level="16.1.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i><b>16.1.3</b> Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="16.1.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>16.1.4</b> Producing Annual Summaries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="getting-data" class="section level1">
<h1><span class="header-section-number"></span> Getting data</h1>
<p>This section describes how to access air monitoring and modeling data. These data include:</p>
<p><strong>Air monitoring</strong></p>
<ul>
<li>EPA
<ul>
<li><a href="getting-data.html#AQS">2.1.1</a> AQS Database</li>
<li><a href="getting-data.html#rqamd">2.1.2</a> AQS Datamart (RQAMD Package)</li>
<li><a href="getting-data.html#aqi-now">2.1.3</a> AirNow: Current AQI observations<br />
</li>
<li><a href="getting-data.html#monitors">2.1.4</a> AirNow: Active AQI monitors</li>
</ul></li>
<li>MPCA
<ul>
<li><a href="getting-data.html#lims">2.1.5</a> LIMS data via Tableau</li>
<li><a href="getting-data.html#AirVision">2.1.6</a> AirVision: Continuous data</li>
<li><a href="getting-data.html#wair">2.1.7</a> WAIR Database</li>
</ul></li>
</ul>
<p><strong>Health and standards</strong></p>
<ul>
<li>Air toxics
<ul>
<li><a href="getting-data.html#IHBs">2.2.1</a> Inhalation health benchmarks</li>
</ul></li>
<li>Criteria pollutants
<ul>
<li><a href="getting-data.html#NAAQS">2.2.2</a> Air Quality Standards (NAAQs and MAAQS)</li>
</ul></li>
</ul>
<p><strong>Air modeling</strong></p>
<ul>
<li>Modeling results
<ul>
<li><a href="getting-data.html#nata">2.3.1</a> NATA</li>
<li><a href="getting-data.html#mnrisks">2.3.2</a> MNRISKS</li>
<li><a href="getting-data.html#downscale">2.3.3</a> Downscaler for Ozone and PM2.5</li>
<li><a href="getting-data.html#cmaq">2.3.4</a> CMAQ</li>
</ul></li>
</ul>
<p><strong>Context</strong></p>
<ul>
<li>Emissions
<ul>
<li><a href="getting-data.html#mn-ei">2.4.1</a> MN Emissions Inventory</li>
<li><a href="getting-data.html#nei">2.4.2</a> EPA’s NEI</li>
<li><a href="getting-data.html#fac-coords">2.4.3</a> Facility locations</li>
</ul></li>
<li>Meteorology and Climate
<ul>
<li><a href="getting-data.html#wx-obs">2.4.4</a> Weather observations</li>
<li><a href="getting-data.html#hysplit">2.4.5</a> HYSPLIT wind trajectories</li>
</ul></li>
<li>Geography and Census data
<ul>
<li><a href="getting-data.html#landuse">2.4.6</a> Land use maps</li>
<li><a href="getting-data.html#census">2.4.7</a> U.S. Census boundaries</li>
<li><a href="getting-data.html#acs">2.4.8</a> Demographics from American Community Survey (ACS)</li>
</ul></li>
</ul>
<div id="air-monitoring" class="section level2">
<h2><span class="header-section-number">2.1</span> Air monitoring</h2>
<div id="AQS" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Retrieving data from AQS</h3>
<p>The Air Quality System (AQS) contains ambient air pollution data collected by EPA, state, local, and tribal air pollution control agencies from over thousands of monitors. AQS also contains meteorological data, descriptive information about each monitoring station (including its geographic location and its operator), and data quality assurance/quality control information.</p>
<p>Registered users can access the AQS database via a web application at <a href="https://www.epa.gov/aqs" class="uri">https://www.epa.gov/aqs</a>.</p>
</div>
<div id="rqamd" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Retrieving data from AQS DataMart</h3>
<p>The AQS Data Mart provides a convenient API to access air quality data stored in the EPA’s AQS database, [AQS Data Mart] (<a href="https://aqs.epa.gov/aqsweb/documents/data_mart_welcome.html" class="uri">https://aqs.epa.gov/aqsweb/documents/data_mart_welcome.html</a>)</p>
<p>Note: The AQS Data Mart requires a user name and password.The username and password is not the same as your AQS User Account.To request a Data Mart account, follow the instructions on the Data Mart page.</p>
<p>The RQAMD package allows users to query the AQS Data Mart in R, [RQAMD] (<a href="https://github.com/ebailey78/raqdm" class="uri">https://github.com/ebailey78/raqdm</a>)</p>
<p><br> <strong>Sample <code>R</code> script</strong></p>
<p>Click the button below to view a step by step example.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">##install raqdm package
<span class="kw">library</span>(devtools)
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;ebailey78/raqdm&quot;</span>)
<span class="kw">library</span>(raqdm)

##set Data Mart username and password.

<span class="kw">setAQDMuser</span>(<span class="st">&quot;User Name&quot;</span>,<span class="st">&quot;PW&quot;</span>,<span class="dt">save=</span><span class="ot">TRUE</span>) <span class="co">#Note save=TRUE creates a file that stores username and password locally, you will not need to run setuser info each time you load raqdm. </span>

<span class="kw">setAQDMdefaults</span>(<span class="dt">pc=</span><span class="st">&quot;CRITERIA&quot;</span>, <span class="dt">state=</span><span class="st">&quot;27&quot;</span>, <span class="dt">save=</span><span class="ot">TRUE</span>) <span class="co">#Set defaults that are locally stored for queries. This eliminates need to define the data type and state code. </span>


##Single Paramteer Query

x &lt;-<span class="st"> </span><span class="kw">getAQDMdata</span>(<span class="dt">state=</span><span class="st">&quot;27&quot;</span>,<span class="dt">pc=</span><span class="st">&quot;CRITERIA&quot;</span>,<span class="dt">param=</span><span class="st">&quot;42602&quot;</span>,<span class="dt">format=</span><span class="st">&quot;AQCSV&quot;</span>,<span class="dt">bdate=</span><span class="st">&quot;20140101&quot;</span>,<span class="dt">edate=</span><span class="st">&quot;20141231&quot;</span>,<span class="dt">synchronous =</span> <span class="ot">FALSE</span>) <span class="co"># Queries Data Mart DataBase</span>

aqcsv &lt;-<span class="st"> </span><span class="kw">getAQDMrequest</span>(x) <span class="co"># Wait for email confirming file is ready. </span>


##Multiple Parameter Loops


params &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;45201&quot;</span>, <span class="st">&quot;42602&quot;</span>, <span class="st">&quot;44201&quot;</span>) <span class="co">#Create a vector with the parameters you are interested in</span>

<span class="co"># Use lapply to loop through the params vector, requesting each one from AQDM. A list of requests will be returned to the x variable</span>
x &lt;-<span class="st"> </span><span class="kw">lapply</span>(params, <span class="cf">function</span>(p) {
  <span class="kw">return</span>(<span class="kw">getAQDMdata</span>(<span class="dt">param=</span>p))
})

<span class="co"># now loop through the requests to retrieve the data</span>
y &lt;-<span class="st"> </span><span class="kw">lapply</span>(x, <span class="cf">function</span>(r) {
  <span class="kw">return</span>(<span class="kw">getAQDMrequest</span>(r))
})

<span class="co"># You could then use do.call and rbind to combine them into one data.frame</span>
d &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, y)</code></pre></div>
</div>
<p><br></p>
</div>
<div id="aqi-now" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Current AQI observations</h3>
<p>Air data for the entire United States is at your finger tips. <em>EPA’s AirNow</em> maintains a publicly accessible folder of current air monitoring data at <a href="https://files.airnowtech.org/" class="uri">https://files.airnowtech.org/</a>. Data retrieved from AirNow is preliminary and may change following QA.</p>
<p><br> <strong>Sample <code>R</code> script</strong></p>
<p>Use the following R code to grab the most recent AQI results for the entire country.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(readr)

<span class="co"># Connect to AirNow data site</span>
<span class="co">#https://files.airnowtech.org/</span>

airnow_link &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://s3-us-west-1.amazonaws.com//files.airnowtech.org/airnow/today/&quot;</span>,
                      <span class="st">&quot;HourlyData_&quot;</span>,
                      <span class="kw">format</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">75</span>, <span class="st">&quot;%Y%m%d%H&quot;</span>, <span class="dt">tz =</span> <span class="st">&quot;GMT&quot;</span>),
                      <span class="st">&quot;.dat&quot;</span>)
  
aqi_now   &lt;-<span class="st"> </span><span class="kw">read_delim</span>(airnow_link, <span class="st">&quot;|&quot;</span>, 
                        <span class="dt">col_names =</span> F)
                        <span class="co">#col_types = c(&#39;cccciccdc&#39;))</span>
 
<span class="co"># Add column names</span>
<span class="kw">names</span>(aqi_now) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;time&quot;</span>, <span class="st">&quot;aqsid&quot;</span>, <span class="st">&quot;city&quot;</span>, <span class="st">&quot;local_time&quot;</span>, <span class="st">&quot;parameter&quot;</span>, <span class="st">&quot;units&quot;</span>, <span class="st">&quot;concentration&quot;</span>, <span class="st">&quot;agency&quot;</span>)


<span class="co"># Filter to Ozone and PM2.5 results</span>
aqi_now &lt;-<span class="st"> </span><span class="kw">filter</span>(aqi_now, parameter <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;OZONE&quot;</span>, <span class="st">&quot;PM2.5&quot;</span>))</code></pre></div>
</div>
</div>
<div id="monitors" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Active AQI monitors</h3>
<p>Current air monitoring locations are published on <a href="https://files.airnowtech.org/?prefix=airnow/today/"><em>AirNow</em></a> to the <code>monitoring_site_locations.dat</code> file.</p>
<p><br> <strong>Sample <code>R</code> script</strong></p>
<p>Click the button below to view a step by step example.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(readr)

<span class="co"># Connect to AirNow data site</span>
<span class="co">#https://files.airnowtech.org/</span>

airnow_link &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://s3-us-west-1.amazonaws.com//files.airnowtech.org/airnow/today/&quot;</span>,
                      <span class="st">&quot;monitoring_site_locations.dat&quot;</span>)
  
aqi_sites   &lt;-<span class="st"> </span><span class="kw">read_delim</span>(airnow_link, <span class="st">&quot;|&quot;</span>, <span class="dt">col_names =</span> F)
 
<span class="co"># Drop empty columns</span>
aqi_sites &lt;-<span class="st"> </span>aqi_sites[ , <span class="op">-</span><span class="kw">c</span>(<span class="dv">14</span><span class="op">:</span><span class="dv">16</span>,<span class="dv">22</span><span class="op">:</span><span class="dv">23</span>)]

<span class="co"># Add column names</span>
<span class="kw">names</span>(aqi_sites) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aqsid&quot;</span>, 
                      <span class="st">&quot;parameter&quot;</span>, 
                      <span class="st">&quot;local_id&quot;</span>, 
                      <span class="st">&quot;name&quot;</span>, 
                      <span class="st">&quot;status&quot;</span>, 
                      <span class="st">&quot;state_region&quot;</span>, 
                      <span class="st">&quot;agency&quot;</span>, 
                      <span class="st">&quot;epa_region&quot;</span>, 
                      <span class="st">&quot;lat&quot;</span>, 
                      <span class="st">&quot;long&quot;</span>, 
                      <span class="st">&quot;elevation&quot;</span>,
                      <span class="st">&quot;local_time&quot;</span>,
                      <span class="st">&quot;country&quot;</span>,
                      <span class="st">&quot;city&quot;</span>,
                      <span class="st">&quot;state_fips&quot;</span>,
                      <span class="st">&quot;state&quot;</span>,
                      <span class="st">&quot;county_fips&quot;</span>,
                      <span class="st">&quot;county&quot;</span>)
                    

<span class="co"># Filter to Minnesota sites</span>
aqi_sites  &lt;-<span class="st"> </span><span class="kw">filter</span>(aqi_sites, state_fips <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">27</span>))</code></pre></div>
</div>
<p><br></p>
</div>
<div id="lims" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Retrieving data from LIMS via Tableau</h3>
<p>The LIMS database is the primary data warehouse for AQ monitoring activities. The LIMS system is being retired and replaced. To ease data accessibilty during this transition LIMS data are available for download via an internal Tableau workbook at <a href="http://tableau.pca.state.mn.us/#/workbooks/3342" class="uri">http://tableau.pca.state.mn.us/#/workbooks/3342</a>.</p>
</div>
<div id="AirVision" class="section level3">
<h3><span class="header-section-number">2.1.6</span> Retrieving continuous data from AirVision</h3>
<p>AirVision is the data acquistion and temporary storage database for continuous air monitoring data. Data collected in AirVision is transfered to LIMs and AQS for final data storage. If you need to access to continuous data before it has been transfered to the final data repository you can run reports from AirVision.</p>
<p>To run reports, the AirVision client must be installed on your computer and you need an user account. Contact the Air Monitoring Supervisor to request credentials. Alternatively, an AirVision administator can create a report task that will generate a data report and send it to a specified location (FTP site or e-mail).</p>
</div>
<div id="wair" class="section level3">
<h3><span class="header-section-number">2.1.7</span> Retrieving data from MPCA WAIR database</h3>
<p>The WAIR database provides a queryable local copy of select air quality data extracted from multiple data sources. This database is managed by Margaret McCourtney. Contact Margaret to request login credentials.</p>
<p>See <a href="http://rainier.pca.state.mn.us/documentation/DataDictionary/wair/index.html">WAIR Data Dictionary</a> for available data tables.</p>
<p>Use the following code to query WAIR using the R package <code>dplyr</code>.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">################################################################################################
## This script loads the library and driver and connects to WAIR.  A dplyr query extracts 
## data from the database into a format specified by Cassie McMahon for calculating           
## OZONE DESIGN VALUES                                                                        
##                                                                                    
## Note: WAIR does not contain values for SamplingFrequency and MonitorProtocolID 
##
## Note:  dplyr does not have a command to disconnect from the database. Connection will
## terminate upon quitting R.  Please do not keep (many) connections open for long periods of
## time.
################################################################################################

## Load the package
<span class="kw">library</span>(dplyr)

## Open a connection to the database WAIR, schema AQS ##
my_wair &lt;-<span class="st"> </span><span class="kw">src_postgres</span>(<span class="dt">dbname =</span> <span class="st">&#39;wair&#39;</span>, <span class="dt">host =</span> <span class="st">&quot;eiger&quot;</span>, <span class="dt">user =</span> <span class="st">&quot;username&quot;</span>, <span class="dt">password =</span> <span class="st">&quot;password&quot;</span>,
<span class="dt">options =</span> <span class="st">&quot;-c search_path=aqs&quot;</span>)

## Reference a table, or two if combining, in the database (e.g. aqs.monitor &amp; aqs.obs_value) ##
## Select columns and filter by row ##

<span class="co">#aqs.monitor table in WAIR ##</span>
my_monitor &lt;-<span class="st"> </span><span class="kw">tbl</span>(my_wair, <span class="st">&quot;monitor&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                </span><span class="kw">select</span>(id_mon<span class="op">:</span>poc_code) <span class="op">%&gt;%</span><span class="st">  </span>
<span class="st">                </span><span class="kw">filter</span>(stateid<span class="op">==</span><span class="dv">27</span> <span class="op">&amp;&amp;</span><span class="st"> </span>parm_code <span class="op">==</span><span class="st"> </span><span class="dv">44201</span>)

<span class="co">#aqs.obs_value table in WAIR ##</span>
my_obs &lt;-<span class="st"> </span><span class="kw">tbl</span>(my_wair, <span class="st">&quot;obs_value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">filter</span>(parm_code <span class="op">==</span><span class="st"> </span><span class="dv">44201</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">between</span>(sampldate, <span class="st">&quot;2014-06-01&quot;</span>, <span class="st">&quot;2014-06-07&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">              </span><span class="kw">select</span>(id_mon, dur_code, unitid, method_code,
                     sampldate, startime, value, nulldata, qual_code)

## Combine monitor data with observations 
my_mn_o3 &lt;-<span class="st"> </span><span class="kw">inner_join</span>(my_monitor, my_obs, <span class="dt">type =</span> <span class="st">&quot;inner&quot;</span>, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;id_mon&quot;</span>)) 


## Collect data into a dataframe or table 
my_mn_o3_df &lt;-<span class="st"> </span><span class="kw">collect</span>(my_mn_o3) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                 </span><span class="kw">arrange</span>(stateid, cntyid, siteid, parm_code,  <span class="co"># Arrange combined data in specified order</span>
                         poc_code, dur_code, unitid, method_code, 
                         sampldate, startime, value, nulldata, qual_code)

## 
<span class="kw">head</span>(my_mn_o3_df)</code></pre></div>
</div>
<p><br></p>
<p>Use the following code to query WAIR using the package <code>RPostgrSQL</code>.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">################################################################################################
## This script loads the library and driver and connects to WAIR.  A PostgrSQL query extracts 
## data from the database into a format specified by Cassie McMahon for calculating           
## OZONE DESIGN VALUES                                                                        
##                                                                                    
## Please disconnect from database and unload the driver before proceeding with analysis of 
## the data in your dataframe.
##
## Cassie&#39;s headings
## &quot;State.Code&quot;, &quot;County.Code&quot;, &quot;Site.ID&quot;, &quot;Parameter&quot;, &quot;POC&quot;, &quot;Sample.Duration&quot;, &quot;Unit&quot;,
## &quot;Method&quot;, &quot;Date&quot;, &quot;Start.Time&quot;, &quot;Sample.Value&quot;, &quot;NullDataCode&quot;, &quot;SamplingFrequency&quot;,
## &quot;MonitorProtocolID&quot;, &quot;Qual1&quot;  
##  Note: WAIR does not contain values for SamplingFrequency and MonitorProtocolID 
##
################################################################################################

## call the library
<span class="kw">library</span>(RPostgreSQL)

## load the PostgreSQL driver
drv &lt;-<span class="st"> </span><span class="kw">dbDriver</span>(<span class="st">&quot;PostgreSQL&quot;</span>)

## Open a connection 
con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(drv, <span class="dt">dbname =</span> <span class="st">&quot;wair&quot;</span>, <span class="dt">host =</span> <span class="st">&#39;eiger&#39;</span>, <span class="dt">user =</span> <span class="st">&#39;username&#39;</span>, <span class="dt">password =</span> <span class="st">&#39;password&#39;</span>)

<span class="co">#***************************** all in 1 step ***************************************************</span>


dframe &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(con, 
           <span class="dt">statement =</span> <span class="kw">paste</span>(
       ################ insert SQL here ######################
        <span class="st">&quot;SELECT m.stateid AS state_code,\</span>
<span class="st">            m.cntyid AS county_code,\</span>
<span class="st">            m.siteid AS site_id,\</span>
<span class="st">            m.parm_code AS parameter,\</span>
<span class="st">            m.poc_code AS poc,\</span>
<span class="st">            o.dur_code AS sample_duration,\</span>
<span class="st">        o.unitid AS unit,\</span>
<span class="st">            o.method_code AS method,\</span>
<span class="st">            o.sampldate AS date,\</span>
<span class="st">            o.startime AS start_time,\</span>
<span class="st">            o.value AS sample_value,\</span>
<span class="st">            o.nulldata AS nulldatacode,\</span>
<span class="st">                NULL AS sampling_frequency,\</span>
<span class="st">        NULL AS monitor_protocol_id,\</span>
<span class="st">            o.qual_code\</span>
<span class="st">           FROM aqs.monitor m \</span>
<span class="st">           JOIN aqs.obs_value o \</span>
<span class="st">             ON m.id_mon = o.id_mon \ </span>
<span class="st">          WHERE m.stateid = &#39;27&#39; \</span>
<span class="st">            AND m.parm_code = &#39;44201&#39; \</span>
<span class="st">            AND o.sampldate BETWEEN &#39;2014-06-01&#39; AND &#39;2014-06-07&#39;\</span>
<span class="st">    &quot;</span>
       ########################################################
                     )); 


<span class="co">#***********************************************************************************************</span>

## Closes the connection
<span class="kw">dbDisconnect</span>(con)

## Frees all the resources on the driver
<span class="kw">dbUnloadDriver</span>(drv)</code></pre></div>
</div>
</div>
</div>
<div id="health-and-standards" class="section level2">
<h2><span class="header-section-number">2.2</span> Health and standards</h2>
<div id="IHBs" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Inhalation health benchmarks</h3>
<p>The inhalation health benchmarks used by MPCA are available on the web in these formats:</p>
<ul>
<li>PDF: <a href="https://www.pca.state.mn.us/sites/default/files/aq9-28.pdf" class="uri">https://www.pca.state.mn.us/sites/default/files/aq9-28.pdf</a></li>
<li>Excel: <a href="https://www.pca.state.mn.us/sites/default/files/aq9-22.xlsm" class="uri">https://www.pca.state.mn.us/sites/default/files/aq9-22.xlsm</a></li>
<li>CSV: <a href="https://raw.githubusercontent.com/MPCA-air/health-values/master/Inhalation_Health_Benchmarks(IHBs).csv" class="uri">https://raw.githubusercontent.com/MPCA-air/health-values/master/Inhalation_Health_Benchmarks(IHBs).csv</a></li>
</ul>
<p><br></p>
<p>Use the following R code to grab the most recent inhalation health benchmarks and references used by MPCA.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)

rass_web &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;X:/Agency_Files/Outcomes/Risk_Eval_Air_Mod/_Air_Risk_Evaluation/AERA program/RASS/AERA RASS (aq9-22-7)_2018-01.xlsx&quot;</span>, 
                       <span class="dt">sheet =</span> <span class="st">&quot;ToxValues&quot;</span>, 
                       <span class="dt">skip =</span> <span class="dv">19</span>)

ihbs &lt;-<span class="st"> </span>rass_web[ , <span class="kw">c</span>(<span class="st">&quot;Surrogate?&quot;</span>, <span class="st">&quot;Group&quot;</span>, <span class="st">&quot;CAS # or MPCA#&quot;</span>, <span class="st">&quot;Chemical Name&quot;</span>, <span class="st">&quot;HAP?&quot;</span>, <span class="st">&quot;Tox Value Source&quot;</span>, <span class="st">&quot;Acute Air Conc. (ug/m3)&quot;</span>, <span class="st">&quot;General Toxic Endpoint&quot;</span>, <span class="st">&quot;Specific Toxic Endpoint&quot;</span>, <span class="st">&quot;Notes&quot;</span>, <span class="st">&quot;Surrogate CAS&quot;</span>, <span class="st">&quot;Surrogate Name&quot;</span>, <span class="st">&quot;Tox Value Source__1&quot;</span>, <span class="st">&quot;Unit Risk (ug/m3)-1&quot;</span>, <span class="st">&quot;10-5 Cancer-based Air Conc (ug/m3)&quot;</span>, <span class="st">&quot;Notes__1&quot;</span>, <span class="st">&quot;Surrogate CAS__1&quot;</span>, <span class="st">&quot;Surrogate Name__1&quot;</span>, <span class="st">&quot;Tox Value Source__2&quot;</span>, <span class="st">&quot;Reference Conc. (ug/m3)&quot;</span>, <span class="st">&quot;General Toxic Endpoint__1&quot;</span>, <span class="st">&quot;Specific Toxic Endpoint__1&quot;</span>, <span class="st">&quot;Notes__2&quot;</span>, <span class="st">&quot;Surrogate CAS__2&quot;</span>, <span class="st">&quot;Surrogate Name__2&quot;</span>)]

<span class="kw">names</span>(ihbs) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Surrogate&quot;</span>, <span class="st">&quot;Group&quot;</span>, <span class="st">&quot;CAS&quot;</span>, <span class="st">&quot;Chemical Name&quot;</span>, <span class="st">&quot;is_HAP&quot;</span>, <span class="st">&quot;Acute Source&quot;</span>, <span class="st">&quot;Acute Air Conc&quot;</span>, <span class="st">&quot;Acute Toxic Endpoint&quot;</span>, <span class="st">&quot;Acute Specific Endpoint&quot;</span>, <span class="st">&quot;Acute Notes&quot;</span>, <span class="st">&quot;Acute Surrogate CAS&quot;</span>, <span class="st">&quot;Acute Surrogate Name&quot;</span>, <span class="st">&quot;Cancer Tox Value Source&quot;</span>, <span class="st">&quot;Unit Risk&quot;</span>, <span class="st">&quot;Cancer-based Air Conc&quot;</span>, <span class="st">&quot;Cancer Notes&quot;</span>, <span class="st">&quot;Cancer Surrogate CAS&quot;</span>, <span class="st">&quot;Cancer Surrogate Name&quot;</span>, <span class="st">&quot;NC Tox Value Source&quot;</span>, <span class="st">&quot;Reference Conc&quot;</span>, <span class="st">&quot;NC Toxic Endpoint&quot;</span>, <span class="st">&quot;NC Specific Toxic Endpoint&quot;</span>, <span class="st">&quot;Chronic Notes&quot;</span>, <span class="st">&quot;Chronic Surrogate CAS&quot;</span>, <span class="st">&quot;Chronic Surrogate Name&quot;</span>)</code></pre></div>
</div>
<p><br></p>
<p>You can also pull a simple table of inhalation health benchmarks from a table on Github.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)

url  &lt;-<span class="st"> &quot;https://raw.githubusercontent.com/MPCA-air/health-values/master/Inhalation_Health_Benchmarks(IHBs).csv&quot;</span>

ihbs &lt;-<span class="st"> </span><span class="kw">read_csv</span>(url) </code></pre></div>
</div>
<p><br></p>
</div>
<div id="NAAQS" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Air Quality Standards (NAAQs and MAAQS)</h3>
<p>Criteria air pollutants including: particulate (TSP, PM10, PM2.5), ozone, lead, sulfur dioxide, nitrogen dioxide, and carbon monoxide are regulated via ambient air quality standards. Ambient air quality standards are set at the national (NAAQS) and state (MAAQS) level.</p>
<p><strong>NAAQS</strong></p>
<p>The Clean Air Act, which was last amended in 1990, requires EPA to set National Ambient Air Quality Standards (40 CFR part 50) for pollutants considered harmful to public health and the environment. The Clean Air Act identifies two types of national ambient air quality standards. Primary standards provide public health protection, including protecting the health of “sensitive” populations such as asthmatics, children, and the elderly. Secondary standards provide public welfare protection, including protection against decreased visibility and damage to animals, crops, vegetation, and buildings.</p>
<ul>
<li>A summary of current NAAQS is available on EPA’s website:
<ul>
<li><a href="https://www.epa.gov/criteria-air-pollutants/naaqs-table" class="uri">https://www.epa.gov/criteria-air-pollutants/naaqs-table</a></li>
</ul></li>
<li>When calculating NAAQS design values, analysts must follow the procedures defined in the pollutant specific <a href="https://www.ecfr.gov/cgi-bin/text-idx?SID=c118ce8b63f65737a282c4281a59abf0&amp;mc=true&amp;node=pt40.2.50&amp;rgn=div5">appendices to 40 CFR 50</a>.</li>
<li>In August each year, EPA posts official design values here:</li>
<li><a href="https://www.epa.gov/air-trends/air-quality-design-values" class="uri">https://www.epa.gov/air-trends/air-quality-design-values</a></li>
</ul>
<p><br></p>
<p><strong>MAAQS</strong></p>
<p>Minnesota Ambient Air Quality Standards (MAAQS) are established in <a href="https://www.revisor.mn.gov/rules?id=7009&amp;keyword_type=all&amp;keyword=7009&amp;keyword_sg=rule&amp;redirect=0">Minnesota Administrative Rules 7009</a>.</p>
<p>In most cases, the MAAQS are the same as the NAAQS. The MAAQS also include standards for two pollutants that are not covered by the NAAQS: TSP and hydrogen sulfide. The MAAQS were last updated in January 2017.</p>
<p>When calculating MAAQS design values:</p>
<ul>
<li>If MAAQS = NAAQS, use methods described in appendices to 40 CFR 50.</li>
<li>If MAAQS = revoked NAAQS, use methods described in archived appendices to 40 CFR 50.</li>
<li>For MAAQS without a NAAQS, such as H2S, use the “Form of the standard” language to guide your calculations.</li>
</ul>
</div>
</div>
<div id="air-modeling" class="section level2">
<h2><span class="header-section-number">2.3</span> Air modeling</h2>
<div id="nata" class="section level3">
<h3><span class="header-section-number">2.3.1</span> NATA modeling</h3>
<p>The National Air Toxics Assessment is a nationwide air modeling effort to provide air concentrations and risks for all U.S. census tracts. These results may be pulled from a map project or data tables at this website: <a href="https://www.epa.gov/national-air-toxics-assessment" class="uri">https://www.epa.gov/national-air-toxics-assessment</a>.</p>
<p>After each inventory is completed the Minnesota statewide cumulative air pollution model is compared to these results.</p>
<p><br></p>
</div>
<div id="mnrisks" class="section level3">
<h3><span class="header-section-number">2.3.2</span> MNRISKS statewide risk modeling</h3>
<p>MNRISKS is the statewide cumulative air pollution model that is produced by MPCA every three years with the air toxics emissions inventory publication. The model itself produces point estimates for air concentrations and potential human health risks for hundreds of air pollutants across Minnesota. The model also incorporates a date and transport component that produces multi-pathway risk results. Census block group averaged results are available on the MPCA webpage in the following location: <a href="https://www.pca.state.mn.us/air/air-modeling-and-human-health" class="uri">https://www.pca.state.mn.us/air/air-modeling-and-human-health</a>.</p>
<p><br></p>
</div>
<div id="downscale" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Downscaler modeling results for Ozone and PM2.5</h3>
<p>Downscaled data (<em>a blend of modeling and monitoring results</em>) are provided by the CDC in cooperation with the EPA for the pollutants ozone and PM-2.5. Daily predicitons are available for each Census tract throughout the country for the years 2001 to 2013.</p>
<ul>
<li>CDC information about this platform is available online at <a href="https://ephtracking.cdc.gov/showAirData.action" class="uri">https://ephtracking.cdc.gov/showAirData.action</a></li>
<li>Data from this platform can be downloaded from the EPA at <a href="https://www.epa.gov/air-research/downscaler-model-predicting-daily-air-pollution" class="uri">https://www.epa.gov/air-research/downscaler-model-predicting-daily-air-pollution</a>.</li>
<li>Downloaded data filtered to Minnesota results is available internally in the data folder: <code>X:\Programs\Air_Quality_Programs\Air Monitoring Data and Risks\6 Air Data\EPA Downscaler Modeling</code>.</li>
</ul>
</div>
<div id="cmaq" class="section level3">
<h3><span class="header-section-number">2.3.4</span> CMAQ Ozone modeling</h3>
<p>The Community Multiscale Air Quality Modeling System (CMAQ) is defined by EPA as:</p>
<blockquote>
<p>CMAQ <em>(see-mak)</em>: an active open-source development project of the EPA that consists of a suite of programs for conducting air quality model simulations. CMAQ combines current knowledge in atmospheric science and air quality modeling, and an open-source framework to deliver fast, technically sound estimates of ozone, particulates, air toxics and acids deposition.</p>
</blockquote>
<p>The information and data from this platform can be found at the following website <a href="https://www.epa.gov/cmaq" class="uri">https://www.epa.gov/cmaq</a>.</p>
<p><br></p>
</div>
</div>
<div id="context" class="section level2">
<h2><span class="header-section-number">2.4</span> Context</h2>
<div id="mn-ei" class="section level3">
<h3><span class="header-section-number">2.4.1</span> MN Emissions Inventory</h3>
<p>Every year all facilities (stationary point sources) report criteria pollutant emissions and every three years facilities report air toxics emissions. The EPA and the state of Minnesota emissions inventory team also calculate and report emissions for all other types of emissions sources such as mobile, non-road mobile, and area sources. These non-point emissions are reported every three years with the air toxics emissions. The Minnesota emission inventory is the foundation of MNRISKS. These emissions levels are reported in several data tools on the MPCA website. Their data and the visualization tools can be found on the following website <a href="https://www.pca.state.mn.us/air/emissions-data" class="uri">https://www.pca.state.mn.us/air/emissions-data</a>.</p>
<p><br></p>
</div>
<div id="nei" class="section level3">
<h3><span class="header-section-number">2.4.2</span> EPA’s NEI</h3>
<p>The National Emissions Inventory (NEI) provides air toxics and criteria and air toxic pollutant emissions for the entire U.S. on the same schedule as described in the Minnesota Emissions Inventory section. This information can be found at the following website <a href="https://www.epa.gov/air-emissions-inventories/national-emissions-inventory-nei" class="uri">https://www.epa.gov/air-emissions-inventories/national-emissions-inventory-nei</a>.</p>
</div>
<div id="fac-coords" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Facility locations</h3>
<p>The most recent compilation of facility coordinates was performed for the 2017 emission inventory. This data is available in the <code>INV_SOURCES</code> table found in the <em>RAPIDS</em> schema within MPCA’s <em>DELTA</em> database.</p>
<p>Use the following code to load the current facility coordinates.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This script connects to the MPCA database DELTA. </span>
<span class="co"># A dplyr query collects source coordinates from the RAPIDS schema.</span>
                                                                          
<span class="co"># Load packages</span>
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(RODBC)
<span class="kw">library</span>(readr)</code></pre></div>
<p>You can view available database connections in R using the function <code>odbcDataSources()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odbcDataSources</span>()</code></pre></div>
<pre><code>##                                              Excel Files 
## &quot;Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)&quot; 
##                                       MS Access Database 
##               &quot;Microsoft Access Driver (*.mdb, *.accdb)&quot; 
##                                              dBASE Files 
##    &quot;Microsoft Access dBASE Driver (*.dbf, *.ndx, *.mdx)&quot; 
##                                       LakesXMLDataSource 
##                                &quot;CR ODBC XML Driver 4.20&quot; 
##                                                   LIMS32 
##                              &quot;Microsoft ODBC for Oracle&quot; 
##                                                    delta 
##                           &quot;Oracle in OraClient11g_home2&quot; 
##                                                   delta2 
##                              &quot;Microsoft ODBC for Oracle&quot; 
##                                                   rapids 
##                           &quot;Oracle in OraClient11g_home2&quot; 
##                                            PostgreSQL35W 
##                                &quot;PostgreSQL Unicode(x64)&quot; 
##                                                  weather 
##                             &quot;MySQL ODBC 5.3 ANSI Driver&quot; 
##                                                   deltaw 
##                           &quot;Oracle in OraClient11g_home2&quot; 
##                                                   mnrisk 
##                           &quot;Firebird/InterBase(r) driver&quot;</code></pre>
<p><br></p>
<p>To connect to <code>deltaw</code>, use the function <code>odbcConnect()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load credentials</span>
credentials &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;X:/Agency_Files/Outcomes/Risk_Eval_Air_Mod/_Air_Risk_Evaluation/R/R_Camp/Student Folder/credentials.csv&quot;</span>)

user      &lt;-<span class="st"> </span>credentials<span class="op">$</span>delta_user
password  &lt;-<span class="st"> </span>credentials<span class="op">$</span>delta_pwd

<span class="co"># Alternatively, use your own</span>
<span class="co">#user      &lt;- &quot;ta*******&quot;</span>
<span class="co">#password  &lt;- &quot;da**_*******&quot;</span>
  
<span class="co"># Connect to DELTA</span>
deltaw &lt;-<span class="st"> </span><span class="kw">odbcConnect</span>(<span class="st">&quot;deltaw&quot;</span>, 
                      <span class="dt">uid =</span> user, 
                      <span class="dt">pwd =</span> password,
                      <span class="dt">believeNRows =</span> <span class="ot">FALSE</span>)


<span class="co"># Show all tables in RAPIDS schema</span>
rapids_tbls &lt;-<span class="st"> </span><span class="kw">sqlTables</span>(deltaw, <span class="dt">tableType =</span> <span class="st">&quot;TABLE&quot;</span>, <span class="dt">schema =</span> <span class="st">&quot;RAPIDS&quot;</span>)  

<span class="kw">head</span>(rapids_tbls)</code></pre></div>
<pre><code>##   TABLE_CAT TABLE_SCHEM         TABLE_NAME TABLE_TYPE REMARKS
## 1      &lt;NA&gt;      RAPIDS     GEO_ACTIVITIES      TABLE    &lt;NA&gt;
## 2      &lt;NA&gt;      RAPIDS       GEO_COUNTIES      TABLE    &lt;NA&gt;
## 3      &lt;NA&gt;      RAPIDS        GEO_NATIONS      TABLE    &lt;NA&gt;
## 4      &lt;NA&gt;      RAPIDS        GEO_REGIONS      TABLE    &lt;NA&gt;
## 5      &lt;NA&gt;      RAPIDS GEO_REGION_MEMBERS      TABLE    &lt;NA&gt;
## 6      &lt;NA&gt;      RAPIDS         GEO_STATES      TABLE    &lt;NA&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get inventory year codes</span>
inv_codes  &lt;-<span class="st"> </span><span class="kw">sqlQuery</span>(deltaw, <span class="st">&quot;SELECT * FROM RAPIDS.INV_INVENTORIES&quot;</span>, <span class="dt">max =</span> <span class="dv">100</span>, <span class="dt">stringsAsFactors =</span> F)

<span class="co"># Get code for 2017</span>
inv_id  &lt;-<span class="st"> </span><span class="kw">filter</span>(inv_codes, INVENTORY_YEAR <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>)<span class="op">$</span>RID

<span class="co"># Get sources for inventory year</span>
sources   &lt;-<span class="st"> </span><span class="kw">sqlQuery</span>(deltaw, <span class="kw">paste0</span>(<span class="st">&quot;SELECT * FROM RAPIDS.INV_SOURCES WHERE INVENTORY_RID = &quot;</span>, inv_id),
                        <span class="dt">max              =</span> <span class="dv">10000</span>, 
                        <span class="dt">stringsAsFactors =</span> F, 
                        <span class="dt">as.is            =</span> T)


<span class="co"># Get source coordinates</span>
src_coords   &lt;-<span class="st"> </span><span class="kw">sqlQuery</span>(deltaw, <span class="st">&quot;SELECT * FROM RAPIDS.INV_COORDINATES&quot;</span>,
                        <span class="dt">max              =</span> <span class="dv">100000</span>, 
                        <span class="dt">stringsAsFactors =</span> F, 
                        <span class="dt">as.is            =</span> T)


<span class="co"># Join coordinates to sources</span>
sources &lt;-<span class="st"> </span><span class="kw">left_join</span>(sources, src_coords, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;RID&quot;</span> =<span class="st"> &quot;ENTITY_RID&quot;</span>))


<span class="co"># View data </span>
sources <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(SOURCE_ID, SOURCE_TYPE, SOURCE_NAME, LONGITUDE, LATITUDE) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</code></pre></div>
<pre><code>## Observations: 2,189
## Variables: 5
## $ SOURCE_ID   &lt;chr&gt; &quot;2705300965&quot;, &quot;2704100003&quot;, &quot;2712300491&quot;, &quot;2716300...
## $ SOURCE_TYPE &lt;chr&gt; &quot;POINT&quot;, &quot;POINT&quot;, &quot;POINT&quot;, &quot;POINT&quot;, &quot;POINT&quot;, &quot;POIN...
## $ SOURCE_NAME &lt;chr&gt; &quot;133rd Airlift Wing - Minnesota Air National Guard...
## $ LONGITUDE   &lt;chr&gt; &quot;-93.20204163&quot;, &quot;-95.37827467&quot;, &quot;-93.07428353&quot;, &quot;-...
## $ LATITUDE    &lt;chr&gt; &quot;44.89044571&quot;, &quot;45.86819022&quot;, &quot;44.94358342&quot;, &quot;44.7...</code></pre>
</div>
</div>
<div id="wx-obs" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Weather observations</h3>
<p>Historical meteorological observations are available from multiple sources. These data may come in a raw unprocessd format or be pre-cleaned and quality controlled for machine errors.</p>
<ol style="list-style-type: decimal">
<li><p>An internal Tableau workbook provides <strong>raw</strong> results for Minnesota meteorological stations: <a href="tableau.pca.state.mn.us/#/workbooks/5714" class="uri">tableau.pca.state.mn.us/#/workbooks/5714</a>.</p></li>
<li><p>The AQI forecast uses a web API provided by <a href="https://darksky.net/dev"><em>DarkSky</em></a> for current forecast information and quality assurred historical observations.</p></li>
</ol>
</div>
<div id="hysplit" class="section level3">
<h3><span class="header-section-number">2.4.5</span> HYSPLIT wind trajectories</h3>
<p>Wind trajectories are useful for determining the primary sources contributing to elevated monitoring results. Trajectory results for the air monitoring netowork are available in WAIR for the years 2007 to 2017. The R package <a href="https://github.com/rich-iannone/SplitR">SplitR</a> was used to run the HYSPLIT model for each air monitor.</p>
<p>Use the following code to query WAIR for HYSPLIT results.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This script connects to the MPCA database WAIR.  </span>
<span class="co"># A dplyr query collects HYSPLIT modeling results for Anoka Airport.</span>
                                                                                

<span class="co"># Load packages</span>
<span class="kw">library</span>(dplyr)

<span class="co"># Open a connection to the database WAIR, schema hys ##</span>
my_wair &lt;-<span class="st"> </span><span class="kw">src_postgres</span>(<span class="dt">dbname =</span> <span class="st">&#39;wair&#39;</span>, <span class="dt">host =</span> <span class="st">&quot;eiger&quot;</span>, <span class="dt">user =</span> <span class="st">&quot;username&quot;</span>, <span class="dt">password =</span> <span class="st">&quot;password&quot;</span>)

<span class="co"># Show tables</span>
<span class="kw">src_tbls</span>(my_wair) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sort</span>()


<span class="co"># Connect to hys.backtrajectory table ##</span>
hys &lt;-<span class="st"> </span><span class="kw">tbl</span>(my_wair, <span class="st">&quot;hys.backtrajectory&quot;</span>)

hys &lt;-<span class="st"> </span><span class="kw">tbl</span>(my_wair, <span class="kw">sql</span>(<span class="st">&#39;hys.backtrajectory&#39;</span>))

<span class="co"># Collect data for Anoka Airport after year 2010 ##</span>
hys_mpls  &lt;-<span class="st"> </span>hys <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">               </span><span class="kw">select</span>(<span class="op">-</span>the_geom) <span class="op">%&gt;%</span>
<span class="st">               </span><span class="kw">filter</span>(site_catid <span class="op">==</span><span class="st"> &quot;27-003-1002&quot;</span>, yr <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">               </span><span class="kw">collect</span>(<span class="dt">n =</span> <span class="dv">2000</span>)

<span class="co"># View data </span>
<span class="kw">head</span>(hys_mpls)</code></pre></div>
</div>
</div>
<div id="landuse" class="section level3">
<h3><span class="header-section-number">2.4.6</span> Land use maps</h3>
<p>Land use shapefiles are maintained by MPCA GIS technical staff and stored on the agency R-drive at <code>R:\landuse_landcover</code>.</p>
</div>
<div id="census" class="section level3">
<h3><span class="header-section-number">2.4.7</span> United States Census boundaries</h3>
<p>Census boundaries can be loaded into R for mapping air data to Census tracts and block groups.</p>
<p>Use the following code to download and map MN boundaries.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This script downloads shapefiles of Minnesota </span>
## Counties
## Census tracts
## Census Block groups  

<span class="co"># Load packages</span>
<span class="kw">library</span>(tigris)

<span class="co"># Load boundaries</span>
county_bnds &lt;-<span class="st"> </span><span class="kw">counties</span>(<span class="dt">state =</span> <span class="st">&quot;MN&quot;</span>, <span class="dt">cb =</span> T)

tract_bnds  &lt;-<span class="st"> </span><span class="kw">tracts</span>(<span class="dt">state =</span> <span class="st">&quot;MN&quot;</span>, <span class="dt">cb =</span> T)

bg_bnds     &lt;-<span class="st"> </span><span class="kw">block_groups</span>(<span class="dt">state =</span> <span class="st">&quot;MN&quot;</span>, <span class="dt">cb =</span> T)

<span class="co"># Plot </span>
<span class="kw">plot</span>(county_bnds)</code></pre></div>
<p><img src="air-methods_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
</div>
<div id="acs" class="section level3">
<h3><span class="header-section-number">2.4.8</span> American Community Survey (ACS)</h3>
<p>The ACS provides updated demographic statistics used for population estimates and Environmental Justice indicators.</p>
<p>Use the following code to download Minnesota ACS results.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This script downloads American Community Survey (ACS) results for MN</span>

<span class="co"># Load packages</span>
<span class="kw">library</span>(tidycensus)

<span class="co"># ACS data requires a Census key</span>
<span class="co"># Visit: http://api.census.gov/data/key_signup.html</span>
<span class="kw">census_api_key</span>(<span class="st">&quot;Your_API_key&quot;</span>)

<span class="co"># View all ACS variables</span>
acs_variables &lt;-<span class="st"> </span><span class="kw">load_variables</span>(<span class="dv">2015</span>, <span class="st">&quot;acs5&quot;</span>, <span class="dt">cache =</span> <span class="ot">TRUE</span>)


<span class="co"># Download 5-yr population estimates for 2015</span>
pops_<span class="dv">2015</span> &lt;-<span class="st"> </span><span class="kw">get_acs</span>(<span class="dt">geography =</span> <span class="st">&quot;tract&quot;</span>, 
                     <span class="dt">state     =</span> <span class="st">&quot;MN&quot;</span>, 
                     <span class="dt">variables =</span> <span class="st">&quot;B01003_001&quot;</span>, 
                     <span class="dt">survey    =</span> <span class="st">&quot;acs5&quot;</span>, 
                     <span class="dt">year      =</span> <span class="dv">2015</span>)


<span class="co"># Download decennial population estimates for 2010</span>
pops_<span class="dv">2010</span> &lt;-<span class="st"> </span><span class="kw">get_decennial</span>(<span class="dt">geography =</span> <span class="st">&quot;tract&quot;</span>, 
                           <span class="dt">state     =</span> <span class="st">&quot;MN&quot;</span>, 
                           <span class="dt">variables =</span> <span class="st">&quot;P0080001&quot;</span>, 
                           <span class="dt">year      =</span> <span class="dv">2010</span>)


<span class="co"># Download household median income for 2015</span>
med_inc_<span class="dv">2015</span> &lt;-<span class="st"> </span><span class="kw">get_acs</span>(<span class="dt">geography =</span> <span class="st">&quot;tract&quot;</span>, 
                        <span class="dt">state     =</span> <span class="st">&quot;MN&quot;</span>, 
                        <span class="dt">variables =</span> <span class="st">&quot;B19013_001&quot;</span>, 
                        <span class="dt">survey    =</span> <span class="st">&quot;acs5&quot;</span>, 
                        <span class="dt">year      =</span> <span class="dv">2015</span>)</code></pre></div>
</div>
<p><br> <a href="getting-data.html#rqamd">Back to top</a></p>

</div>
</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="best-practices.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="quality-assurance-methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/01-get_data.Rmd",
"text": "Edit"
},
"download": ["air-methods.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
