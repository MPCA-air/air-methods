<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> Maps | air-methods.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content=" Maps | air-methods.utf8" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" Maps | air-methods.utf8" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="time-series.html"/>
<link rel="next" href="mpca-data-tools.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a><ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>1.1</b> Welcome to the Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#keep-r-updated"><i class="fa fa-check"></i><b>1.2</b> Keep R updated</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#script-organization"><i class="fa fa-check"></i><b>1.3</b> Script organization</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.4</b> Divide and conquer</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#codebooks-metadata-and-data-dictionaries"><i class="fa fa-check"></i><b>1.5</b> Codebooks, metadata, and data dictionaries</a></li>
<li class="chapter" data-level="1.6" data-path="best-practices.html"><a href="best-practices.html#data-formatting"><i class="fa fa-check"></i><b>1.6</b> Data formatting</a></li>
<li class="chapter" data-level="1.7" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.7</b> Pollutant names</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>2</b> Get data</a><ul>
<li class="chapter" data-level="2.1" data-path="get-data.html"><a href="get-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a><ul>
<li class="chapter" data-level="2.1.1" data-path="get-data.html"><a href="get-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="get-data.html"><a href="get-data.html#rqamd"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="2.1.3" data-path="get-data.html"><a href="get-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.3</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.4" data-path="get-data.html"><a href="get-data.html#wairsites"><i class="fa fa-check"></i><b>2.1.4</b> WAIR Site information table</a></li>
<li class="chapter" data-level="2.1.5" data-path="get-data.html"><a href="get-data.html#monitors"><i class="fa fa-check"></i><b>2.1.5</b> AirNow:Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.6" data-path="get-data.html"><a href="get-data.html#EPAsites"><i class="fa fa-check"></i><b>2.1.6</b> EPA Google Earth Site Maps</a></li>
<li class="chapter" data-level="2.1.7" data-path="get-data.html"><a href="get-data.html#lims"><i class="fa fa-check"></i><b>2.1.7</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.8" data-path="get-data.html"><a href="get-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.8</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.9" data-path="get-data.html"><a href="get-data.html#wair"><i class="fa fa-check"></i><b>2.1.9</b> Retrieving data from MPCA WAIR database</a></li>
<li class="chapter" data-level="2.1.10" data-path="get-data.html"><a href="get-data.html#toxics"><i class="fa fa-check"></i><b>2.1.10</b> Air toxics Data Explorer</a></li>
<li class="chapter" data-level="2.1.11" data-path="get-data.html"><a href="get-data.html#criteria"><i class="fa fa-check"></i><b>2.1.11</b> Criteria Pollutant Data Explorer</a></li>
<li class="chapter" data-level="2.1.12" data-path="get-data.html"><a href="get-data.html#AQI"><i class="fa fa-check"></i><b>2.1.12</b> Air Quality Index Summary Reports</a></li>
<li class="chapter" data-level="2.1.13" data-path="get-data.html"><a href="get-data.html#PAHs"><i class="fa fa-check"></i><b>2.1.13</b> Air Monitoring for PAHs</a></li>
<li class="chapter" data-level="2.1.14" data-path="get-data.html"><a href="get-data.html#tableau"><i class="fa fa-check"></i><b>2.1.14</b> Internal Data Explorers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="get-data.html"><a href="get-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a><ul>
<li class="chapter" data-level="2.2.1" data-path="get-data.html"><a href="get-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks (IHBs)</a></li>
<li class="chapter" data-level="2.2.2" data-path="get-data.html"><a href="get-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQS and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="get-data.html"><a href="get-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a><ul>
<li class="chapter" data-level="2.3.1" data-path="get-data.html"><a href="get-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="get-data.html"><a href="get-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="get-data.html"><a href="get-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="get-data.html"><a href="get-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="get-data.html"><a href="get-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a><ul>
<li class="chapter" data-level="2.4.1" data-path="get-data.html"><a href="get-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="get-data.html"><a href="get-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="get-data.html"><a href="get-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="get-data.html"><a href="get-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="get-data.html"><a href="get-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="get-data.html"><a href="get-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="get-data.html"><a href="get-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="get-data.html"><a href="get-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Qualified data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#dups"><i class="fa fa-check"></i><b>3.3</b> Duplicate observations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-validation.html"><a href="data-validation.html"><i class="fa fa-check"></i><b>4</b> Data validation</a><ul>
<li class="chapter" data-level="4.1" data-path="data-validation.html"><a href="data-validation.html#leaks"><i class="fa fa-check"></i><b>4.1</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="4.2" data-path="data-validation.html"><a href="data-validation.html#outs"><i class="fa fa-check"></i><b>4.2</b> Extreme values and outliers</a></li>
<li class="chapter" data-level="4.3" data-path="data-validation.html"><a href="data-validation.html#sticky2"><i class="fa fa-check"></i><b>4.3</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="4.4" data-path="data-validation.html"><a href="data-validation.html#unique"><i class="fa fa-check"></i><b>4.4</b> Unique detected values</a></li>
<li class="chapter" data-level="4.5" data-path="data-validation.html"><a href="data-validation.html#valid_ref"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>5</b> Collocated monitors</a><ul>
<li class="chapter" data-level="5.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>5.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="5.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>5.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>6</b> Detection limits</a><ul>
<li class="chapter" data-level="6.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i><b>6.1</b> Method Detection Limit</a></li>
<li class="chapter" data-level="6.2" data-path="detection-limits.html"><a href="detection-limits.html#calculating-mdls"><i class="fa fa-check"></i><b>6.2</b> Calculating MDLs</a></li>
<li class="chapter" data-level="6.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-mpca-detection-limits"><i class="fa fa-check"></i><b>6.3</b> Finding MPCA detection limits</a></li>
<li class="chapter" data-level="6.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>6.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="6.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values"><i class="fa fa-check"></i><b>6.5</b> Estimating below detection values</a></li>
<li class="chapter" data-level="6.6" data-path="detection-limits.html"><a href="detection-limits.html#recommended-steps"><i class="fa fa-check"></i><b>6.6</b> Recommended Steps</a></li>
<li class="chapter" data-level="6.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>6.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="6.8" data-path="detection-limits.html"><a href="detection-limits.html#reporting-limits"><i class="fa fa-check"></i><b>6.8</b> Reporting limits</a></li>
<li class="chapter" data-level="6.9" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>6.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>7</b> Completeness checks</a><ul>
<li class="chapter" data-level="7.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>7.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="8" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>8</b> Summary statistics</a><ul>
<li class="chapter" data-level="8.1" data-path="summary-statistics.html"><a href="summary-statistics.html#normal"><i class="fa fa-check"></i><b>8.1</b> Test for normality</a></li>
<li class="chapter" data-level="8.2" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>8.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="8.3" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>8.3</b> Below the detection limit</a></li>
<li class="chapter" data-level="8.4" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>8.4</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="8.5" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>8.5</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="8.6" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>8.6</b> Comparison of data to inhalation health benchmarks</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>9</b> Site comparisons</a><ul>
<li class="chapter" data-level="9.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>9.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="9.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-differences"><i class="fa fa-check"></i><b>9.2</b> Tools to visualize differences</a><ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i>Beeswarm Plots</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i>Correlation matrices</a></li>
</ul></li>
<li><a href="site-comparisons.html#references-1"><em>References</em></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>10</b> From start to finish</a><ul>
<li class="chapter" data-level="10.1" data-path="start-finish.html"><a href="start-finish.html#using-functions"><i class="fa fa-check"></i><b>10.1</b> Using functions</a></li>
<li class="chapter" data-level="10.2" data-path="start-finish.html"><a href="start-finish.html#a-simpler-analysis"><i class="fa fa-check"></i><b>10.2</b> A simpler analysis</a></li>
</ul></li>
<li><a href="visuals.html#visuals"><strong>Visuals</strong></a></li>
<li class="chapter" data-level="11" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>11</b> Charts</a><ul>
<li class="chapter" data-level="11.1" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>11.1</b> Calendar plots</a></li>
<li class="chapter" data-level="11.2" data-path="charts.html"><a href="charts.html#colors-and-themes"><i class="fa fa-check"></i><b>11.2</b> Colors and themes</a></li>
<li class="chapter" data-level="11.3" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>11.3</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>12</b> Time series</a><ul>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#hour-of-the-day"><i class="fa fa-check"></i>Hour of the day</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#day-of-the-week"><i class="fa fa-check"></i>Day of the week</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>13</b> Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#interactive-map-of-air-monitors"><i class="fa fa-check"></i>Interactive map of air monitors</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r"><i class="fa fa-check"></i>Creating shapefiles in R</a></li>
</ul></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>14</b> Air toxics explorer</a><ul>
<li class="chapter" data-level="14.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>14.1</b> Data Cleaning</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#null-results"><i class="fa fa-check"></i>Null Results</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#duplicate-observations"><i class="fa fa-check"></i>Duplicate Observations</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>14.2</b> Data Validation</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i>Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-completeness"><i class="fa fa-check"></i>Data Completeness</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#below-the-detection-limit"><i class="fa fa-check"></i>Below the detection limit</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>14.3</b> Producing Annual Summaries</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-annual-means"><i class="fa fa-check"></i>Calculating annual means</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-upper-confidence-limits"><i class="fa fa-check"></i>Calculating upper confidence limits</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#comparing-sites"><i class="fa fa-check"></i><b>14.4</b> Comparing sites</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a></li>
<li class="chapter" data-level="16" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>16</b> AQI explorer</a></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a><ul>
<li><a href="edit-this-book.html#references-2"><em>References</em></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="maps" class="section level1">
<h1><span class="header-section-number"></span> Maps</h1>
<div id="htmlwidget-1a35bf7373001f31e0d4" style="width:672px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a35bf7373001f31e0d4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[49.9319,46.7834,44.1386,45.117199,42.751518,45.2066,44.9536,45.6453,43.4981,46.8183,47.6011,41.8829,42.930569,46.933601,46.949699,44.348604,43.1811],[-96.8631,-92.1027,-87.6161,-92.855003,-96.707208,-90.5969,-93.2581,-89.4125,-87.81,-92.0892,-103.2642,-93.6879,-87.932106,-96.854698,-103.514397,-96.807299,-87.9006],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[41.8829,49.9319],"lng":[-103.514397,-87.6161]}},"evals":[],"jsHooks":[]}</script>
<div id="interactive-map-of-air-monitors" class="section level2 unnumbered">
<h2>Interactive map of air monitors</h2>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<p><strong>Site map</strong></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="maps.html#cb96-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb96-2"><a href="maps.html#cb96-2"></a><span class="kw">library</span>(leaflet)</span>
<span id="cb96-3"><a href="maps.html#cb96-3"></a></span>
<span id="cb96-4"><a href="maps.html#cb96-4"></a><span class="co"># Load site coordinates</span></span>
<span id="cb96-5"><a href="maps.html#cb96-5"></a>sites &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/aqi-watch/master/data-raw/locations.csv&#39;</span>)</span>
<span id="cb96-6"><a href="maps.html#cb96-6"></a></span>
<span id="cb96-7"><a href="maps.html#cb96-7"></a><span class="co"># Map sites</span></span>
<span id="cb96-8"><a href="maps.html#cb96-8"></a><span class="kw">leaflet</span>(sites) <span class="op">%&gt;%</span></span>
<span id="cb96-9"><a href="maps.html#cb96-9"></a><span class="st">   </span><span class="kw">addMarkers</span>()</span></code></pre></div>
<p><strong>Add a basemap</strong></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="maps.html#cb97-1"></a><span class="co"># Add basemap</span></span>
<span id="cb97-2"><a href="maps.html#cb97-2"></a><span class="kw">leaflet</span>(sites) <span class="op">%&gt;%</span></span>
<span id="cb97-3"><a href="maps.html#cb97-3"></a><span class="st">  </span><span class="kw">addProviderTiles</span>(providers<span class="op">$</span>CartoDB.Positron) <span class="op">%&gt;%</span></span>
<span id="cb97-4"><a href="maps.html#cb97-4"></a><span class="st">  </span><span class="kw">addMarkers</span>()</span></code></pre></div>
<div id="htmlwidget-263483ceae3a5634270f" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-263483ceae3a5634270f">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[41.849433,42.743099,41.875,41.668098,41.910599,42.2806,43.123299,41.6992,41.8829,41.2853,41.6031,43.0203,44.471901,43.0178,41.658195,41.9767,43.7781,41.97677,44.89965,44.348604,42.751518,49.6639,45.400799,45.1425,47.9464,48.4128,44.53,43.3144,43.1008,43.46611,45.2378,43.6878,42.5047,44.4428,44.1386,44.7072,43.0611,43.1811,44.3069,43.3431,43.4981,43.665,45.2039,46.0481,42.58,46.2056,46.933601,47.2986,45.5639,46.8183,42.5014,44.9653,42.51831,46.6144,40.693298,44.5167,46.3944,48.641899,46.8511,45.2066,41.832199,47.320301,47.6011,47.1858,43.4356,41.467201,41.823101,41.529999,44.4572,49.9319,49.9489,49.8422,46.8253,41.512032,42.930569,43.81523,48.152822,44.789398,47.9721,47.878159,44.706123,46.713694,42.7783,40.970001,44.9594,43.557613,43.746944,44.761398,44.373786,44.7383,44.9536,45.0121,45.0083,45.2108,45.55,43.9947,46.949699,42.692131,46.743889,45.168,44.155636,44.087397,43.54792,47.5212,44.9507,43.0034,41.4014,45.296,48.3794,43.1289,41.419201,44.971539,47.940861,42.955002,45.6453,41.983334,41.401402,45.7956,45.117199,44.9006,41.9106,41.948669,43.435001,43.702202,43.075298,43.327202,45.125,45.6781,41.516399,41.9767,43.5375,44.981393,44.946341,46.77107,44.927318,47.38443,42.880212,42.5292,44.95208,42.0083,43.169399,46.766701,41.407799,43.0014,42.7139,44.052838,46.7053,42.93257,44.9556,42.850975,44.979,46.7834,41.849433],[-93.697616,-92.5131,-90.177498,-95.9431,-91.651901,-91.5269,-94.693298,-90.521896,-93.6879,-93.5839,-93.643303,-88.215,-93.013298,-87.9333,-91.503471,-91.6878,-91.225,-91.68766,-97.128802,-96.807299,-96.707208,-93.7211,-93.201103,-93.2139,-91.4953,-92.8292,-87.9089,-89.1089,-89.3572,-88.621109,-86.9936,-88.4219,-87.8111,-87.5061,-87.6161,-89.7697,-87.9125,-87.9006,-88.3956,-87.9208,-87.81,-87.7161,-90.6,-89.6536,-88.4992,-93.7589,-96.854698,-101.7669,-88.81,-92.0892,-92.315804,-93.2551,-89.06347,-90.6986,-92.006104,-87.9939,-94.1433,-102.402199,-95.8467,-90.5969,-95.928101,-102.526398,-103.2642,-101.4281,-89.6803,-90.688301,-90.211899,-90.587502,-95.835,-96.8631,-97.3964,-99.9189,-100.7681,-90.624016,-87.932106,-87.79194,-103.639583,-93.512497,-89.6908,-95.029172,-93.285803,-92.511722,-87.805,-95.044998,-93.0356,-103.483658,-101.941109,-91.413002,-100.287269,-93.2372,-93.2581,-93.2767,-93.277,-93.6686,-94.1333,-92.4497,-103.514397,-90.696373,-92.166946,-92.7651,-103.315765,-103.273777,-96.700768,-92.5393,-93.0985,-88.8283,-91.0684,-87.886,-89.29,-87.9708,-91.070801,-93.082984,-101.571583,-87.934097,-89.4125,-91.662781,-91.0681,-88.4006,-92.855003,-93.238297,-91.6519,-91.639543,-88.527802,-90.568298,-87.884399,-88.220299,-92.667198,-89.6322,-90.618896,-91.6875,-96.6819,-93.300703,-93.277353,-92.11732,-93.067534,-94.60166,-96.785339,-89.015,-93.24428,-91.6786,-93.202202,-92.133102,-91.0625,-88.8122,-87.7986,-91.642692,-92.5236,-87.93434,-93.1459,-96.747425,-93.2737,-92.1027,-93.697616],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.693298,49.9489],"lng":[-103.639583,-86.9936]}},"evals":[],"jsHooks":[]}</script>
<p><strong>Add pop-ups</strong></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="maps.html#cb98-1"></a><span class="co"># Add site name popup labels and dark basemap</span></span>
<span id="cb98-2"><a href="maps.html#cb98-2"></a><span class="kw">leaflet</span>(sites) <span class="op">%&gt;%</span></span>
<span id="cb98-3"><a href="maps.html#cb98-3"></a><span class="st">  </span><span class="kw">addProviderTiles</span>(providers<span class="op">$</span>CartoDB.DarkMatter) <span class="op">%&gt;%</span></span>
<span id="cb98-4"><a href="maps.html#cb98-4"></a><span class="st">  </span><span class="kw">addMarkers</span>(<span class="dt">popup =</span> <span class="op">~</span><span class="st">`</span><span class="dt">Site Name</span><span class="st">`</span>)</span></code></pre></div>
<div id="htmlwidget-6ae7924e00892761ea2a" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-6ae7924e00892761ea2a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.DarkMatter",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[41.849433,42.743099,41.875,41.668098,41.910599,42.2806,43.123299,41.6992,41.8829,41.2853,41.6031,43.0203,44.471901,43.0178,41.658195,41.9767,43.7781,41.97677,44.89965,44.348604,42.751518,49.6639,45.400799,45.1425,47.9464,48.4128,44.53,43.3144,43.1008,43.46611,45.2378,43.6878,42.5047,44.4428,44.1386,44.7072,43.0611,43.1811,44.3069,43.3431,43.4981,43.665,45.2039,46.0481,42.58,46.2056,46.933601,47.2986,45.5639,46.8183,42.5014,44.9653,42.51831,46.6144,40.693298,44.5167,46.3944,48.641899,46.8511,45.2066,41.832199,47.320301,47.6011,47.1858,43.4356,41.467201,41.823101,41.529999,44.4572,49.9319,49.9489,49.8422,46.8253,41.512032,42.930569,43.81523,48.152822,44.789398,47.9721,47.878159,44.706123,46.713694,42.7783,40.970001,44.9594,43.557613,43.746944,44.761398,44.373786,44.7383,44.9536,45.0121,45.0083,45.2108,45.55,43.9947,46.949699,42.692131,46.743889,45.168,44.155636,44.087397,43.54792,47.5212,44.9507,43.0034,41.4014,45.296,48.3794,43.1289,41.419201,44.971539,47.940861,42.955002,45.6453,41.983334,41.401402,45.7956,45.117199,44.9006,41.9106,41.948669,43.435001,43.702202,43.075298,43.327202,45.125,45.6781,41.516399,41.9767,43.5375,44.981393,44.946341,46.77107,44.927318,47.38443,42.880212,42.5292,44.95208,42.0083,43.169399,46.766701,41.407799,43.0014,42.7139,44.052838,46.7053,42.93257,44.9556,42.850975,44.979,46.7834,41.849433],[-93.697616,-92.5131,-90.177498,-95.9431,-91.651901,-91.5269,-94.693298,-90.521896,-93.6879,-93.5839,-93.643303,-88.215,-93.013298,-87.9333,-91.503471,-91.6878,-91.225,-91.68766,-97.128802,-96.807299,-96.707208,-93.7211,-93.201103,-93.2139,-91.4953,-92.8292,-87.9089,-89.1089,-89.3572,-88.621109,-86.9936,-88.4219,-87.8111,-87.5061,-87.6161,-89.7697,-87.9125,-87.9006,-88.3956,-87.9208,-87.81,-87.7161,-90.6,-89.6536,-88.4992,-93.7589,-96.854698,-101.7669,-88.81,-92.0892,-92.315804,-93.2551,-89.06347,-90.6986,-92.006104,-87.9939,-94.1433,-102.402199,-95.8467,-90.5969,-95.928101,-102.526398,-103.2642,-101.4281,-89.6803,-90.688301,-90.211899,-90.587502,-95.835,-96.8631,-97.3964,-99.9189,-100.7681,-90.624016,-87.932106,-87.79194,-103.639583,-93.512497,-89.6908,-95.029172,-93.285803,-92.511722,-87.805,-95.044998,-93.0356,-103.483658,-101.941109,-91.413002,-100.287269,-93.2372,-93.2581,-93.2767,-93.277,-93.6686,-94.1333,-92.4497,-103.514397,-90.696373,-92.166946,-92.7651,-103.315765,-103.273777,-96.700768,-92.5393,-93.0985,-88.8283,-91.0684,-87.886,-89.29,-87.9708,-91.070801,-93.082984,-101.571583,-87.934097,-89.4125,-91.662781,-91.0681,-88.4006,-92.855003,-93.238297,-91.6519,-91.639543,-88.527802,-90.568298,-87.884399,-88.220299,-92.667198,-89.6322,-90.618896,-91.6875,-96.6819,-93.300703,-93.277353,-92.11732,-93.067534,-94.60166,-96.785339,-89.015,-93.24428,-91.6786,-93.202202,-92.133102,-91.0625,-88.8122,-87.7986,-91.642692,-92.5236,-87.93434,-93.1459,-96.747425,-93.2737,-92.1027,-93.697616],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["SHELDAHL","Waverly, Airport","Clinton, Rainbow Park","Pisgah, Harrison County","KIRKWOOD","COGGON","Emmetsburg, ILCC","Scott County Park","SLATER","Lake Ahquabi","CARPENTER","WAUKESHA - CLEVELAND AVE","Stanton","MILWAUKEE 16TH ST","Iowa City, Hoover School","PUBLIC HEALTH","LACROSSE DOT","PUBLIC HEALTH 4","Watertown","Research Farm","UC1","Experimental Lakes","East Bethel","Blaine","Ely","Voyageurs NP","GREEN BAY UW","COLUMBUS","MADISON EAST","Horicon Wildlife Area","NEWPORT","FOND DU LAC","CHIWAUKEE","KEWAUNEE","MANITOWOC","LAKE DUBAY","MILWAUKEE SER DNR","BAYSIDE","APPLETON AAL","GRAFTON","HARRINGTON BCH","SHEBOYGAN","PERKINSTOWN","TROUT LAKE","LAKE GENEVA","Mille Lacs","Fargo NW","Beulah North","POTAWATOMI","Duluth-WDSE","Waterloo, Water Tower","Minneapolis-Near Road","Beloit-Converse","BAD RIVER TRIBAL SCHOOL - ODANAH","Lake Sugema","GREEN BAY E HIGH","Brainerd","Lostwood NWR","Detroit Lakes","Perkinstown","Pisgah, Forestry Office","Dunn Center","TRNP-NU","Hannover","Devils Lake","Buffalo","Clinton, Chancy Park","Davenport, 10th & Vine","Marshall","Winnipeg_Scotia","Winnipeg_Ellens","Brandon","Bismarck Residential","Davenport, Hayes School","Milwaukee College Ave","Sheboygan-Haven","Williston","Shakopee","Grand Portage","Red Lake Nation","Lakeville-Near Road","Fond du Lac","Racine-Payne and Dolan","Viking Lake State Park","St. Paul-Harding H.S.","WIND CAVE","Badlands","Eau Claire","Pierre","Apple Valley","Minneapolis-Phillips","Minneapolis-Lowry Av","Minneapolis-Pacific St","St. Michael","St. Cloud","Rochester","Theodore Roosevelt NP - Painted Canyon VC","Potosi","West Duluth","Marine on St. Croix","Black Hawk","Credit Union","Sioux Falls","Virginia","St. Paul - Downtown","Jefferson-Laatsch","Muscatine, High School East Campus","Kenosha-Water Tower","Thunder Bay","MILW HAVENWOODS","Muscatine, Greenwood","St. Paul Payne - Phalen","RYDER","MILWAUKEE I-94 (FAA)","RHINELANDER","SCOTTISH RITE","Muscatine, Garfield School","POPPLE RVR","Stillwater-Wash. County Garage","Minneapolis-Wenonah School","KIRKWOOD2","TAIT CUMMINS","MAYVILLE","WILDCAT MTN","MILWAUKEE UW-N","SLINGER","Somerset","HARSHAW","Davenport, Black Hawk","PUBLIC HEALTH 3","HILLTOP","Minneapolis-Harrison","Minneapolis-Lyndale","Duluth-Michigan St","St. Paul - Westside","Leech Lake Nation: Cass Lake","UC3","BELOIT","Minneapolis - Greenway","ARMY RESERVE","M. City-FDMSPM10","Duluth Lincoln Park","Muscatine, Musser Park","JEFFERSON","RACINE","Winona","Fond du Lac","MILWAUKEE COLLEGE AVE.-NR","St. Paul-University Ave","UC2","Minneapolis-Downtown","Duluth-Downtown","SHELDAHL"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.693298,49.9489],"lng":[-103.639583,-86.9936]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="creating-shapefiles-in-r" class="section level2 unnumbered">
<h2>Creating shapefiles in R</h2>
<p>The code below shows how to create a shapefile from air monitoring locations. This map is then joined to the Environmental Justice status for Census tracts.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="maps.html#cb99-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb99-2"><a href="maps.html#cb99-2"></a><span class="kw">library</span>(stringr)</span>
<span id="cb99-3"><a href="maps.html#cb99-3"></a><span class="kw">library</span>(RcppRoll)</span>
<span id="cb99-4"><a href="maps.html#cb99-4"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb99-5"><a href="maps.html#cb99-5"></a><span class="kw">library</span>(car)</span>
<span id="cb99-6"><a href="maps.html#cb99-6"></a><span class="kw">library</span>(DT)</span>
<span id="cb99-7"><a href="maps.html#cb99-7"></a></span>
<span id="cb99-8"><a href="maps.html#cb99-8"></a>data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/air-methods/master/airtoxics_data_2009_2013.csv&#39;</span>)</span>
<span id="cb99-9"><a href="maps.html#cb99-9"></a></span>
<span id="cb99-10"><a href="maps.html#cb99-10"></a><span class="kw">colnames</span>(data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aqs_id&quot;</span>, <span class="st">&quot;poc&quot;</span>, <span class="st">&quot;param_code&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="st">&quot;conc&quot;</span>, <span class="st">&quot;null_code&quot;</span>, <span class="st">&quot;md_limit&quot;</span>, <span class="st">&quot;pollutant&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;cas&quot;</span>)</span>
<span id="cb99-11"><a href="maps.html#cb99-11"></a></span>
<span id="cb99-12"><a href="maps.html#cb99-12"></a>dt_options &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">scrollX =</span> T, <span class="dt">autoWidth =</span> T, <span class="dt">searching =</span> F, <span class="dt">ordering=</span>F, <span class="dt">lengthChange =</span> F, <span class="dt">paginate=</span>F, <span class="dt">info=</span>F)</span>
<span id="cb99-13"><a href="maps.html#cb99-13"></a></span>
<span id="cb99-14"><a href="maps.html#cb99-14"></a></span>
<span id="cb99-15"><a href="maps.html#cb99-15"></a><span class="co">########################################################################</span></span>
<span id="cb99-16"><a href="maps.html#cb99-16"></a><span class="co">## Spatial join to census tracts and then left_join to EJ areas        #</span></span>
<span id="cb99-17"><a href="maps.html#cb99-17"></a><span class="co">########################################################################</span></span>
<span id="cb99-18"><a href="maps.html#cb99-18"></a>coords &lt;-<span class="st"> </span>monitoring_locations[, <span class="kw">c</span>(<span class="st">&quot;Longitude&quot;</span>, <span class="st">&quot;Latitude&quot;</span>)]</span>
<span id="cb99-19"><a href="maps.html#cb99-19"></a></span>
<span id="cb99-20"><a href="maps.html#cb99-20"></a>point_source_wypoints &lt;-<span class="st"> </span><span class="kw">SpatialPointsDataFrame</span>(coords, </span>
<span id="cb99-21"><a href="maps.html#cb99-21"></a>                                                <span class="dt">data =</span> data, </span>
<span id="cb99-22"><a href="maps.html#cb99-22"></a>                                                <span class="dt">proj4string =</span> <span class="kw">CRS</span>(<span class="st">&#39;+proj=longlat +ellps=WGS84&#39;</span>))</span>
<span id="cb99-23"><a href="maps.html#cb99-23"></a></span>
<span id="cb99-24"><a href="maps.html#cb99-24"></a>point_source_wypoints &lt;-<span class="st"> </span><span class="kw">spTransform</span>(point_source_wypoints, </span>
<span id="cb99-25"><a href="maps.html#cb99-25"></a>                                     <span class="kw">CRS</span>(<span class="st">&#39;+proj=utm +zone=15 +datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0&#39;</span>))</span>
<span id="cb99-26"><a href="maps.html#cb99-26"></a></span>
<span id="cb99-27"><a href="maps.html#cb99-27"></a>census_tracts &lt;-<span class="st"> </span><span class="kw">readOGR</span>(<span class="dt">dsn   =</span> <span class="st">&quot;R:/demographics&quot;</span>, </span>
<span id="cb99-28"><a href="maps.html#cb99-28"></a>                         <span class="dt">layer =</span> <span class="st">&quot;census_2010_tracts_usboc&quot;</span>, </span>
<span id="cb99-29"><a href="maps.html#cb99-29"></a>                         <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb99-30"><a href="maps.html#cb99-30"></a></span>
<span id="cb99-31"><a href="maps.html#cb99-31"></a>point_sources_files_geo &lt;-<span class="st"> </span><span class="kw">point.in.poly</span>(point_source_wypoints, census_tracts)</span>
<span id="cb99-32"><a href="maps.html#cb99-32"></a></span>
<span id="cb99-33"><a href="maps.html#cb99-33"></a><span class="kw">writeOGR</span>(<span class="dt">obj    =</span> point_sources_files_geo, </span>
<span id="cb99-34"><a href="maps.html#cb99-34"></a>         <span class="dt">dsn    =</span> <span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/0 Methods and documentation/3. Analysis methods/Web book/air-methods&quot;</span>, </span>
<span id="cb99-35"><a href="maps.html#cb99-35"></a>         <span class="dt">layer  =</span> <span class="st">&quot;airmonitors_tracts&quot;</span>, </span>
<span id="cb99-36"><a href="maps.html#cb99-36"></a>         <span class="dt">driver =</span> <span class="st">&quot;ESRI Shapefile&quot;</span>)</span>
<span id="cb99-37"><a href="maps.html#cb99-37"></a></span>
<span id="cb99-38"><a href="maps.html#cb99-38"></a>point_sources_tracts_dbf &lt;-<span class="st"> </span><span class="kw">read.dbf</span>(<span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/0 Methods and documentation/3. Analysis methods/Web book/air-methods/airmonitors_tracts.dbf&quot;</span>, <span class="dt">as.is =</span> <span class="ot">TRUE</span>)</span>
<span id="cb99-39"><a href="maps.html#cb99-39"></a></span>
<span id="cb99-40"><a href="maps.html#cb99-40"></a>ej_layers &lt;-<span class="st"> </span><span class="kw">read.dbf</span>(<span class="st">&quot;X:/Agency_Files/EJ/GIS/Shapefiles/ACS_2014_5Yr_Tract_MNPovPPC.dbf&quot;</span>, <span class="dt">as.is =</span> <span class="ot">TRUE</span>)</span>
<span id="cb99-41"><a href="maps.html#cb99-41"></a></span>
<span id="cb99-42"><a href="maps.html#cb99-42"></a>ej_layers &lt;-<span class="st"> </span>ej_layers[, <span class="kw">c</span>(<span class="st">&quot;GEOID&quot;</span>, <span class="st">&quot;ov50per_nw&quot;</span>, <span class="st">&quot;prp_under1&quot;</span>)]</span>
<span id="cb99-43"><a href="maps.html#cb99-43"></a></span>
<span id="cb99-44"><a href="maps.html#cb99-44"></a>point_sources_tracts_ej &lt;-<span class="st"> </span><span class="kw">left_join</span>(point_sources_tracts_dbf, ej_layers, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;GEOID10&quot;</span>=<span class="st">&quot;GEOID&quot;</span>))</span>
<span id="cb99-45"><a href="maps.html#cb99-45"></a></span>
<span id="cb99-46"><a href="maps.html#cb99-46"></a><span class="kw">names</span>(point_sources_tracts_ej) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Facility_ID&quot;</span>,  <span class="st">&quot;Facility_Name&quot;</span>, <span class="st">&quot;Resident_Cancer_Risk&quot;</span>, <span class="st">&quot;Resident_Hazard_Quotient&quot;</span>, <span class="st">&quot;CAS&quot;</span>, <span class="st">&quot;Pollutant&quot;</span>,  <span class="st">&quot;Latitude&quot;</span>, <span class="st">&quot;Longitude&quot;</span>, <span class="st">&quot;Annual_PM25_Concentration&quot;</span>, <span class="st">&quot;STATEFP&quot;</span>, <span class="st">&quot;COUNTYF&quot;</span>, <span class="st">&quot;TRACTCE&quot;</span>, <span class="st">&quot;GEOID10&quot;</span>, <span class="st">&quot;NAME10&quot;</span>, <span class="st">&quot;NAMELSA&quot;</span>, <span class="st">&quot;MTFCC10&quot;</span>, <span class="st">&quot;FUNCSTA&quot;</span>, <span class="st">&quot;ALAND10&quot;</span>, <span class="st">&quot;AWATER1&quot;</span>, <span class="st">&quot;INTPTLA&quot;</span>, <span class="st">&quot;INTPTLO&quot;</span>, <span class="st">&quot;ov50per_nw&quot;</span>, <span class="st">&quot;prp_under1&quot;</span>)</span>
<span id="cb99-47"><a href="maps.html#cb99-47"></a></span>
<span id="cb99-48"><a href="maps.html#cb99-48"></a><span class="co">#Output file name (including path)</span></span>
<span id="cb99-49"><a href="maps.html#cb99-49"></a>point_sources_tracts_ej &lt;-<span class="st"> </span><span class="kw">unique</span>(point_sources_tracts_ej)</span></code></pre></div>
</div>
<p><br><a href="maps.html#maps">Back to top</a></p>

</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="time-series.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mpca-data-tools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/80-maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["air-methods.pdf", "air-methods.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
