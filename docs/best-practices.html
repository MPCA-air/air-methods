<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="get-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.3/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i>Best practices</a><ul>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#tidyverse"><i class="fa fa-check"></i>Tidyverse</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#keeping-r-up-to-date"><i class="fa fa-check"></i>Keeping R up-to-date</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#script-layout"><i class="fa fa-check"></i>Script layout</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i>Divide and conquer</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#codebooks-metadata-and-data-dictionaries"><i class="fa fa-check"></i>Codebooks, metadata, and data dictionaries</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i>Pollutant names</a></li>
<li class="chapter" data-level="" data-path="best-practices.html"><a href="best-practices.html#formatting-data"><i class="fa fa-check"></i>Formatting data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i>Get data</a><ul>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#air-monitoring"><i class="fa fa-check"></i>Air monitoring</a><ul>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#AQS"><i class="fa fa-check"></i>Retrieving data from AQS</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#rqamd"><i class="fa fa-check"></i>Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#aqi-now"><i class="fa fa-check"></i>Current AQI observations</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#monitors"><i class="fa fa-check"></i>Active air monitors</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#lims"><i class="fa fa-check"></i>Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#AirVision"><i class="fa fa-check"></i>Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#wair"><i class="fa fa-check"></i>Retrieving data from MPCA WAIR database</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#toxics"><i class="fa fa-check"></i>Air toxics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#health-and-standards"><i class="fa fa-check"></i>Health and standards</a><ul>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#IHBs"><i class="fa fa-check"></i>Inhalation health benchmarks (IHBs)</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#NAAQS"><i class="fa fa-check"></i>Air Quality Standards (NAAQS and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#air-modeling"><i class="fa fa-check"></i>Air modeling</a><ul>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#nata"><i class="fa fa-check"></i>NATA modeling</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#mnrisks"><i class="fa fa-check"></i>MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#downscale"><i class="fa fa-check"></i>Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#cmaq"><i class="fa fa-check"></i>CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#context"><i class="fa fa-check"></i>Context</a><ul>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#mn-ei"><i class="fa fa-check"></i>MN Emissions Inventory</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#nei"><i class="fa fa-check"></i>EPA’s NEI</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#fac-coords"><i class="fa fa-check"></i>Facility locations</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#wx-obs"><i class="fa fa-check"></i>Weather observations</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#hysplit"><i class="fa fa-check"></i>HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#landuse"><i class="fa fa-check"></i>Land use maps</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#census"><i class="fa fa-check"></i>United States Census boundaries</a></li>
<li class="chapter" data-level="" data-path="get-data.html"><a href="get-data.html#acs"><i class="fa fa-check"></i>American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i>Data cleaning</a><ul>
<li class="chapter" data-level="" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i>Blank, NULL, and missing values</a></li>
<li><a href="data-cleaning.html#quals">Remove <em>Qualified</em> data</a></li>
<li class="chapter" data-level="" data-path="data-cleaning.html"><a href="data-cleaning.html#dups"><i class="fa fa-check"></i>Duplicate observations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html"><i class="fa fa-check"></i>Data validation</a><ul>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html#leaks"><i class="fa fa-check"></i>Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html#outs"><i class="fa fa-check"></i>Exceptional values and outliers</a></li>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html#sticky2"><i class="fa fa-check"></i>Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html#unique"><i class="fa fa-check"></i>Unique detected values</a></li>
<li class="chapter" data-level="" data-path="data-validation.html"><a href="data-validation.html#valid_ref"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i>Collocated monitors</a><ul>
<li class="chapter" data-level="" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i>Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i>Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i>Detection limits</a><ul>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i>Method Detection Limit</a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#calculating-mdls"><i class="fa fa-check"></i>Calculating MDLs</a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#finding-mpca-detection-limits"><i class="fa fa-check"></i>Finding MPCA detection limits</a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i>Qualifier Codes for Detection Limits</a></li>
<li><a href="detection-limits.html#estimating-below-detection-values-what-not-to-do">Estimating below detection values <em>(what not to do)</em></a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#below-detection-values"><i class="fa fa-check"></i>Below detection values</a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i>Multiple detection limits</a></li>
<li class="chapter" data-level="" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i>Completeness checks</a><ul>
<li class="chapter" data-level="" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i>Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i>Summary statistics</a><ul>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#normal"><i class="fa fa-check"></i>Test for normality</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i>Bootstrapping</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i>Below the detection limit</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i>Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i>Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i>Comparison of data to inhalation health benchmarks</a></li>
<li class="chapter" data-level="" data-path="summary-statistics.html"><a href="summary-statistics.html#roll365"><i class="fa fa-check"></i>Rolling 365 day summaries</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i>Site comparisons</a><ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i>Confidence intervals</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-data"><i class="fa fa-check"></i>Tools to visualize data</a><ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i>Beeswarm Plots</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i>Correlation matrices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i>Start to finish</a><ul>
<li class="chapter" data-level="" data-path="start-finish.html"><a href="start-finish.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="start-finish.html"><a href="start-finish.html#analysis-steps"><i class="fa fa-check"></i>Analysis steps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i>Charts</a><ul>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#boxplots"><i class="fa fa-check"></i>Boxplots</a><ul>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#log-boxplots"><i class="fa fa-check"></i>Log boxplots</a></li>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#outliers"><i class="fa fa-check"></i>Outliers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i>Calendar plots</a></li>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#colors-and-themes"><i class="fa fa-check"></i>Colors and themes</a></li>
<li class="chapter" data-level="" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i>Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i>Time series</a><ul>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i>Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r-and-joining-to-ej-areas"><i class="fa fa-check"></i>Creating shapefiles in R and joining to EJ areas</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#spatial-averaging-and-aggregation"><i class="fa fa-check"></i>Spatial averaging and aggregation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i>Additional resources</a></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i>AQI explorer</a></li>
<li class="chapter" data-level="" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i>Criteria pollutant explorer</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i>Air toxics explorer</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#mpca-air-toxics-methods"><i class="fa fa-check"></i>MPCA Air Toxics Methods</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i>Data Cleaning</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i>Data Validation</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i>Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i>Producing Annual Summaries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="best-practices" class="section level1">
<h1>Best practices</h1>
<div class="figure">
<img src="https://avatars3.githubusercontent.com/u/22032646?s=400&amp;v=4" align="right" style="margin-left: 20px; margin-right: 18px; margin-top: -24px;" width="240" />

</div>
<p><br></p>
<p>This section includes some <em>best practices</em> to promote consistent, efficient, and accurate data analysis with <code>R</code>.</p>
<p><br> <br></p>
<div id="tidyverse" class="section level2">
<h2>Tidyverse</h2>
<p>The <em>Tidyverse</em> consists of a group of R packages that work in harmony by sharing a common data format and syntax. Using packages within the <em>Tidyverse</em> for your analysis will make your scripts easier to read for others.</p>
<div class="figure">
<img src="images/tidy_packages.PNG" width="460" />

</div>
</div>
<div id="keeping-r-up-to-date" class="section level2">
<h2>Keeping R up-to-date</h2>
<p><strong>Get the <em>installr</em> package</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&#39;installr&#39;</span>) 
<span class="kw">library</span>(<span class="st">&#39;installr&#39;</span>)</code></pre></div>
<p><strong>Install the new R version</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">updateR</span>()</code></pre></div>
<ul>
<li>When a popup suggests closing RStudio and running the update from <em>RGUI</em>, click <strong>NO</strong>.</li>
<li>When asked whether to copy and update all of your packages. Click <strong>Yes</strong>. This will save you heaps of time and prevent future headaches.</li>
</ul>
<p>To learn more about <em>installr</em> see <a href="https://github.com/talgalili/installr/#readme" class="uri">https://github.com/talgalili/installr/#readme</a>.</p>
</div>
<div id="script-layout" class="section level2">
<h2>Script layout</h2>
<p>The following tips will help make your R scripts easier to read and easier for others to use your code in their own projects.</p>
<ul>
<li>Add a description to the top of your script.</li>
<li>Load all your packages in one block at the top of the script.</li>
<li>Assign important file paths and parameters near the top of the script.</li>
<li>Avoid changing working directories with <code>setwd()</code>.</li>
<li>Load usernames and passwords from a file such as <code>credentials.csv</code>.</li>
<li>Save files to a local working directory such as <code>&quot;~\results.csv&quot;</code>, rather than to a fixed location, such as <code>X:\EAO\Air Data\Project1\results.csv</code>.</li>
</ul>
<p>Here is an example script layout:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># name_of_script.R</span>

<span class="co"># Purpose: This script does amazing things.</span>
<span class="co"># Assumptions: The monitoring data for the sites is from different years, </span>
<span class="co">#              but we compare them anyways. </span>
<span class="co"># Warning! Don&#39;t use this script for Kryptonite. It will break everything.</span>

<span class="co"># Load packages</span>
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(readr)

<span class="co"># Set parameters</span>
year &lt;-<span class="st"> </span><span class="dv">2017</span>
data_file &lt;-<span class="st"> &quot;monitors 1 and 2.csv&quot;</span>


<span class="co"># Load data</span>
air_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(data_file)


<span class="co"># My functions</span>
calc_stat &lt;-<span class="st"> </span><span class="cf">function</span>(data) {
  
  new_stat &lt;-<span class="st"> </span><span class="kw">step1</span>(data) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">step2</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">step3</span>()
  
}

<span class="co"># My analysis</span>
results &lt;-<span class="st"> </span>air_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">stat =</span> <span class="kw">calc_stat</span>(concentration))


<span class="co"># Save results to local folder</span>
<span class="kw">write_csv</span>(results, <span class="st">&quot;results/summary_results.csv&quot;</span>)</code></pre></div>
</div>
<div id="divide-and-conquer" class="section level2">
<h2>Divide and conquer</h2>
<p>For complex analysis projects many small components are often better than one big super script. As much as possible, try to create small functions to perform each task within in your analysis. If it’s a function that you will use across multiple projects, it is often helpful to save the function to it’s own script. These functions will become reusable building blocks that both future you and others can apply to their own projects.</p>
<p>Using an R Markdown document is an additional way you can split your project into manageable steps. R Markdown makes it easier to include a short description of each step of your analysis. In fact, you are reading an R Markdown document now.</p>
<p>An example folder structure for a project is shown below:</p>
<p><code>New_Project\</code></p>
<blockquote>
<ul>
<li>data
<ul>
<li>monitors 1 and 2.csv</li>
</ul></li>
<li>R
<ul>
<li>load_data.R</li>
<li>calc_ucl95.R<br />
</li>
<li>lil_boot_function.R<br />
</li>
<li>summary_report.RMD<br />
</li>
</ul></li>
<li>results
<ul>
<li>summary_results.csv<br />
</li>
<li>summary_report.pdf</li>
</ul></li>
</ul>
</blockquote>
</div>
<div id="codebooks-metadata-and-data-dictionaries" class="section level2">
<h2>Codebooks, metadata, and data dictionaries</h2>
<p>A <strong>codebook</strong> provides essential technical details and references for the variables in a dataset. The codebook ensures someone unfamiliar with your data wll have the necessary information to complete their analysis and help them to estimate the uncertainty of their results. An R package named <code>dataMaid</code> is available to assist with creating documentation for your datasets.</p>
<p><strong>An example codebook generated with <em>dataMaid</em>.</strong></p>
<div class="figure">
<img src="images/tidy_packages.PNG" width="460" />

</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dataMaid)
<span class="kw">library</span>(readr)

data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/air-methods/master/airtoxics_data_2009_2013.csv&#39;</span>)

<span class="kw">names</span>(data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aqs_id&quot;</span>, <span class="st">&quot;poc&quot;</span>, <span class="st">&quot;param_code&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="st">&quot;conc&quot;</span>, <span class="st">&quot;null_code&quot;</span>, <span class="st">&quot;md_limit&quot;</span>, <span class="st">&quot;pollutant&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;cas&quot;</span>)

<span class="kw">attr</span>(data<span class="op">$</span>aqs_id, <span class="st">&quot;labels&quot;</span>) &lt;-<span class="st"> &quot;Monitor ID&quot;</span>
<span class="kw">attr</span>(data<span class="op">$</span>aqs_id, <span class="st">&quot;shortDescription&quot;</span>) &lt;-<span class="st"> &quot;EPA assigned monitor ID for the national Air Quality System (AQS).&quot;</span>

<span class="kw">makeCodebook</span>(data, <span class="dt">vol =</span> <span class="dv">1</span>, <span class="dt">reportTitle =</span> <span class="st">&quot;Codebook for air toxics monitoring data&quot;</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="pollutant-names" class="section level2">
<h2>Pollutant names</h2>
<p>Pollutants often go by different names depending on the context you’re in. To prevent confusion it helps to include a unique <code>CAS #</code> or parameter code in your analysis results and summary data. If you are working with monitoring data that is missing a unique identifier for each pollutant, an R package named <code>aircas</code> is available to help join CAS numbers to pollutant names.</p>
</div>
<div id="formatting-data" class="section level2">
<h2>Formatting data</h2>
<p>Performing similar analysis on multiple pollutants at multiple sites over multiple years becomes much easier when data is in a consitent format. MPCA prefers tidy data where each result has its own row in a table. More information on tidy data can be found here: <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="uri">https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html</a>. For monitoring data, each row should contain columns with the monitoring site ID (ASQ ID is best, but other unique identifiers for each site are okay) parameter code,</p>
<p><a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="uri">https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="get-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/001-best_practices.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
},
"includes": {
"after_body": "show_code.html"
}
});
});
</script>

</body>

</html>
