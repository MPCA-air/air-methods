<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> Criteria pollutant explorer | air-methods.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content=" Criteria pollutant explorer | air-methods.utf8" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" Criteria pollutant explorer | air-methods.utf8" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="air-toxics-explorer.html"/>
<link rel="next" href="aqi-explorer.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a>
<ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>1.1</b> Welcome to the Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#keep-r-updated"><i class="fa fa-check"></i><b>1.2</b> Keep R updated</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#script-organization"><i class="fa fa-check"></i><b>1.3</b> Script organization</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.4</b> Divide and conquer</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#codebooks-metadata-and-data-dictionaries"><i class="fa fa-check"></i><b>1.5</b> Codebooks, metadata, and data dictionaries</a></li>
<li class="chapter" data-level="1.6" data-path="best-practices.html"><a href="best-practices.html#data-formatting"><i class="fa fa-check"></i><b>1.6</b> Data formatting</a></li>
<li class="chapter" data-level="1.7" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.7</b> Pollutant names</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>2</b> Get data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="get-data.html"><a href="get-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="get-data.html"><a href="get-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="get-data.html"><a href="get-data.html#aqsAPI"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS API</a></li>
<li class="chapter" data-level="2.1.3" data-path="get-data.html"><a href="get-data.html#wair"><i class="fa fa-check"></i><b>2.1.3</b> Retrieving data from MPCA WAIR database</a></li>
<li class="chapter" data-level="2.1.4" data-path="get-data.html"><a href="get-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.4</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.5" data-path="get-data.html"><a href="get-data.html#lims"><i class="fa fa-check"></i><b>2.1.5</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.6" data-path="get-data.html"><a href="get-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.6</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.7" data-path="get-data.html"><a href="get-data.html#monitors"><i class="fa fa-check"></i><b>2.1.7</b> AirNow:Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.8" data-path="get-data.html"><a href="get-data.html#EPAsites"><i class="fa fa-check"></i><b>2.1.8</b> EPA Google Earth Site Maps</a></li>
<li class="chapter" data-level="2.1.9" data-path="get-data.html"><a href="get-data.html#wairsites"><i class="fa fa-check"></i><b>2.1.9</b> WAIR Site information table</a></li>
<li class="chapter" data-level="2.1.10" data-path="get-data.html"><a href="get-data.html#toxics"><i class="fa fa-check"></i><b>2.1.10</b> Air toxics Data Explorer</a></li>
<li class="chapter" data-level="2.1.11" data-path="get-data.html"><a href="get-data.html#criteria"><i class="fa fa-check"></i><b>2.1.11</b> Criteria Pollutant Data Explorer</a></li>
<li class="chapter" data-level="2.1.12" data-path="get-data.html"><a href="get-data.html#AQI"><i class="fa fa-check"></i><b>2.1.12</b> Air Quality Index Summary Reports</a></li>
<li class="chapter" data-level="2.1.13" data-path="get-data.html"><a href="get-data.html#PAHs"><i class="fa fa-check"></i><b>2.1.13</b> Air Monitoring for PAHs</a></li>
<li class="chapter" data-level="2.1.14" data-path="get-data.html"><a href="get-data.html#tableau"><i class="fa fa-check"></i><b>2.1.14</b> Internal Data Explorers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="get-data.html"><a href="get-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="get-data.html"><a href="get-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks (IHBs)</a></li>
<li class="chapter" data-level="2.2.2" data-path="get-data.html"><a href="get-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQS and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="get-data.html"><a href="get-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="get-data.html"><a href="get-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="get-data.html"><a href="get-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="get-data.html"><a href="get-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="get-data.html"><a href="get-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="get-data.html"><a href="get-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="get-data.html"><a href="get-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="get-data.html"><a href="get-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="get-data.html"><a href="get-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="get-data.html"><a href="get-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="get-data.html"><a href="get-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="get-data.html"><a href="get-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="get-data.html"><a href="get-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="get-data.html"><a href="get-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Qualified data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#dups"><i class="fa fa-check"></i><b>3.3</b> Duplicate observations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-validation.html"><a href="data-validation.html"><i class="fa fa-check"></i><b>4</b> Data validation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-validation.html"><a href="data-validation.html#leaks"><i class="fa fa-check"></i><b>4.1</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="4.2" data-path="data-validation.html"><a href="data-validation.html#outs"><i class="fa fa-check"></i><b>4.2</b> Extreme values and outliers</a></li>
<li class="chapter" data-level="4.3" data-path="data-validation.html"><a href="data-validation.html#sticky2"><i class="fa fa-check"></i><b>4.3</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="4.4" data-path="data-validation.html"><a href="data-validation.html#unique"><i class="fa fa-check"></i><b>4.4</b> Unique detected values</a></li>
<li class="chapter" data-level="4.5" data-path="data-validation.html"><a href="data-validation.html#valid_ref"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>5</b> Collocated monitors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>5.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="5.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>5.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>6</b> Detection limits</a>
<ul>
<li class="chapter" data-level="6.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i><b>6.1</b> Method Detection Limit</a></li>
<li class="chapter" data-level="6.2" data-path="detection-limits.html"><a href="detection-limits.html#calculating-mdls"><i class="fa fa-check"></i><b>6.2</b> Calculating MDLs</a></li>
<li class="chapter" data-level="6.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-mpca-detection-limits"><i class="fa fa-check"></i><b>6.3</b> Finding MPCA detection limits</a></li>
<li class="chapter" data-level="6.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>6.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="6.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values"><i class="fa fa-check"></i><b>6.5</b> Estimating below detection values</a></li>
<li class="chapter" data-level="6.6" data-path="detection-limits.html"><a href="detection-limits.html#recommended-steps"><i class="fa fa-check"></i><b>6.6</b> Recommended Steps</a></li>
<li class="chapter" data-level="6.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>6.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="6.8" data-path="detection-limits.html"><a href="detection-limits.html#reporting-limits"><i class="fa fa-check"></i><b>6.8</b> Reporting limits</a></li>
<li class="chapter" data-level="6.9" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>6.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>7</b> Completeness checks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>7.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="8" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>8</b> Summary statistics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="summary-statistics.html"><a href="summary-statistics.html#normal"><i class="fa fa-check"></i><b>8.1</b> Test for normality</a></li>
<li class="chapter" data-level="8.2" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>8.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="8.3" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>8.3</b> Below the detection limit</a></li>
<li class="chapter" data-level="8.4" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>8.4</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="8.5" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>8.5</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="8.6" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>8.6</b> Comparison of data to inhalation health benchmarks</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>9</b> Site comparisons</a>
<ul>
<li class="chapter" data-level="9.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>9.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="9.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-differences"><i class="fa fa-check"></i><b>9.2</b> Tools to visualize differences</a>
<ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i>Beeswarm Plots</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i>Correlation matrices</a></li>
</ul></li>
<li><a href="site-comparisons.html#references-1"><em>References</em></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>10</b> From start to finish</a>
<ul>
<li class="chapter" data-level="10.1" data-path="start-finish.html"><a href="start-finish.html#using-functions"><i class="fa fa-check"></i><b>10.1</b> Using functions</a></li>
<li class="chapter" data-level="10.2" data-path="start-finish.html"><a href="start-finish.html#a-simpler-analysis"><i class="fa fa-check"></i><b>10.2</b> A simpler analysis</a></li>
</ul></li>
<li><a href="visuals.html#visuals"><strong>Visuals</strong></a></li>
<li class="chapter" data-level="11" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>11</b> Charts</a>
<ul>
<li class="chapter" data-level="11.1" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>11.1</b> Calendar plots</a></li>
<li class="chapter" data-level="11.2" data-path="charts.html"><a href="charts.html#colors-and-themes"><i class="fa fa-check"></i><b>11.2</b> Colors and themes</a></li>
<li class="chapter" data-level="11.3" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>11.3</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>12</b> Time series</a>
<ul>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#hour-of-the-day"><i class="fa fa-check"></i>Hour of the day</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#day-of-the-week"><i class="fa fa-check"></i>Day of the week</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>13</b> Maps</a>
<ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#interactive-map-of-air-monitors"><i class="fa fa-check"></i>Interactive map of air monitors</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r"><i class="fa fa-check"></i>Creating shapefiles in R</a></li>
</ul></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>14</b> Air toxics explorer</a>
<ul>
<li class="chapter" data-level="14.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>14.1</b> Data Cleaning</a>
<ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#null-results"><i class="fa fa-check"></i>Null Results</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#duplicate-observations"><i class="fa fa-check"></i>Duplicate Observations</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>14.2</b> Data Validation</a>
<ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i>Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-completeness"><i class="fa fa-check"></i>Data Completeness</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#below-the-detection-limit"><i class="fa fa-check"></i>Below the detection limit</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>14.3</b> Producing Annual Summaries</a>
<ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-annual-means"><i class="fa fa-check"></i>Calculating annual means</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-upper-confidence-limits"><i class="fa fa-check"></i>Calculating upper confidence limits</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#comparing-sites"><i class="fa fa-check"></i><b>14.4</b> Comparing sites</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a>
<ul>
<li class="chapter" data-level="15.1" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html#documentation"><i class="fa fa-check"></i><b>15.1</b> Documentation</a></li>
<li class="chapter" data-level="15.2" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html#data-sources"><i class="fa fa-check"></i><b>15.2</b> Data Sources</a></li>
<li class="chapter" data-level="15.3" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html#r-scripts"><i class="fa fa-check"></i><b>15.3</b> R scripts</a></li>
<li class="chapter" data-level="15.4" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html#tableau-1"><i class="fa fa-check"></i><b>15.4</b> Tableau</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>16</b> AQI explorer</a></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a>
<ul>
<li><a href="edit-this-book.html#references-2"><em>References</em></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="criteria-pollutant-explorer" class="section level1" number="15">
<h1><span class="header-section-number"></span> Criteria pollutant explorer</h1>
<p>This section describes the methods used to summarize the data shown in MPCA’s Criteria pollutant explorer.</p>
<div id="documentation" class="section level2" number="15.1">
<h2><span class="header-section-number">15.1</span> Documentation</h2>
<p>Methods for calculating NAAQS design values are explained in <a href="https://www.ecfr.gov/cgi-bin/text-idx?SID=c118ce8b63f65737a282c4281a59abf0&amp;mc=true&amp;node=pt40.2.50&amp;rgn=div5">40 CFR Part 50</a>. All design values are calculated exactly as written.</p>
</div>
<div id="data-sources" class="section level2" number="15.2">
<h2><span class="header-section-number">15.2</span> Data Sources</h2>
<p>Data for all NAAQS Criteria pollutants except lead are in <a href="http://rainier.pca.state.mn.us/documentation/DataDictionary/wair/index.html">WAIR</a>. Lead data can be accessed via the AQS API. TSP data are currently in StarLIMS. Design Values for PM2.5 and ozone are calculated automatically in WAIR and are in the aqs.vm_pm25_design_value and aqs.vm_ozone_design_value schemas respectively.</p>
<p><br> <strong><code>R</code> script for pulling lead data from AQS API</strong></p>
<p>Click the button below for code.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="criteria-pollutant-explorer.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-2"><a href="criteria-pollutant-explorer.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="criteria-pollutant-explorer.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="criteria-pollutant-explorer.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-5"><a href="criteria-pollutant-explorer.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-6"><a href="criteria-pollutant-explorer.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-7"><a href="criteria-pollutant-explorer.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb1-8"><a href="criteria-pollutant-explorer.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="criteria-pollutant-explorer.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Pull data for last year</span></span>
<span id="cb1-10"><a href="criteria-pollutant-explorer.html#cb1-10" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">year</span>(<span class="fu">today</span>()) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb1-11"><a href="criteria-pollutant-explorer.html#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="criteria-pollutant-explorer.html#cb1-12" aria-hidden="true" tabindex="-1"></a>api_email <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span> <span class="co">#your email</span></span>
<span id="cb1-13"><a href="criteria-pollutant-explorer.html#cb1-13" aria-hidden="true" tabindex="-1"></a>api_key <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span> <span class="co">#your AQS API key, to create account see: https://aqs.epa.gov/aqsweb/documents/data_api.html#signup</span></span>
<span id="cb1-14"><a href="criteria-pollutant-explorer.html#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="criteria-pollutant-explorer.html#cb1-15" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/Air Data Analysis Supporting Information/Information Tables/AQS Raw Data format.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-16"><a href="criteria-pollutant-explorer.html#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Name)</span>
<span id="cb1-17"><a href="criteria-pollutant-explorer.html#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="criteria-pollutant-explorer.html#cb1-18" aria-hidden="true" tabindex="-1"></a>outcomes <span class="ot">&lt;-</span> <span class="fu">rawToChar</span>(<span class="fu">GET</span>(</span>
<span id="cb1-19"><a href="criteria-pollutant-explorer.html#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(</span>
<span id="cb1-20"><a href="criteria-pollutant-explorer.html#cb1-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;https://aqs.epa.gov/data/api/transactionsSample/byState?email={api_email}&amp;key={api_key}&amp;param=14129&amp;bdate={year}0101&amp;edate={year}1231&amp;state=27&quot;</span></span>
<span id="cb1-21"><a href="criteria-pollutant-explorer.html#cb1-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-22"><a href="criteria-pollutant-explorer.html#cb1-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-23"><a href="criteria-pollutant-explorer.html#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">encode =</span> <span class="st">&quot;json&quot;</span></span>
<span id="cb1-24"><a href="criteria-pollutant-explorer.html#cb1-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-25"><a href="criteria-pollutant-explorer.html#cb1-25" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">$</span>content)</span>
<span id="cb1-26"><a href="criteria-pollutant-explorer.html#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="criteria-pollutant-explorer.html#cb1-27" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(outcomes, <span class="sc">~</span> <span class="cf">if</span> (<span class="fu">str_detect</span>(.x, <span class="st">&#39;</span><span class="sc">\\</span><span class="st">&quot;status</span><span class="sc">\\</span><span class="st">&quot;: </span><span class="sc">\\</span><span class="st">&quot;Success</span><span class="sc">\\</span><span class="st">&quot;&#39;</span>))</span>
<span id="cb1-28"><a href="criteria-pollutant-explorer.html#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>(.x)<span class="sc">$</span>Data <span class="cf">else</span></span>
<span id="cb1-29"><a href="criteria-pollutant-explorer.html#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NULL</span></span>
<span id="cb1-30"><a href="criteria-pollutant-explorer.html#cb1-30" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb1-31"><a href="criteria-pollutant-explorer.html#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbindlist</span>(<span class="at">fill =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb1-32"><a href="criteria-pollutant-explorer.html#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setkey</span>()</span>
<span id="cb1-33"><a href="criteria-pollutant-explorer.html#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="criteria-pollutant-explorer.html#cb1-34" aria-hidden="true" tabindex="-1"></a>pb_data <span class="ot">&lt;-</span> <span class="fu">mutate</span>(raw_data, <span class="at">TT =</span> <span class="st">&quot;RD&quot;</span>, <span class="at">AC =</span> <span class="st">&quot;I&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-35"><a href="criteria-pollutant-explorer.html#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TT, AC, state_code<span class="sc">:</span>uncertainty) <span class="sc">%&gt;%</span></span>
<span id="cb1-36"><a href="criteria-pollutant-explorer.html#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(col_names)</span>
<span id="cb1-37"><a href="criteria-pollutant-explorer.html#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="criteria-pollutant-explorer.html#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="fu">fwrite</span>(pb_data, <span class="fu">glue</span>(<span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/6 Air Data/Monitoring Data/Ambient Air Monitoring Data - Test/MPCA Statewide Results/Criteria Pollutants/Lead/Raw Data/Lead Results MN {year}.txt&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;|&quot;</span>)</span></code></pre></div>
</div>
<p><br> <strong><code>R</code> script for pulling TSP data from Tableau</strong></p>
<p>Click the button below for code.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="criteria-pollutant-explorer.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="criteria-pollutant-explorer.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb2-3"><a href="criteria-pollutant-explorer.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb2-4"><a href="criteria-pollutant-explorer.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RODBC)</span>
<span id="cb2-5"><a href="criteria-pollutant-explorer.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb2-6"><a href="criteria-pollutant-explorer.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="criteria-pollutant-explorer.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb2-8"><a href="criteria-pollutant-explorer.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="criteria-pollutant-explorer.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Years of data you want to pull</span></span>
<span id="cb2-10"><a href="criteria-pollutant-explorer.html#cb2-10" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb2-11"><a href="criteria-pollutant-explorer.html#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="criteria-pollutant-explorer.html#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Use the name of your LIMS connection (check odbc data sources)</span></span>
<span id="cb2-13"><a href="criteria-pollutant-explorer.html#cb2-13" aria-hidden="true" tabindex="-1"></a>lims_cnx <span class="ot">&lt;-</span> <span class="fu">odbcConnect</span>(<span class="st">&quot;LIMS32_2&quot;</span>, <span class="at">uid =</span> <span class="st">&quot;kgavin&quot;</span>, <span class="at">pwd =</span> <span class="st">&quot;tableau_12&quot;</span>)  <span class="co">#Connect to LIMS</span></span>
<span id="cb2-14"><a href="criteria-pollutant-explorer.html#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="criteria-pollutant-explorer.html#cb2-15" aria-hidden="true" tabindex="-1"></a>colnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Transaction Type&quot;</span>, <span class="st">&quot;Action Indicator&quot;</span>, <span class="st">&quot;State Code / Tribal Indicator&quot;</span>,</span>
<span id="cb2-16"><a href="criteria-pollutant-explorer.html#cb2-16" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;County Code / Tribal Code&quot;</span>, <span class="st">&quot;Site Number&quot;</span>, <span class="st">&quot;Parameter&quot;</span>, <span class="st">&quot;POC&quot;</span>,  <span class="st">&quot;Duration Code&quot;</span>,</span>
<span id="cb2-17"><a href="criteria-pollutant-explorer.html#cb2-17" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Reported Unit&quot;</span>, <span class="st">&quot;Method Code&quot;</span>, <span class="st">&quot;Sample Date&quot;</span>,  <span class="st">&quot;Sample Begin Time&quot;</span>,</span>
<span id="cb2-18"><a href="criteria-pollutant-explorer.html#cb2-18" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Reported Sample Value&quot;</span>, <span class="st">&quot;Null Data Code&quot;</span>,  <span class="st">&quot;Collection Frequency Code&quot;</span>,</span>
<span id="cb2-19"><a href="criteria-pollutant-explorer.html#cb2-19" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Monitor Protocol ID&quot;</span>, <span class="st">&quot;Qualifier Code - 1&quot;</span>,  <span class="st">&quot;Qualifier Code - 2&quot;</span>, <span class="st">&quot;Qualifier Code - 3&quot;</span>,</span>
<span id="cb2-20"><a href="criteria-pollutant-explorer.html#cb2-20" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Qualifier Code - 4&quot;</span>,  <span class="st">&quot;Qualifier Code - 5&quot;</span>, <span class="st">&quot;Qualifier Code - 6&quot;</span>, <span class="st">&quot;Qualifier Code - 7&quot;</span>,</span>
<span id="cb2-21"><a href="criteria-pollutant-explorer.html#cb2-21" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Qualifier Code - 8&quot;</span>, <span class="st">&quot;Qualifier Code - 9&quot;</span>, <span class="st">&quot;Qualifier Code - 10&quot;</span>,</span>
<span id="cb2-22"><a href="criteria-pollutant-explorer.html#cb2-22" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Alternate Method Detection Limit&quot;</span>, <span class="st">&quot;Uncertainty Value&quot;</span>)</span>
<span id="cb2-23"><a href="criteria-pollutant-explorer.html#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="criteria-pollutant-explorer.html#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> years){</span>
<span id="cb2-25"><a href="criteria-pollutant-explorer.html#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb2-26"><a href="criteria-pollutant-explorer.html#cb2-26" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">sqlQuery</span>(lims_cnx, <span class="fu">glue</span>(<span class="st">&quot;SELECT &#39;RD&#39;, &#39;I&#39;, STATECODE, COUNTYCODE, SITECODE, PARAMCODE, POC, SAMPDURATION, UNITCODE, METHODCODE,</span></span>
<span id="cb2-27"><a href="criteria-pollutant-explorer.html#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="st">                       TO_CHAR(RUNDATE, &#39;YYYYMMDD&#39;), TO_CHAR(RUNDATE, &#39;HH24:MI&#39;), VALUE, NULLDATACODE</span></span>
<span id="cb2-28"><a href="criteria-pollutant-explorer.html#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="st">                       FROM   LIMSSUPER.DAILYDATA        </span></span>
<span id="cb2-29"><a href="criteria-pollutant-explorer.html#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="st">                       WHERE  (RUNDATE&gt;={{ts &#39;{i}-01-01 00:00:00&#39;}} AND RUNDATE&lt;{{ts &#39;{i+1}-01-01 00:00:00&#39;}}</span></span>
<span id="cb2-30"><a href="criteria-pollutant-explorer.html#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="st">                       AND PARAMCODE = &#39;11101&#39;)  </span></span>
<span id="cb2-31"><a href="criteria-pollutant-explorer.html#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="st">                       ORDER BY PARAMCODE, SITEID, RUNDATE&quot;</span>),</span>
<span id="cb2-32"><a href="criteria-pollutant-explorer.html#cb2-32" aria-hidden="true" tabindex="-1"></a>                   <span class="at">as.is =</span> T, <span class="at">max =</span> <span class="dv">0</span></span>
<span id="cb2-33"><a href="criteria-pollutant-explorer.html#cb2-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-34"><a href="criteria-pollutant-explorer.html#cb2-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-35"><a href="criteria-pollutant-explorer.html#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nrow</span>(data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb2-36"><a href="criteria-pollutant-explorer.html#cb2-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-37"><a href="criteria-pollutant-explorer.html#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(j <span class="cf">in</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>)) data[[j]] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb2-38"><a href="criteria-pollutant-explorer.html#cb2-38" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">set_names</span>(data, colnames)</span>
<span id="cb2-39"><a href="criteria-pollutant-explorer.html#cb2-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-40"><a href="criteria-pollutant-explorer.html#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fwrite</span>(data,</span>
<span id="cb2-41"><a href="criteria-pollutant-explorer.html#cb2-41" aria-hidden="true" tabindex="-1"></a>           <span class="fu">glue</span>(<span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/6 Air Data/Monitoring Data/Ambient Air Monitoring Data - Test/MPCA Statewide Results/Criteria Pollutants/TSP/Raw Data/TSP Results MN {i}.txt&quot;</span>),</span>
<span id="cb2-42"><a href="criteria-pollutant-explorer.html#cb2-42" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;|&quot;</span>,</span>
<span id="cb2-43"><a href="criteria-pollutant-explorer.html#cb2-43" aria-hidden="true" tabindex="-1"></a>           <span class="at">col.names =</span> T)</span>
<span id="cb2-44"><a href="criteria-pollutant-explorer.html#cb2-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-45"><a href="criteria-pollutant-explorer.html#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(data)</span>
<span id="cb2-46"><a href="criteria-pollutant-explorer.html#cb2-46" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="r-scripts" class="section level2" number="15.3">
<h2><span class="header-section-number">15.3</span> R scripts</h2>
<p>Scripts for calculating NAAQS/MAAQS Design Values are in <a href="X:\Programs\Air_Quality_Programs\Air%20Monitoring%20Data%20and%20Risks\Air%20Data%20Analysis%20Supporting%20Information\Criteria%20Pollutant%20Design%20Value%20Calculations\R%20Files%20for%20DVs\Update%20DV%20Scripts">this folder</a>. The PM2.5 and ozone scripts are deprecated as their Design Values are calculated in WAIR.</p>
<p>Once design values have been calculated for all pollutants, use this R script to merge together in one file.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="criteria-pollutant-explorer.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">###Compile all calculted NAAQS DVs into 1 File</span></span>
<span id="cb3-2"><a href="criteria-pollutant-explorer.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">### Includes connection to site table and standards</span></span>
<span id="cb3-3"><a href="criteria-pollutant-explorer.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-4"><a href="criteria-pollutant-explorer.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgreSQL)</span>
<span id="cb3-5"><a href="criteria-pollutant-explorer.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb3-6"><a href="criteria-pollutant-explorer.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="criteria-pollutant-explorer.html#cb3-7" aria-hidden="true" tabindex="-1"></a>standards_file <span class="ot">=</span> <span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/Air Data Analysis Supporting Information/Information Tables/AQ Standards.csv&quot;</span></span>
<span id="cb3-8"><a href="criteria-pollutant-explorer.html#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="criteria-pollutant-explorer.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#CSV file with your WAIR &quot;username&quot; and &quot;password&quot;</span></span>
<span id="cb3-10"><a href="criteria-pollutant-explorer.html#cb3-10" aria-hidden="true" tabindex="-1"></a>WAIR_credentials_file <span class="ot">=</span> <span class="st">&quot;H:/WAIR credentials.csv&quot;</span></span>
<span id="cb3-11"><a href="criteria-pollutant-explorer.html#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="criteria-pollutant-explorer.html#cb3-12" aria-hidden="true" tabindex="-1"></a>WAIR_creds <span class="ot">=</span> <span class="fu">fread</span>(WAIR_credentials_file)</span>
<span id="cb3-13"><a href="criteria-pollutant-explorer.html#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="criteria-pollutant-explorer.html#cb3-14" aria-hidden="true" tabindex="-1"></a>drv <span class="ot">&lt;-</span> <span class="fu">dbDriver</span>(<span class="st">&quot;PostgreSQL&quot;</span>)</span>
<span id="cb3-15"><a href="criteria-pollutant-explorer.html#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="criteria-pollutant-explorer.html#cb3-16" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(drv, <span class="at">dbname =</span> <span class="st">&quot;wair&quot;</span>, <span class="at">host =</span> <span class="st">&#39;eiger&#39;</span>, <span class="at">user =</span> WAIR_creds<span class="sc">$</span>username, <span class="at">password =</span> WAIR_creds<span class="sc">$</span>password)</span>
<span id="cb3-17"><a href="criteria-pollutant-explorer.html#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="criteria-pollutant-explorer.html#cb3-18" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">=</span> <span class="fu">dbGetQuery</span>(con, <span class="at">statement =</span> <span class="fu">paste</span>(<span class="st">&quot;SELECT * FROM aqs.site</span></span>
<span id="cb3-19"><a href="criteria-pollutant-explorer.html#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="st">LEFT JOIN core.counties_contiguousus counties</span></span>
<span id="cb3-20"><a href="criteria-pollutant-explorer.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="st">ON aqs.site.stateid = counties.state_fips AND aqs.site.cntyid = counties.cnty_fips</span></span>
<span id="cb3-21"><a href="criteria-pollutant-explorer.html#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="st">                                          LEFT JOIN aqs.city_fips</span></span>
<span id="cb3-22"><a href="criteria-pollutant-explorer.html#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="st">ON aqs.site.stateid = aqs.city_fips.stateid AND aqs.site.cntyid = aqs.city_fips.cntyid AND</span></span>
<span id="cb3-23"><a href="criteria-pollutant-explorer.html#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="st">                                          aqs.site.cityid = aqs.city_fips.cityid&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">setDT</span>()</span>
<span id="cb3-24"><a href="criteria-pollutant-explorer.html#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="criteria-pollutant-explorer.html#cb3-25" aria-hidden="true" tabindex="-1"></a>monitor_types <span class="ot">=</span> <span class="fu">dbGetQuery</span>(con, <span class="at">statement =</span> <span class="st">&quot;SELECT * FROM aqs.monitor_type&quot;</span>)</span>
<span id="cb3-26"><a href="criteria-pollutant-explorer.html#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="criteria-pollutant-explorer.html#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="fu">setDT</span>(monitor_types)</span>
<span id="cb3-28"><a href="criteria-pollutant-explorer.html#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="criteria-pollutant-explorer.html#cb3-29" aria-hidden="true" tabindex="-1"></a>monitor_types <span class="ot">=</span> monitor_types[mon_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SLAMS&quot;</span>, <span class="st">&quot;TRIBAL&quot;</span>, <span class="st">&quot;NON-EPA FEDERAL&quot;</span>, <span class="st">&quot;EPA&quot;</span>)</span>
<span id="cb3-30"><a href="criteria-pollutant-explorer.html#cb3-30" aria-hidden="true" tabindex="-1"></a>                              ][, monitor_id <span class="sc">:</span><span class="er">=</span> <span class="fu">substr</span>(monitor_id, <span class="dv">1</span>, <span class="dv">11</span>)</span>
<span id="cb3-31"><a href="criteria-pollutant-explorer.html#cb3-31" aria-hidden="true" tabindex="-1"></a>                                ][, .SD[<span class="dv">1</span>, .(mon_type)], by <span class="ot">=</span> .(monitor_id)] <span class="sc">%&gt;%</span></span>
<span id="cb3-32"><a href="criteria-pollutant-explorer.html#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(monitor_id, <span class="fu">c</span>(<span class="st">&quot;stateid&quot;</span>, <span class="st">&quot;cntyid&quot;</span>, <span class="st">&quot;siteid&quot;</span>), <span class="at">convert =</span> T) <span class="sc">%&gt;%</span> <span class="fu">setDT</span>()</span>
<span id="cb3-33"><a href="criteria-pollutant-explorer.html#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="criteria-pollutant-explorer.html#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="criteria-pollutant-explorer.html#cb3-35" aria-hidden="true" tabindex="-1"></a>read_dvs <span class="ot">=</span> <span class="cf">function</span>() {</span>
<span id="cb3-36"><a href="criteria-pollutant-explorer.html#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(data.table)</span>
<span id="cb3-37"><a href="criteria-pollutant-explorer.html#cb3-37" aria-hidden="true" tabindex="-1"></a>  folder <span class="ot">=</span> <span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/3 Data Analysis Results/Criteria Pollutant Analysis/DV Indicator Files/DVs - Final&quot;</span></span>
<span id="cb3-38"><a href="criteria-pollutant-explorer.html#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(folder, <span class="at">pattern =</span> <span class="st">&quot;NAAQS Final DV&quot;</span>, <span class="at">full.names =</span> T) <span class="sc">%&gt;%</span> <span class="fu">lapply</span>(fread) <span class="sc">%&gt;%</span> <span class="fu">rbindlist</span>(<span class="at">fill =</span> T)</span>
<span id="cb3-39"><a href="criteria-pollutant-explorer.html#cb3-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-40"><a href="criteria-pollutant-explorer.html#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="criteria-pollutant-explorer.html#cb3-41" aria-hidden="true" tabindex="-1"></a>format_addresses <span class="ot">=</span> <span class="cf">function</span>(addresses) {</span>
<span id="cb3-42"><a href="criteria-pollutant-explorer.html#cb3-42" aria-hidden="true" tabindex="-1"></a>  street_numbers <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;0th&quot;</span>, <span class="st">&quot;1st&quot;</span>, <span class="st">&quot;2nd&quot;</span>, <span class="st">&quot;3rd&quot;</span>, <span class="st">&quot;4th&quot;</span>, <span class="st">&quot;5th&quot;</span>, <span class="st">&quot;6th&quot;</span>, <span class="st">&quot;7th&quot;</span>, <span class="st">&quot;8th&quot;</span>, <span class="st">&quot;9th&quot;</span>)</span>
<span id="cb3-43"><a href="criteria-pollutant-explorer.html#cb3-43" aria-hidden="true" tabindex="-1"></a>  addresses <span class="ot">=</span> <span class="fu">str_to_title</span>(addresses) <span class="sc">%&gt;%</span></span>
<span id="cb3-44"><a href="criteria-pollutant-explorer.html#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(street_numbers <span class="sc">%&gt;%</span> <span class="fu">str_to_title</span>() <span class="sc">%&gt;%</span> <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>), street_numbers)</span>
<span id="cb3-45"><a href="criteria-pollutant-explorer.html#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(addresses)</span>
<span id="cb3-46"><a href="criteria-pollutant-explorer.html#cb3-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-47"><a href="criteria-pollutant-explorer.html#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="criteria-pollutant-explorer.html#cb3-48" aria-hidden="true" tabindex="-1"></a>alldvs <span class="ot">=</span> <span class="fu">read_dvs</span>()</span>
<span id="cb3-49"><a href="criteria-pollutant-explorer.html#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="criteria-pollutant-explorer.html#cb3-50" aria-hidden="true" tabindex="-1"></a>alldvs <span class="ot">=</span> alldvs[Pollutant <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;PM10&quot;</span>), <span class="st">`</span><span class="at">:=</span><span class="st">`</span> (<span class="at">POC =</span> <span class="fu">str_sub</span>(AQSID, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb3-51"><a href="criteria-pollutant-explorer.html#cb3-51" aria-hidden="true" tabindex="-1"></a>       ][, <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(<span class="at">AQSID_POC =</span> AQSID, <span class="at">AQSID =</span> <span class="fu">str_sub</span>(AQSID, <span class="dv">1</span>, <span class="dv">11</span>), <span class="at">stdjoin =</span> <span class="fu">paste</span>(Pollutant, Indicator, <span class="at">sep=</span><span class="st">&quot;: &quot;</span>))] <span class="sc">%&gt;%</span></span>
<span id="cb3-52"><a href="criteria-pollutant-explorer.html#cb3-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(AQSID, <span class="fu">c</span>(<span class="st">&quot;stateid&quot;</span>, <span class="st">&quot;cntyid&quot;</span>, <span class="st">&quot;siteid&quot;</span>), <span class="at">remove =</span> F, <span class="at">convert =</span> T) <span class="sc">%&gt;%</span> <span class="fu">setDT</span>()</span>
<span id="cb3-53"><a href="criteria-pollutant-explorer.html#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="criteria-pollutant-explorer.html#cb3-54" aria-hidden="true" tabindex="-1"></a>alldvs[Indicator <span class="sc">==</span> <span class="st">&quot;Daily Background Concentration&quot;</span>, DV_Valid <span class="sc">:</span><span class="er">=</span> <span class="st">&quot;Yes&quot;</span>]</span>
<span id="cb3-55"><a href="criteria-pollutant-explorer.html#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="criteria-pollutant-explorer.html#cb3-56" aria-hidden="true" tabindex="-1"></a>standards<span class="ot">=</span><span class="fu">fread</span>(standards_file)</span>
<span id="cb3-57"><a href="criteria-pollutant-explorer.html#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="criteria-pollutant-explorer.html#cb3-58" aria-hidden="true" tabindex="-1"></a>alldvs <span class="ot">=</span> standards[monitor_types[sites[alldvs, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;stateid&quot;</span>, <span class="st">&quot;cntyid&quot;</span>, <span class="st">&quot;siteid&quot;</span>)], on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;stateid&quot;</span>, <span class="st">&quot;cntyid&quot;</span>, <span class="st">&quot;siteid&quot;</span>)], on <span class="ot">=</span> <span class="st">&quot;stdjoin&quot;</span>]</span>
<span id="cb3-59"><a href="criteria-pollutant-explorer.html#cb3-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-60"><a href="criteria-pollutant-explorer.html#cb3-60" aria-hidden="true" tabindex="-1"></a>alldvs <span class="ot">=</span> alldvs[<span class="sc">!</span><span class="fu">is.na</span>(site_name) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(mon_type), .(</span>
<span id="cb3-61"><a href="criteria-pollutant-explorer.html#cb3-61" aria-hidden="true" tabindex="-1"></a>  Pollutant,</span>
<span id="cb3-62"><a href="criteria-pollutant-explorer.html#cb3-62" aria-hidden="true" tabindex="-1"></a>  Indicator,</span>
<span id="cb3-63"><a href="criteria-pollutant-explorer.html#cb3-63" aria-hidden="true" tabindex="-1"></a>  PrimaryStandard,</span>
<span id="cb3-64"><a href="criteria-pollutant-explorer.html#cb3-64" aria-hidden="true" tabindex="-1"></a>  SecondaryStandard,</span>
<span id="cb3-65"><a href="criteria-pollutant-explorer.html#cb3-65" aria-hidden="true" tabindex="-1"></a>  <span class="at">Standards_Unit =</span> Units,</span>
<span id="cb3-66"><a href="criteria-pollutant-explorer.html#cb3-66" aria-hidden="true" tabindex="-1"></a>  YearPromulgated,</span>
<span id="cb3-67"><a href="criteria-pollutant-explorer.html#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="at">NAAQS =</span> <span class="fu">as.logical</span>(NAAQS),</span>
<span id="cb3-68"><a href="criteria-pollutant-explorer.html#cb3-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">MAAQS =</span> <span class="fu">as.logical</span>(MAAQS),</span>
<span id="cb3-69"><a href="criteria-pollutant-explorer.html#cb3-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">Active =</span> <span class="fu">as.logical</span>(Active),</span>
<span id="cb3-70"><a href="criteria-pollutant-explorer.html#cb3-70" aria-hidden="true" tabindex="-1"></a>  AQSID_POC,</span>
<span id="cb3-71"><a href="criteria-pollutant-explorer.html#cb3-71" aria-hidden="true" tabindex="-1"></a>  DVYear,</span>
<span id="cb3-72"><a href="criteria-pollutant-explorer.html#cb3-72" aria-hidden="true" tabindex="-1"></a>  DV,</span>
<span id="cb3-73"><a href="criteria-pollutant-explorer.html#cb3-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">FinalDV_Units =</span> Units,</span>
<span id="cb3-74"><a href="criteria-pollutant-explorer.html#cb3-74" aria-hidden="true" tabindex="-1"></a>  DV_Valid,</span>
<span id="cb3-75"><a href="criteria-pollutant-explorer.html#cb3-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">Address =</span> <span class="fu">format_addresses</span>(street_addr),</span>
<span id="cb3-76"><a href="criteria-pollutant-explorer.html#cb3-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cityname =</span> <span class="fu">lapply</span>(city_name, <span class="cf">function</span>(x) <span class="fu">str_split</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st"> </span><span class="sc">\\</span><span class="st">(RR&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>]),</span>
<span id="cb3-77"><a href="criteria-pollutant-explorer.html#cb3-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">County =</span> cnty_name,</span>
<span id="cb3-78"><a href="criteria-pollutant-explorer.html#cb3-78" aria-hidden="true" tabindex="-1"></a>  <span class="at">CountyFIPS =</span> fips,</span>
<span id="cb3-79"><a href="criteria-pollutant-explorer.html#cb3-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">Latitude =</span> lat,</span>
<span id="cb3-80"><a href="criteria-pollutant-explorer.html#cb3-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">Longitude =</span> lon,</span>
<span id="cb3-81"><a href="criteria-pollutant-explorer.html#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">Siteid =</span> siteid,</span>
<span id="cb3-82"><a href="criteria-pollutant-explorer.html#cb3-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sitename =</span> site_name,</span>
<span id="cb3-83"><a href="criteria-pollutant-explorer.html#cb3-83" aria-hidden="true" tabindex="-1"></a>  AveragingTime,</span>
<span id="cb3-84"><a href="criteria-pollutant-explorer.html#cb3-84" aria-hidden="true" tabindex="-1"></a>  ComplianceTest,</span>
<span id="cb3-85"><a href="criteria-pollutant-explorer.html#cb3-85" aria-hidden="true" tabindex="-1"></a>  StandardDescription,</span>
<span id="cb3-86"><a href="criteria-pollutant-explorer.html#cb3-86" aria-hidden="true" tabindex="-1"></a>  DataYears,</span>
<span id="cb3-87"><a href="criteria-pollutant-explorer.html#cb3-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">ChartName =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(city_name), <span class="fu">paste0</span>(site_name, <span class="st">&quot; (&quot;</span>, <span class="fu">str_sub</span>(AQSID_POC, <span class="dv">8</span>, <span class="dv">13</span>), <span class="st">&quot;)&quot;</span>),</span>
<span id="cb3-88"><a href="criteria-pollutant-explorer.html#cb3-88" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">paste0</span>(<span class="fu">lapply</span>(city_name, <span class="cf">function</span>(x) <span class="fu">str_split</span>(x, <span class="st">&quot;</span><span class="sc">\\</span><span class="st"> </span><span class="sc">\\</span><span class="st">(RR&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>]), <span class="st">&quot; (&quot;</span>, <span class="fu">str_sub</span>(AQSID_POC, <span class="dv">8</span>, <span class="dv">13</span>), <span class="st">&quot;)&quot;</span>) )</span>
<span id="cb3-89"><a href="criteria-pollutant-explorer.html#cb3-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-90"><a href="criteria-pollutant-explorer.html#cb3-90" aria-hidden="true" tabindex="-1"></a>)] </span>
<span id="cb3-91"><a href="criteria-pollutant-explorer.html#cb3-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-92"><a href="criteria-pollutant-explorer.html#cb3-92" aria-hidden="true" tabindex="-1"></a><span class="do">##Write files</span></span>
<span id="cb3-93"><a href="criteria-pollutant-explorer.html#cb3-93" aria-hidden="true" tabindex="-1"></a><span class="fu">fwrite</span>(alldvs,<span class="st">&quot;X:/Programs/Air_Quality_Programs/Air Monitoring Data and Risks/3 Data Analysis Results/Criteria Pollutant Analysis/DV Indicator Files/DVs - Final/NAAQS_DVs.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="tableau-1" class="section level2" number="15.4">
<h2><span class="header-section-number">15.4</span> Tableau</h2>
<p>The Criteria Data Explorer workbook is located <a href="X:\Programs\Air_Quality_Programs\Air%20Monitoring%20Data%20and%20Risks\5%20Web%20Apps\Criteria%20Pollutants%20Web%20Application\Criteria%20Tableau%20Workbook\Criteria%20Pollutant%20Design%20Values%202021.twb">here</a>. Refresh the extract and adjust date ranges then publish to the PCA Tableau server. Email the MPCA Data Desk to update the <a href="https://www.pca.state.mn.us/air/criteria-pollutant-data-explorer">workbook on the PCA website</a>.</p>

</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
  
            </section>

          </div>
        </div>
      </div>
<a href="air-toxics-explorer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="aqi-explorer.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/92-criteria_explorer.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["air-methods.pdf", "air-methods.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
