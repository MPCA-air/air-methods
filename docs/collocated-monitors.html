<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> Collocated monitors | air-methods.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content=" Collocated monitors | air-methods.utf8" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" Collocated monitors | air-methods.utf8" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-validation.html"/>
<link rel="next" href="detection-limits.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a><ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>1.1</b> Welcome to the Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#keep-r-updated"><i class="fa fa-check"></i><b>1.2</b> Keep R updated</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#script-organization"><i class="fa fa-check"></i><b>1.3</b> Script organization</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.4</b> Divide and conquer</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#codebooks-metadata-and-data-dictionaries"><i class="fa fa-check"></i><b>1.5</b> Codebooks, metadata, and data dictionaries</a></li>
<li class="chapter" data-level="1.6" data-path="best-practices.html"><a href="best-practices.html#data-formatting"><i class="fa fa-check"></i><b>1.6</b> Data formatting</a></li>
<li class="chapter" data-level="1.7" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.7</b> Pollutant names</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>2</b> Get data</a><ul>
<li class="chapter" data-level="2.1" data-path="get-data.html"><a href="get-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a><ul>
<li class="chapter" data-level="2.1.1" data-path="get-data.html"><a href="get-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="get-data.html"><a href="get-data.html#rqamd"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="2.1.3" data-path="get-data.html"><a href="get-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.3</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.4" data-path="get-data.html"><a href="get-data.html#wairsites"><i class="fa fa-check"></i><b>2.1.4</b> WAIR Site information table</a></li>
<li class="chapter" data-level="2.1.5" data-path="get-data.html"><a href="get-data.html#monitors"><i class="fa fa-check"></i><b>2.1.5</b> AirNow:Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.6" data-path="get-data.html"><a href="get-data.html#EPAsites"><i class="fa fa-check"></i><b>2.1.6</b> EPA Google Earth Site Maps</a></li>
<li class="chapter" data-level="2.1.7" data-path="get-data.html"><a href="get-data.html#lims"><i class="fa fa-check"></i><b>2.1.7</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.8" data-path="get-data.html"><a href="get-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.8</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.9" data-path="get-data.html"><a href="get-data.html#wair"><i class="fa fa-check"></i><b>2.1.9</b> Retrieving data from MPCA WAIR database</a></li>
<li class="chapter" data-level="2.1.10" data-path="get-data.html"><a href="get-data.html#toxics"><i class="fa fa-check"></i><b>2.1.10</b> Air toxics Data Explorer</a></li>
<li class="chapter" data-level="2.1.11" data-path="get-data.html"><a href="get-data.html#criteria"><i class="fa fa-check"></i><b>2.1.11</b> Criteria Pollutant Data Explorer</a></li>
<li class="chapter" data-level="2.1.12" data-path="get-data.html"><a href="get-data.html#AQI"><i class="fa fa-check"></i><b>2.1.12</b> Air Quality Index Summary Reports</a></li>
<li class="chapter" data-level="2.1.13" data-path="get-data.html"><a href="get-data.html#PAHs"><i class="fa fa-check"></i><b>2.1.13</b> Air Monitoring for PAHs</a></li>
<li class="chapter" data-level="2.1.14" data-path="get-data.html"><a href="get-data.html#tableau"><i class="fa fa-check"></i><b>2.1.14</b> Internal Data Explorers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="get-data.html"><a href="get-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a><ul>
<li class="chapter" data-level="2.2.1" data-path="get-data.html"><a href="get-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks (IHBs)</a></li>
<li class="chapter" data-level="2.2.2" data-path="get-data.html"><a href="get-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQS and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="get-data.html"><a href="get-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a><ul>
<li class="chapter" data-level="2.3.1" data-path="get-data.html"><a href="get-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="get-data.html"><a href="get-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="get-data.html"><a href="get-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="get-data.html"><a href="get-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="get-data.html"><a href="get-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a><ul>
<li class="chapter" data-level="2.4.1" data-path="get-data.html"><a href="get-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="get-data.html"><a href="get-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="get-data.html"><a href="get-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="get-data.html"><a href="get-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="get-data.html"><a href="get-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="get-data.html"><a href="get-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="get-data.html"><a href="get-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="get-data.html"><a href="get-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Qualified data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#dups"><i class="fa fa-check"></i><b>3.3</b> Duplicate observations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-validation.html"><a href="data-validation.html"><i class="fa fa-check"></i><b>4</b> Data validation</a><ul>
<li class="chapter" data-level="4.1" data-path="data-validation.html"><a href="data-validation.html#leaks"><i class="fa fa-check"></i><b>4.1</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="4.2" data-path="data-validation.html"><a href="data-validation.html#outs"><i class="fa fa-check"></i><b>4.2</b> Extreme values and outliers</a></li>
<li class="chapter" data-level="4.3" data-path="data-validation.html"><a href="data-validation.html#sticky2"><i class="fa fa-check"></i><b>4.3</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="4.4" data-path="data-validation.html"><a href="data-validation.html#unique"><i class="fa fa-check"></i><b>4.4</b> Unique detected values</a></li>
<li class="chapter" data-level="4.5" data-path="data-validation.html"><a href="data-validation.html#valid_ref"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>5</b> Collocated monitors</a><ul>
<li class="chapter" data-level="5.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>5.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="5.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>5.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>6</b> Detection limits</a><ul>
<li class="chapter" data-level="6.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i><b>6.1</b> Method Detection Limit</a></li>
<li class="chapter" data-level="6.2" data-path="detection-limits.html"><a href="detection-limits.html#calculating-mdls"><i class="fa fa-check"></i><b>6.2</b> Calculating MDLs</a></li>
<li class="chapter" data-level="6.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-mpca-detection-limits"><i class="fa fa-check"></i><b>6.3</b> Finding MPCA detection limits</a></li>
<li class="chapter" data-level="6.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>6.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="6.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values"><i class="fa fa-check"></i><b>6.5</b> Estimating below detection values</a></li>
<li class="chapter" data-level="6.6" data-path="detection-limits.html"><a href="detection-limits.html#recommended-steps"><i class="fa fa-check"></i><b>6.6</b> Recommended Steps</a></li>
<li class="chapter" data-level="6.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>6.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="6.8" data-path="detection-limits.html"><a href="detection-limits.html#reporting-limits"><i class="fa fa-check"></i><b>6.8</b> Reporting limits</a></li>
<li class="chapter" data-level="6.9" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>6.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>7</b> Completeness checks</a><ul>
<li class="chapter" data-level="7.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>7.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="8" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>8</b> Summary statistics</a><ul>
<li class="chapter" data-level="8.1" data-path="summary-statistics.html"><a href="summary-statistics.html#normal"><i class="fa fa-check"></i><b>8.1</b> Test for normality</a></li>
<li class="chapter" data-level="8.2" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>8.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="8.3" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>8.3</b> Below the detection limit</a></li>
<li class="chapter" data-level="8.4" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>8.4</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="8.5" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>8.5</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="8.6" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>8.6</b> Comparison of data to inhalation health benchmarks</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>9</b> Site comparisons</a><ul>
<li class="chapter" data-level="9.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>9.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="9.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-differences"><i class="fa fa-check"></i><b>9.2</b> Tools to visualize differences</a><ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i>Beeswarm Plots</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i>Correlation matrices</a></li>
</ul></li>
<li><a href="site-comparisons.html#references-1"><em>References</em></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>10</b> From start to finish</a><ul>
<li class="chapter" data-level="10.1" data-path="start-finish.html"><a href="start-finish.html#using-functions"><i class="fa fa-check"></i><b>10.1</b> Using functions</a></li>
<li class="chapter" data-level="10.2" data-path="start-finish.html"><a href="start-finish.html#a-simpler-analysis"><i class="fa fa-check"></i><b>10.2</b> A simpler analysis</a></li>
</ul></li>
<li><a href="visuals.html#visuals"><strong>Visuals</strong></a></li>
<li class="chapter" data-level="11" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>11</b> Charts</a><ul>
<li class="chapter" data-level="11.1" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>11.1</b> Calendar plots</a></li>
<li class="chapter" data-level="11.2" data-path="charts.html"><a href="charts.html#colors-and-themes"><i class="fa fa-check"></i><b>11.2</b> Colors and themes</a></li>
<li class="chapter" data-level="11.3" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>11.3</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>12</b> Time series</a><ul>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#hour-of-the-day"><i class="fa fa-check"></i>Hour of the day</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#day-of-the-week"><i class="fa fa-check"></i>Day of the week</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>13</b> Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#interactive-map-of-air-monitors"><i class="fa fa-check"></i>Interactive map of air monitors</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r"><i class="fa fa-check"></i>Creating shapefiles in R</a></li>
</ul></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>14</b> Air toxics explorer</a><ul>
<li class="chapter" data-level="14.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>14.1</b> Data Cleaning</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#null-results"><i class="fa fa-check"></i>Null Results</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#duplicate-observations"><i class="fa fa-check"></i>Duplicate Observations</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>14.2</b> Data Validation</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i>Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-completeness"><i class="fa fa-check"></i>Data Completeness</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#below-the-detection-limit"><i class="fa fa-check"></i>Below the detection limit</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>14.3</b> Producing Annual Summaries</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-annual-means"><i class="fa fa-check"></i>Calculating annual means</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-upper-confidence-limits"><i class="fa fa-check"></i>Calculating upper confidence limits</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#comparing-sites"><i class="fa fa-check"></i><b>14.4</b> Comparing sites</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a></li>
<li class="chapter" data-level="16" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>16</b> AQI explorer</a></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a><ul>
<li><a href="edit-this-book.html#references-2"><em>References</em></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="collocated-monitors" class="section level1">
<h1><span class="header-section-number"></span> Collocated monitors</h1>
<p><img src="https://imgs.xkcd.com/comics/box_plot.png" /></p>
<p><br></p>
<p>Analysis steps for collocated monitors include:</p>
<p><a href="collocated-monitors.html#evalpocs">5.1</a> <strong>Evaluate sites with collocated monitors</strong><br />
<a href="collocated-monitors.html#pripocs">5.2</a> <strong>Prioritize observations from collocated monitors</strong></p>
<p><br></p>
<div id="evalpocs" class="section level2">
<h2><span class="header-section-number">5.1</span> Evaluate collocated air monitors</h2>
<p><strong>Description</strong></p>
<p>Collocated samples are multiple samples taken for a pollutant from the same monitoring site at the same time, using two pieces of monitoring equipment. Collocated samples provide an extra layer of quality assurance by taking multiple measurements under very similar conditions which helps detect machine, lab, and human error. Depending on the results from collocated monitors, only one of the monitors, or potentially neither may be considered as valid measurements.</p>
<p><br> <strong>Why not keep all the data?</strong></p>
<p>Leaving observations for multiple POCs in the data set is likely to bias calculated summary statistics. For example, consider a site that starts with two monitors operating during the winter months, but after one malfunctions, the site is left with one monitor operating for the remainder of the year. If we were to calculate the annual average for this site, the mean would be biased by having twice as many observations during the winter months. By limiting the number of observations to 1 per day, we can remove the bias due to the extra winter observations.</p>
<p><br> <strong>Recommended steps</strong></p>
<p>Viewing a scatterplot of collocated measurements helps to see both obvious and subtle irregularities between collocated measurements. If there is evidence of bias in one of the monitors (values from one collocated monitor are usually higher than the other), or there is large variance between the collocated monitors (values differ from each other by significant margins), then both collocated monitors need to be investigated further.</p>
<p>EPA recommends that collocated monitors have no higher than a 15% coefficient of variation (CoV) between their measurements. Calculating the CoV for every measurement pair does not make sense as small differences (i.e. 0.001 and 0.002) have the same CoV as large differences (i.e. 10 and 20). Therefore, we choose to look at the median CoV for each site, pollutant, and year. We then flag collocated monitors if the median CoV is greater than 15%, which suggests the differences between the collocated monitors are systematic.</p>
<p>Since there is lower confidence in values below the MDL, we only calculate the CoV for collocated monitors on days that have valid measurements greater than or equal to the MDL. Lastly, we only compare the median CoV to the threshold of 15% if there are at least 10 calculated CoV values. You are much more likely to find differences between monitors when there are only a few values above detection.</p>
<p>If collocated monitors do not agree, consult with the lab, field or quality assurance team to determine if there is a problem with one of the POCs. If they cannot determine which POC is the problem, then confidence in the measurements from both collocated monitors is reduced and <em>no measurements taken from either collocated monitor should be used.</em> If you are required to report the results, the site should be flagged for the low confidence in the accuracy of the results.</p>
<p><br> <strong>Sample <code>R</code> script</strong></p>
<p>The function <code>POC_compare()</code> below generates scatterplots comparing sample values from POC 1 and POC 2 for sites with collocated monitors. If most points on the scatterplot are close to the red line and the correlation is high, then measurements from both POCs are considered equally valid. If points are not close to the red line or the correlation is not high, then both POCs need to be investigated to determine if one POC is more relaible.</p>
<p>Click below to view the script.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="collocated-monitors.html#cb49-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb49-2"><a href="collocated-monitors.html#cb49-2"></a></span>
<span id="cb49-3"><a href="collocated-monitors.html#cb49-3"></a>data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/air-methods/master/airtoxics_data_2009_2013.csv&#39;</span>)</span>
<span id="cb49-4"><a href="collocated-monitors.html#cb49-4"></a></span>
<span id="cb49-5"><a href="collocated-monitors.html#cb49-5"></a><span class="kw">names</span>(data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;AQSID&quot;</span>, <span class="st">&quot;POC&quot;</span>, <span class="st">&quot;Parameter&quot;</span>, <span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Result&quot;</span>, <span class="st">&quot;null_code&quot;</span>, <span class="st">&quot;MDL&quot;</span>, <span class="st">&quot;Pollutant&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;cas&quot;</span>)</span>
<span id="cb49-6"><a href="collocated-monitors.html#cb49-6"></a></span>
<span id="cb49-7"><a href="collocated-monitors.html#cb49-7"></a>POC_compare =<span class="st"> </span><span class="cf">function</span>(data) {</span>
<span id="cb49-8"><a href="collocated-monitors.html#cb49-8"></a></span>
<span id="cb49-9"><a href="collocated-monitors.html#cb49-9"></a><span class="kw">library</span>(shiny)</span>
<span id="cb49-10"><a href="collocated-monitors.html#cb49-10"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb49-11"><a href="collocated-monitors.html#cb49-11"></a><span class="kw">library</span>(rsconnect)  </span>
<span id="cb49-12"><a href="collocated-monitors.html#cb49-12"></a>  </span>
<span id="cb49-13"><a href="collocated-monitors.html#cb49-13"></a>data &lt;-<span class="st"> </span><span class="kw">distinct</span>(data, AQSID, POC, Parameter, Date, Pollutant, Year, <span class="dt">.keep_all =</span> T) <span class="co">#replace with better cleaning function</span></span>
<span id="cb49-14"><a href="collocated-monitors.html#cb49-14"></a></span>
<span id="cb49-15"><a href="collocated-monitors.html#cb49-15"></a>data &lt;-<span class="st"> </span><span class="kw">spread</span>(data, POC, Result) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb49-16"><a href="collocated-monitors.html#cb49-16"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">Status =</span> <span class="kw">ifelse</span>(<span class="st">`</span><span class="dt">1</span><span class="st">`</span> <span class="op">&lt;</span><span class="st"> </span>MDL  <span class="op">&amp;</span><span class="st"> `</span><span class="dt">2</span><span class="st">`</span> <span class="op">&lt;</span><span class="st"> </span>MDL, <span class="st">&quot;POCs 1 and 2 below MDL&quot;</span>, <span class="kw">ifelse</span>(<span class="st">`</span><span class="dt">1</span><span class="st">`</span> <span class="op">&lt;</span><span class="st"> </span>MDL, <span class="st">&quot;POC 1 below MDL&quot;</span>, <span class="kw">ifelse</span>(<span class="st">`</span><span class="dt">2</span><span class="st">`</span> <span class="op">&lt;</span><span class="st"> </span>MDL, <span class="st">&quot;POC 2 below MDL&quot;</span>, <span class="st">&quot;POCs 1 and 2 above MDL&quot;</span>) ) ) ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>(Status)</span>
<span id="cb49-17"><a href="collocated-monitors.html#cb49-17"></a></span>
<span id="cb49-18"><a href="collocated-monitors.html#cb49-18"></a></span>
<span id="cb49-19"><a href="collocated-monitors.html#cb49-19"></a>Pollutant &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>Pollutant)</span>
<span id="cb49-20"><a href="collocated-monitors.html#cb49-20"></a></span>
<span id="cb49-21"><a href="collocated-monitors.html#cb49-21"></a>Site &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>AQSID)</span>
<span id="cb49-22"><a href="collocated-monitors.html#cb49-22"></a></span>
<span id="cb49-23"><a href="collocated-monitors.html#cb49-23"></a>Year &lt;-<span class="st"> </span><span class="kw">unique</span>(data<span class="op">$</span>Year)</span>
<span id="cb49-24"><a href="collocated-monitors.html#cb49-24"></a></span>
<span id="cb49-25"><a href="collocated-monitors.html#cb49-25"></a><span class="kw">shinyApp</span>(</span>
<span id="cb49-26"><a href="collocated-monitors.html#cb49-26"></a>  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(<span class="dt">responsive =</span> <span class="ot">FALSE</span>,</span>
<span id="cb49-27"><a href="collocated-monitors.html#cb49-27"></a>                 <span class="kw">fluidRow</span>(</span>
<span id="cb49-28"><a href="collocated-monitors.html#cb49-28"></a>                   <span class="kw">column</span>(<span class="dv">3</span>,</span>
<span id="cb49-29"><a href="collocated-monitors.html#cb49-29"></a>                          <span class="dt">style =</span> <span class="st">&quot;padding-bottom: 20px;&quot;</span>,</span>
<span id="cb49-30"><a href="collocated-monitors.html#cb49-30"></a>                          <span class="kw">inputPanel</span>(</span>
<span id="cb49-31"><a href="collocated-monitors.html#cb49-31"></a>                            <span class="kw">selectInput</span>(<span class="st">&quot;Pollutant&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a pollutant&quot;</span>, <span class="dt">choices =</span> Pollutant),</span>
<span id="cb49-32"><a href="collocated-monitors.html#cb49-32"></a>                            <span class="kw">selectInput</span>(<span class="st">&quot;Year&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a year&quot;</span>, <span class="dt">choices =</span> Year),</span>
<span id="cb49-33"><a href="collocated-monitors.html#cb49-33"></a>                            <span class="kw">selectInput</span>(<span class="st">&quot;Site&quot;</span>, <span class="dt">label=</span><span class="st">&quot;Choose a site&quot;</span>, <span class="dt">choices =</span> Site))),</span>
<span id="cb49-34"><a href="collocated-monitors.html#cb49-34"></a>                   <span class="kw">column</span>(<span class="dv">9</span>,</span>
<span id="cb49-35"><a href="collocated-monitors.html#cb49-35"></a>                          <span class="kw">plotOutput</span>(<span class="st">&#39;normviz&#39;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)))),</span>
<span id="cb49-36"><a href="collocated-monitors.html#cb49-36"></a>  </span>
<span id="cb49-37"><a href="collocated-monitors.html#cb49-37"></a>  </span>
<span id="cb49-38"><a href="collocated-monitors.html#cb49-38"></a>  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb49-39"><a href="collocated-monitors.html#cb49-39"></a>    </span>
<span id="cb49-40"><a href="collocated-monitors.html#cb49-40"></a>    output<span class="op">$</span>normviz &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb49-41"><a href="collocated-monitors.html#cb49-41"></a>      </span>
<span id="cb49-42"><a href="collocated-monitors.html#cb49-42"></a>      <span class="kw">print</span>(input<span class="op">$</span>Pollutant)</span>
<span id="cb49-43"><a href="collocated-monitors.html#cb49-43"></a>      </span>
<span id="cb49-44"><a href="collocated-monitors.html#cb49-44"></a>      <span class="kw">print</span>(input<span class="op">$</span>Site)</span>
<span id="cb49-45"><a href="collocated-monitors.html#cb49-45"></a>      </span>
<span id="cb49-46"><a href="collocated-monitors.html#cb49-46"></a>      <span class="kw">print</span>(input<span class="op">$</span>Year)</span>
<span id="cb49-47"><a href="collocated-monitors.html#cb49-47"></a>      </span>
<span id="cb49-48"><a href="collocated-monitors.html#cb49-48"></a>      data_sub &lt;-<span class="st"> </span><span class="kw">filter</span>(data, Pollutant<span class="op">==</span>input<span class="op">$</span>Pollutant, AQSID <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>Site, Year <span class="op">==</span><span class="st"> </span>input<span class="op">$</span>Year)</span>
<span id="cb49-49"><a href="collocated-monitors.html#cb49-49"></a>      </span>
<span id="cb49-50"><a href="collocated-monitors.html#cb49-50"></a>      <span class="kw">ggplot</span>(data_sub, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">`</span><span class="dt">1</span><span class="st">`</span>, <span class="dt">y =</span> <span class="st">`</span><span class="dt">2</span><span class="st">`</span>, <span class="dt">color =</span> Status)) <span class="op">+</span></span>
<span id="cb49-51"><a href="collocated-monitors.html#cb49-51"></a><span class="st">        </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb49-52"><a href="collocated-monitors.html#cb49-52"></a><span class="st">        </span><span class="kw">geom_segment</span>(<span class="dt">x =</span> <span class="dv">-1000</span>, <span class="dt">xend =</span> <span class="dv">1000</span>, <span class="dt">y =</span> <span class="dv">-1000</span>, <span class="dt">yend =</span> <span class="dv">1000</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb49-53"><a href="collocated-monitors.html#cb49-53"></a><span class="st">        </span><span class="kw">labs</span>(<span class="dt">title    =</span> <span class="st">&quot;POC comparison chart&quot;</span>, </span>
<span id="cb49-54"><a href="collocated-monitors.html#cb49-54"></a>             <span class="dt">x =</span> <span class="st">&quot;POC 1&quot;</span>, </span>
<span id="cb49-55"><a href="collocated-monitors.html#cb49-55"></a>             <span class="dt">y =</span> <span class="st">&quot;POC 2&quot;</span>, </span>
<span id="cb49-56"><a href="collocated-monitors.html#cb49-56"></a>             <span class="dt">subtitle =</span> <span class="kw">paste</span>(<span class="st">&quot;Correlation =&quot;</span>, <span class="kw">round</span>(<span class="kw">cor</span>(data_sub<span class="op">$</span><span class="st">`</span><span class="dt">1</span><span class="st">`</span>,data_sub<span class="op">$</span><span class="st">`</span><span class="dt">2</span><span class="st">`</span>, <span class="dt">use =</span> <span class="st">&quot;complete&quot;</span>), <span class="dv">2</span>)) )</span>
<span id="cb49-57"><a href="collocated-monitors.html#cb49-57"></a>      </span>
<span id="cb49-58"><a href="collocated-monitors.html#cb49-58"></a>    })</span>
<span id="cb49-59"><a href="collocated-monitors.html#cb49-59"></a>    </span>
<span id="cb49-60"><a href="collocated-monitors.html#cb49-60"></a>  })</span>
<span id="cb49-61"><a href="collocated-monitors.html#cb49-61"></a></span>
<span id="cb49-62"><a href="collocated-monitors.html#cb49-62"></a>}</span>
<span id="cb49-63"><a href="collocated-monitors.html#cb49-63"></a></span>
<span id="cb49-64"><a href="collocated-monitors.html#cb49-64"></a><span class="kw">POC_compare</span>(data)</span></code></pre></div>
<p><br></p>
</div>
<div id="pripocs" class="section level2">
<h2><span class="header-section-number">5.2</span> Prioritize multiple air monitors (POCs)</h2>
<p><strong>Description</strong></p>
<p>If both collocated monitors at a site are considered equally valid, then a single value must be chosen from multiple collocated values to avoid double-counting values at a single site.</p>
<p><br> <strong>Recommended steps</strong></p>
<p>For air toxics, measurements from collocated monitors are considered equally valid unless there is a specific reason to treat them differently. Therefore, these methods are used for dealing with collocated samples where the POCs generally provide similar results.</p>
<ol style="list-style-type: decimal">
<li><p>If one monitor has a valid measurement, and the other does not, then the valid measurement is used.</p></li>
<li><p>If one monitor has a valid measurement greater than or equal to the MDL and the other has a valid measurement less than the MDL, then the measurement above the MDL is used as a conservative approach as there is greater confidence in the value above the MDL.</p></li>
<li><p>If both monitors have valid measurements above the MDL, then those values are averaged since both values are equally valid and the <code>true</code> value is assumed to likely be between the two values.</p></li>
</ol>
<p><br> <strong>Sample <code>R</code> script</strong></p>
<p>The script below uses the <code>POC_average()</code> function to combine results from multiple POCs into one combined site result according to the rules listed above.</p>
<p>Click below to view an example R script.</p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="collocated-monitors.html#cb50-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb50-2"><a href="collocated-monitors.html#cb50-2"></a></span>
<span id="cb50-3"><a href="collocated-monitors.html#cb50-3"></a>data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/air-methods/master/airtoxics_data_2009_2013.csv&#39;</span>)</span>
<span id="cb50-4"><a href="collocated-monitors.html#cb50-4"></a></span>
<span id="cb50-5"><a href="collocated-monitors.html#cb50-5"></a><span class="kw">names</span>(data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;AQSID&quot;</span>, <span class="st">&quot;POC&quot;</span>, <span class="st">&quot;Parameter&quot;</span>, <span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Result&quot;</span>, <span class="st">&quot;Null_Data_Code&quot;</span>, <span class="st">&quot;MDL&quot;</span>, <span class="st">&quot;Pollutant&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;CAS&quot;</span>)</span>
<span id="cb50-6"><a href="collocated-monitors.html#cb50-6"></a></span>
<span id="cb50-7"><a href="collocated-monitors.html#cb50-7"></a>POC_average =<span class="st"> </span><span class="cf">function</span>(data) {</span>
<span id="cb50-8"><a href="collocated-monitors.html#cb50-8"></a>  </span>
<span id="cb50-9"><a href="collocated-monitors.html#cb50-9"></a>  <span class="kw">library</span>(tidyverse)</span>
<span id="cb50-10"><a href="collocated-monitors.html#cb50-10"></a>  </span>
<span id="cb50-11"><a href="collocated-monitors.html#cb50-11"></a>  POC_averaging &lt;-<span class="st"> </span><span class="cf">function</span>(Result, Censored) {</span>
<span id="cb50-12"><a href="collocated-monitors.html#cb50-12"></a>    </span>
<span id="cb50-13"><a href="collocated-monitors.html#cb50-13"></a>    Result &lt;-<span class="st"> </span>Result[<span class="op">!</span><span class="kw">is.na</span>(Result)]</span>
<span id="cb50-14"><a href="collocated-monitors.html#cb50-14"></a>    </span>
<span id="cb50-15"><a href="collocated-monitors.html#cb50-15"></a>    Censored &lt;-<span class="st"> </span>Censored[<span class="op">!</span><span class="kw">is.na</span>(Censored)]</span>
<span id="cb50-16"><a href="collocated-monitors.html#cb50-16"></a>    </span>
<span id="cb50-17"><a href="collocated-monitors.html#cb50-17"></a>    <span class="cf">if</span>(<span class="kw">all</span>(Censored, <span class="dt">na.rm =</span> T)) {</span>
<span id="cb50-18"><a href="collocated-monitors.html#cb50-18"></a>      <span class="kw">return</span> (<span class="kw">mean</span>(Result, <span class="dt">na.rm =</span> T))</span>
<span id="cb50-19"><a href="collocated-monitors.html#cb50-19"></a>    }</span>
<span id="cb50-20"><a href="collocated-monitors.html#cb50-20"></a>    <span class="cf">else</span> {</span>
<span id="cb50-21"><a href="collocated-monitors.html#cb50-21"></a>      <span class="kw">return</span> (<span class="kw">mean</span>(Result[<span class="op">!</span>Censored], <span class="dt">na.rm =</span> T ) )</span>
<span id="cb50-22"><a href="collocated-monitors.html#cb50-22"></a>    }</span>
<span id="cb50-23"><a href="collocated-monitors.html#cb50-23"></a>    </span>
<span id="cb50-24"><a href="collocated-monitors.html#cb50-24"></a>  }</span>
<span id="cb50-25"><a href="collocated-monitors.html#cb50-25"></a>  </span>
<span id="cb50-26"><a href="collocated-monitors.html#cb50-26"></a>  data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-27"><a href="collocated-monitors.html#cb50-27"></a><span class="st">          </span><span class="kw">group_by</span>(AQSID, Parameter, Pollutant, Date, MDL) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-28"><a href="collocated-monitors.html#cb50-28"></a><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">Result =</span> <span class="kw">POC_averaging</span>(Result, Censored), <span class="dt">Censored =</span> <span class="kw">all</span>(Censored, <span class="dt">na.rm =</span> T) ) <span class="op">%&gt;%</span></span>
<span id="cb50-29"><a href="collocated-monitors.html#cb50-29"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">Result =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(Result), <span class="ot">NA</span>, Result), <span class="dt">Censored =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(Result), <span class="ot">NA</span>, Censored))</span>
<span id="cb50-30"><a href="collocated-monitors.html#cb50-30"></a>  </span>
<span id="cb50-31"><a href="collocated-monitors.html#cb50-31"></a>  <span class="kw">return</span> (<span class="kw">select</span>(data, AQSID, Parameter, Pollutant, Date, Result, MDL, Censored) ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>()</span>
<span id="cb50-32"><a href="collocated-monitors.html#cb50-32"></a>}</span>
<span id="cb50-33"><a href="collocated-monitors.html#cb50-33"></a></span>
<span id="cb50-34"><a href="collocated-monitors.html#cb50-34"></a>POC_averaged_data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Censored =</span> Result <span class="op">&lt;</span><span class="st"> </span>MDL) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">POC_average</span>()</span></code></pre></div>
</div>
<p><br></p>
<blockquote>
<p><a href="collocated-monitors.html#collocated-monitors">Back to top</a></p>
</blockquote>

</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="data-validation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="detection-limits.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/04-collocated_monitors.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["air-methods.pdf", "air-methods.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
