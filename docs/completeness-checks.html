<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> Completeness checks | air-methods.utf8</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content=" Completeness checks | air-methods.utf8" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/MPCA-air/air-methods" />
  <meta property="og:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />
  
  <meta name="github-repo" content="MPCA-air/air-methods" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" Completeness checks | air-methods.utf8" />
  
  
  <meta name="twitter:image" content="https://github.com/MPCA-air/air-methodsimages/cover.jpeg" />

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="detection-limits.html"/>
<link rel="next" href="summary-methods.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://mpca-air.github.io/air-methods">Methods for air data analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>1</b> Best practices</a><ul>
<li class="chapter" data-level="1.1" data-path="best-practices.html"><a href="best-practices.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>1.1</b> Welcome to the Tidyverse</a></li>
<li class="chapter" data-level="1.2" data-path="best-practices.html"><a href="best-practices.html#keep-r-updated"><i class="fa fa-check"></i><b>1.2</b> Keep R updated</a></li>
<li class="chapter" data-level="1.3" data-path="best-practices.html"><a href="best-practices.html#script-organization"><i class="fa fa-check"></i><b>1.3</b> Script organization</a></li>
<li class="chapter" data-level="1.4" data-path="best-practices.html"><a href="best-practices.html#divide-and-conquer"><i class="fa fa-check"></i><b>1.4</b> Divide and conquer</a></li>
<li class="chapter" data-level="1.5" data-path="best-practices.html"><a href="best-practices.html#codebooks-metadata-and-data-dictionaries"><i class="fa fa-check"></i><b>1.5</b> Codebooks, metadata, and data dictionaries</a></li>
<li class="chapter" data-level="1.6" data-path="best-practices.html"><a href="best-practices.html#data-formatting"><i class="fa fa-check"></i><b>1.6</b> Data formatting</a></li>
<li class="chapter" data-level="1.7" data-path="best-practices.html"><a href="best-practices.html#pollutant-names"><i class="fa fa-check"></i><b>1.7</b> Pollutant names</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get-data.html"><a href="get-data.html"><i class="fa fa-check"></i><b>2</b> Get data</a><ul>
<li class="chapter" data-level="2.1" data-path="get-data.html"><a href="get-data.html#air-monitoring"><i class="fa fa-check"></i><b>2.1</b> Air monitoring</a><ul>
<li class="chapter" data-level="2.1.1" data-path="get-data.html"><a href="get-data.html#AQS"><i class="fa fa-check"></i><b>2.1.1</b> Retrieving data from AQS</a></li>
<li class="chapter" data-level="2.1.2" data-path="get-data.html"><a href="get-data.html#rqamd"><i class="fa fa-check"></i><b>2.1.2</b> Retrieving data from AQS DataMart</a></li>
<li class="chapter" data-level="2.1.3" data-path="get-data.html"><a href="get-data.html#aqi-now"><i class="fa fa-check"></i><b>2.1.3</b> Current AQI observations</a></li>
<li class="chapter" data-level="2.1.4" data-path="get-data.html"><a href="get-data.html#wairsites"><i class="fa fa-check"></i><b>2.1.4</b> WAIR Site information table</a></li>
<li class="chapter" data-level="2.1.5" data-path="get-data.html"><a href="get-data.html#monitors"><i class="fa fa-check"></i><b>2.1.5</b> AirNow:Active AQI monitors</a></li>
<li class="chapter" data-level="2.1.6" data-path="get-data.html"><a href="get-data.html#EPAsites"><i class="fa fa-check"></i><b>2.1.6</b> EPA Google Earth Site Maps</a></li>
<li class="chapter" data-level="2.1.7" data-path="get-data.html"><a href="get-data.html#lims"><i class="fa fa-check"></i><b>2.1.7</b> Retrieving data from LIMS via Tableau</a></li>
<li class="chapter" data-level="2.1.8" data-path="get-data.html"><a href="get-data.html#AirVision"><i class="fa fa-check"></i><b>2.1.8</b> Retrieving continuous data from AirVision</a></li>
<li class="chapter" data-level="2.1.9" data-path="get-data.html"><a href="get-data.html#wair"><i class="fa fa-check"></i><b>2.1.9</b> Retrieving data from MPCA WAIR database</a></li>
<li class="chapter" data-level="2.1.10" data-path="get-data.html"><a href="get-data.html#toxics"><i class="fa fa-check"></i><b>2.1.10</b> Air toxics Data Explorer</a></li>
<li class="chapter" data-level="2.1.11" data-path="get-data.html"><a href="get-data.html#criteria"><i class="fa fa-check"></i><b>2.1.11</b> Criteria Pollutant Data Explorer</a></li>
<li class="chapter" data-level="2.1.12" data-path="get-data.html"><a href="get-data.html#AQI"><i class="fa fa-check"></i><b>2.1.12</b> Air Quality Index Summary Reports</a></li>
<li class="chapter" data-level="2.1.13" data-path="get-data.html"><a href="get-data.html#PAHs"><i class="fa fa-check"></i><b>2.1.13</b> Air Monitoring for PAHs</a></li>
<li class="chapter" data-level="2.1.14" data-path="get-data.html"><a href="get-data.html#tableau"><i class="fa fa-check"></i><b>2.1.14</b> Internal Data Explorers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="get-data.html"><a href="get-data.html#health-and-standards"><i class="fa fa-check"></i><b>2.2</b> Health and standards</a><ul>
<li class="chapter" data-level="2.2.1" data-path="get-data.html"><a href="get-data.html#IHBs"><i class="fa fa-check"></i><b>2.2.1</b> Inhalation health benchmarks (IHBs)</a></li>
<li class="chapter" data-level="2.2.2" data-path="get-data.html"><a href="get-data.html#NAAQS"><i class="fa fa-check"></i><b>2.2.2</b> Air Quality Standards (NAAQS and MAAQS)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="get-data.html"><a href="get-data.html#air-modeling"><i class="fa fa-check"></i><b>2.3</b> Air modeling</a><ul>
<li class="chapter" data-level="2.3.1" data-path="get-data.html"><a href="get-data.html#nata"><i class="fa fa-check"></i><b>2.3.1</b> NATA modeling</a></li>
<li class="chapter" data-level="2.3.2" data-path="get-data.html"><a href="get-data.html#mnrisks"><i class="fa fa-check"></i><b>2.3.2</b> MNRISKS statewide risk modeling</a></li>
<li class="chapter" data-level="2.3.3" data-path="get-data.html"><a href="get-data.html#downscale"><i class="fa fa-check"></i><b>2.3.3</b> Downscaler modeling results for Ozone and PM2.5</a></li>
<li class="chapter" data-level="2.3.4" data-path="get-data.html"><a href="get-data.html#cmaq"><i class="fa fa-check"></i><b>2.3.4</b> CMAQ Ozone modeling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="get-data.html"><a href="get-data.html#context"><i class="fa fa-check"></i><b>2.4</b> Context</a><ul>
<li class="chapter" data-level="2.4.1" data-path="get-data.html"><a href="get-data.html#mn-ei"><i class="fa fa-check"></i><b>2.4.1</b> MN Emissions Inventory</a></li>
<li class="chapter" data-level="2.4.2" data-path="get-data.html"><a href="get-data.html#nei"><i class="fa fa-check"></i><b>2.4.2</b> EPA’s NEI</a></li>
<li class="chapter" data-level="2.4.3" data-path="get-data.html"><a href="get-data.html#fac-coords"><i class="fa fa-check"></i><b>2.4.3</b> Facility locations</a></li>
<li class="chapter" data-level="2.4.4" data-path="get-data.html"><a href="get-data.html#wx-obs"><i class="fa fa-check"></i><b>2.4.4</b> Weather observations</a></li>
<li class="chapter" data-level="2.4.5" data-path="get-data.html"><a href="get-data.html#hysplit"><i class="fa fa-check"></i><b>2.4.5</b> HYSPLIT wind trajectories</a></li>
<li class="chapter" data-level="2.4.6" data-path="get-data.html"><a href="get-data.html#landuse"><i class="fa fa-check"></i><b>2.4.6</b> Land use maps</a></li>
<li class="chapter" data-level="2.4.7" data-path="get-data.html"><a href="get-data.html#census"><i class="fa fa-check"></i><b>2.4.7</b> United States Census boundaries</a></li>
<li class="chapter" data-level="2.4.8" data-path="get-data.html"><a href="get-data.html#acs"><i class="fa fa-check"></i><b>2.4.8</b> American Community Survey (ACS)</a></li>
</ul></li>
</ul></li>
<li><a href="quality-assurance-methods.html#quality-assurance-methods"><strong>Quality assurance methods</strong></a></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#missing"><i class="fa fa-check"></i><b>3.1</b> Blank, NULL, and missing values</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#quals"><i class="fa fa-check"></i><b>3.2</b> Qualified data</a></li>
<li class="chapter" data-level="3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#dups"><i class="fa fa-check"></i><b>3.3</b> Duplicate observations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-validation.html"><a href="data-validation.html"><i class="fa fa-check"></i><b>4</b> Data validation</a><ul>
<li class="chapter" data-level="4.1" data-path="data-validation.html"><a href="data-validation.html#leaks"><i class="fa fa-check"></i><b>4.1</b> Instrument drift or leaks in a system.</a></li>
<li class="chapter" data-level="4.2" data-path="data-validation.html"><a href="data-validation.html#outs"><i class="fa fa-check"></i><b>4.2</b> Extreme values and outliers</a></li>
<li class="chapter" data-level="4.3" data-path="data-validation.html"><a href="data-validation.html#sticky2"><i class="fa fa-check"></i><b>4.3</b> Sequential repeats and “sticky” numbers</a></li>
<li class="chapter" data-level="4.4" data-path="data-validation.html"><a href="data-validation.html#unique"><i class="fa fa-check"></i><b>4.4</b> Unique detected values</a></li>
<li class="chapter" data-level="4.5" data-path="data-validation.html"><a href="data-validation.html#valid_ref"><i class="fa fa-check"></i><b>4.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collocated-monitors.html"><a href="collocated-monitors.html"><i class="fa fa-check"></i><b>5</b> Collocated monitors</a><ul>
<li class="chapter" data-level="5.1" data-path="collocated-monitors.html"><a href="collocated-monitors.html#evalpocs"><i class="fa fa-check"></i><b>5.1</b> Evaluate collocated air monitors</a></li>
<li class="chapter" data-level="5.2" data-path="collocated-monitors.html"><a href="collocated-monitors.html#pripocs"><i class="fa fa-check"></i><b>5.2</b> Prioritize multiple air monitors (POCs)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="detection-limits.html"><a href="detection-limits.html"><i class="fa fa-check"></i><b>6</b> Detection limits</a><ul>
<li class="chapter" data-level="6.1" data-path="detection-limits.html"><a href="detection-limits.html#method-detection-limit"><i class="fa fa-check"></i><b>6.1</b> Method Detection Limit</a></li>
<li class="chapter" data-level="6.2" data-path="detection-limits.html"><a href="detection-limits.html#calculating-mdls"><i class="fa fa-check"></i><b>6.2</b> Calculating MDLs</a></li>
<li class="chapter" data-level="6.3" data-path="detection-limits.html"><a href="detection-limits.html#finding-mpca-detection-limits"><i class="fa fa-check"></i><b>6.3</b> Finding MPCA detection limits</a></li>
<li class="chapter" data-level="6.4" data-path="detection-limits.html"><a href="detection-limits.html#qualifier-codes-for-detection-limits"><i class="fa fa-check"></i><b>6.4</b> Qualifier Codes for Detection Limits</a></li>
<li class="chapter" data-level="6.5" data-path="detection-limits.html"><a href="detection-limits.html#estimating-below-detection-values"><i class="fa fa-check"></i><b>6.5</b> Estimating below detection values</a></li>
<li class="chapter" data-level="6.6" data-path="detection-limits.html"><a href="detection-limits.html#recommended-steps"><i class="fa fa-check"></i><b>6.6</b> Recommended Steps</a></li>
<li class="chapter" data-level="6.7" data-path="detection-limits.html"><a href="detection-limits.html#multiple-detection-limits"><i class="fa fa-check"></i><b>6.7</b> Multiple detection limits</a></li>
<li class="chapter" data-level="6.8" data-path="detection-limits.html"><a href="detection-limits.html#reporting-limits"><i class="fa fa-check"></i><b>6.8</b> Reporting limits</a></li>
<li class="chapter" data-level="6.9" data-path="detection-limits.html"><a href="detection-limits.html#references"><i class="fa fa-check"></i><b>6.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="completeness-checks.html"><a href="completeness-checks.html"><i class="fa fa-check"></i><b>7</b> Completeness checks</a><ul>
<li class="chapter" data-level="7.1" data-path="completeness-checks.html"><a href="completeness-checks.html#complete"><i class="fa fa-check"></i><b>7.1</b> Completeness checks</a></li>
</ul></li>
<li><a href="summary-methods.html#summary-methods"><strong>Summary methods</strong></a></li>
<li class="chapter" data-level="8" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>8</b> Summary statistics</a><ul>
<li class="chapter" data-level="8.1" data-path="summary-statistics.html"><a href="summary-statistics.html#normal"><i class="fa fa-check"></i><b>8.1</b> Test for normality</a></li>
<li class="chapter" data-level="8.2" data-path="summary-statistics.html"><a href="summary-statistics.html#boots"><i class="fa fa-check"></i><b>8.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="8.3" data-path="summary-statistics.html"><a href="summary-statistics.html#below"><i class="fa fa-check"></i><b>8.3</b> Below the detection limit</a></li>
<li class="chapter" data-level="8.4" data-path="summary-statistics.html"><a href="summary-statistics.html#confidence"><i class="fa fa-check"></i><b>8.4</b> Upper confidence limits (UCLs)</a></li>
<li class="chapter" data-level="8.5" data-path="summary-statistics.html"><a href="summary-statistics.html#incomplete"><i class="fa fa-check"></i><b>8.5</b> Annual summaries for incomplete data</a></li>
<li class="chapter" data-level="8.6" data-path="summary-statistics.html"><a href="summary-statistics.html#health"><i class="fa fa-check"></i><b>8.6</b> Comparison of data to inhalation health benchmarks</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="site-comparisons.html"><a href="site-comparisons.html"><i class="fa fa-check"></i><b>9</b> Site comparisons</a><ul>
<li class="chapter" data-level="9.1" data-path="site-comparisons.html"><a href="site-comparisons.html#confidence-intervals"><i class="fa fa-check"></i><b>9.1</b> Confidence intervals</a></li>
<li class="chapter" data-level="9.2" data-path="site-comparisons.html"><a href="site-comparisons.html#tools-to-visualize-differences"><i class="fa fa-check"></i><b>9.2</b> Tools to visualize differences</a><ul>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#beeswarm-plots"><i class="fa fa-check"></i>Beeswarm Plots</a></li>
<li class="chapter" data-level="" data-path="site-comparisons.html"><a href="site-comparisons.html#correlation-matrices"><i class="fa fa-check"></i>Correlation matrices</a></li>
</ul></li>
<li><a href="site-comparisons.html#references-1"><em>References</em></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="start-finish.html"><a href="start-finish.html"><i class="fa fa-check"></i><b>10</b> From start to finish</a><ul>
<li class="chapter" data-level="10.1" data-path="start-finish.html"><a href="start-finish.html#using-functions"><i class="fa fa-check"></i><b>10.1</b> Using functions</a></li>
<li class="chapter" data-level="10.2" data-path="start-finish.html"><a href="start-finish.html#a-simpler-analysis"><i class="fa fa-check"></i><b>10.2</b> A simpler analysis</a></li>
</ul></li>
<li><a href="visuals.html#visuals"><strong>Visuals</strong></a></li>
<li class="chapter" data-level="11" data-path="charts.html"><a href="charts.html"><i class="fa fa-check"></i><b>11</b> Charts</a><ul>
<li class="chapter" data-level="11.1" data-path="charts.html"><a href="charts.html#calendar-plots"><i class="fa fa-check"></i><b>11.1</b> Calendar plots</a></li>
<li class="chapter" data-level="11.2" data-path="charts.html"><a href="charts.html#colors-and-themes"><i class="fa fa-check"></i><b>11.2</b> Colors and themes</a></li>
<li class="chapter" data-level="11.3" data-path="charts.html"><a href="charts.html#pollution-roses"><i class="fa fa-check"></i><b>11.3</b> Pollution roses</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>12</b> Time series</a><ul>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#hour-of-the-day"><i class="fa fa-check"></i>Hour of the day</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#day-of-the-week"><i class="fa fa-check"></i>Day of the week</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#seasonality"><i class="fa fa-check"></i>Seasonality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>13</b> Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#interactive-map-of-air-monitors"><i class="fa fa-check"></i>Interactive map of air monitors</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#creating-shapefiles-in-r"><i class="fa fa-check"></i>Creating shapefiles in R</a></li>
</ul></li>
<li><a href="mpca-data-tools.html#mpca-data-tools"><strong>MPCA data tools</strong></a></li>
<li class="chapter" data-level="14" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html"><i class="fa fa-check"></i><b>14</b> Air toxics explorer</a><ul>
<li class="chapter" data-level="14.1" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-cleaning-1"><i class="fa fa-check"></i><b>14.1</b> Data Cleaning</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#null-results"><i class="fa fa-check"></i>Null Results</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#duplicate-observations"><i class="fa fa-check"></i>Duplicate Observations</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-validation-1"><i class="fa fa-check"></i><b>14.2</b> Data Validation</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#parameter-occurrence-codes-pocs"><i class="fa fa-check"></i>Parameter Occurrence Codes (POCs)</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#data-completeness"><i class="fa fa-check"></i>Data Completeness</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#below-the-detection-limit"><i class="fa fa-check"></i>Below the detection limit</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#producing-annual-summaries"><i class="fa fa-check"></i><b>14.3</b> Producing Annual Summaries</a><ul>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-annual-means"><i class="fa fa-check"></i>Calculating annual means</a></li>
<li class="chapter" data-level="" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#calculating-upper-confidence-limits"><i class="fa fa-check"></i>Calculating upper confidence limits</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="air-toxics-explorer.html"><a href="air-toxics-explorer.html#comparing-sites"><i class="fa fa-check"></i><b>14.4</b> Comparing sites</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="criteria-pollutant-explorer.html"><a href="criteria-pollutant-explorer.html"><i class="fa fa-check"></i><b>15</b> Criteria pollutant explorer</a></li>
<li class="chapter" data-level="16" data-path="aqi-explorer.html"><a href="aqi-explorer.html"><i class="fa fa-check"></i><b>16</b> AQI explorer</a></li>
<li class="chapter" data-level="" data-path="edit-this-book.html"><a href="edit-this-book.html"><i class="fa fa-check"></i>Edit this book</a><ul>
<li><a href="edit-this-book.html#references-2"><em>References</em></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/MPCA-air" target="blank">Created by MPCA-air</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="completeness-checks" class="section level1">
<h1><span class="header-section-number"></span> Completeness checks</h1>
<p><img src="images/cover6.jpg" align="right" style="margin-top: -14px; margin-left: 32px; width: 34%;" /></p>
<p><br></p>
<p>Checking for data completeness before generating summaries ensures that results will be comparable from one year to the next. Without completeness checks, changes in the seasonal coverage from year to year may create the illusion of increasing or decreasing trends.</p>
<p>Completeness checks include tests for:</p>
<ul>
<li><code>Annual completeness</code> Number of samples required per year.<br />
</li>
<li><code>Seasonal completeness</code> Number of samples required per season.</li>
</ul>
<div id="complete" class="section level2">
<h2><span class="header-section-number">7.1</span> Completeness checks</h2>
<p><strong>Description</strong></p>
<p>This section describes completeness guidelines and methods for performing completeness checks.</p>
<p><strong>Air toxics reporting guidelines</strong></p>
<p>Annual results are considered <em>complete</em> if the following conditions are met:</p>
<ul>
<li><code>Seasonal completeness</code> 75% or more of samples collected in colder months (January - April, November, Decmeber) and in warmer months (May - October)</li>
<li><code>Annual completeness</code> Both seasons are complete</li>
</ul>
<p><br></p>
<p><strong>Criteria pollutant reporting guidelines</strong></p>
<p>Completeness rules for criteria pollutant design values are defined in the <a href="https://www.ecfr.gov/cgi-bin/text-idx?tpl=/ecfrbrowse/Title40/40cfr50_main_02.tpl">Appendices of 40 CFR 50</a>.</p>
<p>In general, these rules apply:</p>
<ul>
<li><code>Annual completeness</code> 75% or more of samples collected per year</li>
<li><code>Calendar quarter completeness</code> 75% or more of samples collected in each calendar quarter</li>
</ul>
<p><br> <strong>Recommended steps for air toxics</strong></p>
<ol style="list-style-type: decimal">
<li>Based on the monitoring schedule, record the total <em>expected samples</em> for each year and season.
<ul>
<li>Air toxics monitors follow a fixed sampling schedule provided by EPA’s <a href="https://www3.epa.gov/ttn/amtic/calendar.html">Air Toxics Calendar</a>.</li>
</ul></li>
<li>Count the number of <em>valid samples</em> for each year and season.</li>
<li>Divide the number of <em>valid samples</em> by the number of <em>expected samples</em>.</li>
<li>Mark annual results as <em>incomplete</em> if one or both seasons do not fulfill the completeness checks.</li>
</ol>
<p><br> <strong>Example <code>R</code> script</strong></p>
<p><strong>Click below to view an example.</strong></p>
<div class="toggle">
<button class="btn_code">
Show <strong>R</strong> code
</button>
<p><br>
Packages</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="completeness-checks.html#cb52-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb52-2"><a href="completeness-checks.html#cb52-2"></a><span class="kw">library</span>(lubridate)</span></code></pre></div>
<p>Our example data is organized by monitoring site and date.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="completeness-checks.html#cb53-1"></a>data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/MPCA-air/air-methods/master/airtoxics_data_2009_2013.csv&#39;</span>)</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-72"></span>
<div id="htmlwidget-7dda239934e330feb7be" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7dda239934e330feb7be">{"x":{"filter":"none","data":[[270535501,270535501,270535501,270535501,270535501],[1,1,1,1,1],[12102,12102,12102,12102,12102],["2009-07-30","2009-08-05","2009-08-11","2009-09-16","2009-09-22"],[0.00127,0.00223,0.0037,0.0018,0.0027],[null,null,null,null,null],[0.0028236,0.0028236,0.0028236,0.0028236,0.0028236],["Antimony","Antimony","Antimony","Antimony","Antimony"],[2009,2009,2009,2009,2009],["7440-36-0","7440-36-0","7440-36-0","7440-36-0","7440-36-0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AQSID<\/th>\n      <th>POC<\/th>\n      <th>Param_Code<\/th>\n      <th>Date<\/th>\n      <th>Concentration<\/th>\n      <th>Null_Code<\/th>\n      <th>Dlimit<\/th>\n      <th>Pollutant<\/th>\n      <th>Year<\/th>\n      <th>CAS<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"searching":false,"ordering":false,"lengthChange":false,"paginate":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[0,1,2,4,6,8]}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.1: Sample data table.
</p>
</div>
<p><br></p>
<p><strong>Step 1:</strong> Find the expected number of samples.</p>
<p>Monitors in EPA’s Air Quality System are required to follow the <a href="https://www3.epa.gov/ttn/amtic/calendar.html">Air Toxics Monitoring Calendar</a>. The sampling schedule for air toxics is generally 1 sample per every 6 days. Depending on the sampling start date and whether it is a leap year or not, the expected number of samples for the year will range from 60 to 61. If you are uncertain about the sampling schedule for your data consult the lab to confirm the expected number of samples.</p>
<p>Entering the start and end date into the <code>sample_calendar()</code> function below will create a list of the expected sampling dates based on EPA’s air toxics monitoring schedule.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="completeness-checks.html#cb54-1"></a><span class="co"># Create a sampling calendar based on EPA&#39;s air toxics monitoring schedule</span></span>
<span id="cb54-2"><a href="completeness-checks.html#cb54-2"></a>sample_calendar &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">start         =</span> <span class="st">&quot;2012-01-01&quot;</span>, </span>
<span id="cb54-3"><a href="completeness-checks.html#cb54-3"></a>                            <span class="dt">end           =</span> <span class="st">&quot;2016-12-31&quot;</span>, </span>
<span id="cb54-4"><a href="completeness-checks.html#cb54-4"></a>                            <span class="dt">day_interval  =</span> <span class="dv">6</span>,</span>
<span id="cb54-5"><a href="completeness-checks.html#cb54-5"></a>                            <span class="dt">type          =</span> <span class="st">&quot;air_toxics&quot;</span>) {</span>
<span id="cb54-6"><a href="completeness-checks.html#cb54-6"></a>  </span>
<span id="cb54-7"><a href="completeness-checks.html#cb54-7"></a>  <span class="kw">library</span>(lubridate)</span>
<span id="cb54-8"><a href="completeness-checks.html#cb54-8"></a>  </span>
<span id="cb54-9"><a href="completeness-checks.html#cb54-9"></a>  <span class="co"># Convert &#39;start&#39; and &#39;end&#39; to class date</span></span>
<span id="cb54-10"><a href="completeness-checks.html#cb54-10"></a>  start &lt;-<span class="st"> </span><span class="kw">ymd</span>(start)</span>
<span id="cb54-11"><a href="completeness-checks.html#cb54-11"></a>  end   &lt;-<span class="st"> </span><span class="kw">ymd</span>(end)</span>
<span id="cb54-12"><a href="completeness-checks.html#cb54-12"></a>  </span>
<span id="cb54-13"><a href="completeness-checks.html#cb54-13"></a>  <span class="co"># Set official start date to selected EPA calendar</span></span>
<span id="cb54-14"><a href="completeness-checks.html#cb54-14"></a>  <span class="cf">if</span> (type <span class="op">==</span><span class="st"> &quot;air_toxics&quot;</span>) {</span>
<span id="cb54-15"><a href="completeness-checks.html#cb54-15"></a>       epa_start &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1990-01-09&quot;</span>)</span>
<span id="cb54-16"><a href="completeness-checks.html#cb54-16"></a>  } <span class="cf">else</span> {</span>
<span id="cb54-17"><a href="completeness-checks.html#cb54-17"></a>       epa_start &lt;-<span class="st"> </span>start</span>
<span id="cb54-18"><a href="completeness-checks.html#cb54-18"></a>  }</span>
<span id="cb54-19"><a href="completeness-checks.html#cb54-19"></a>  </span>
<span id="cb54-20"><a href="completeness-checks.html#cb54-20"></a>  <span class="co"># Create full table of sampling dates</span></span>
<span id="cb54-21"><a href="completeness-checks.html#cb54-21"></a>  calendar &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> epa_start, </span>
<span id="cb54-22"><a href="completeness-checks.html#cb54-22"></a>                  <span class="dt">to   =</span> end, </span>
<span id="cb54-23"><a href="completeness-checks.html#cb54-23"></a>                  <span class="dt">by   =</span> <span class="kw">paste</span>(day_interval, <span class="st">&quot;days&quot;</span>))</span>
<span id="cb54-24"><a href="completeness-checks.html#cb54-24"></a>  </span>
<span id="cb54-25"><a href="completeness-checks.html#cb54-25"></a>  </span>
<span id="cb54-26"><a href="completeness-checks.html#cb54-26"></a>  <span class="co"># Subset to user&#39;s date range</span></span>
<span id="cb54-27"><a href="completeness-checks.html#cb54-27"></a>  calendar &lt;-<span class="st"> </span>calendar[calendar <span class="op">&gt;=</span><span class="st"> </span>start <span class="op">&amp;</span><span class="st"> </span>calendar <span class="op">&lt;=</span><span class="st"> </span>end]</span>
<span id="cb54-28"><a href="completeness-checks.html#cb54-28"></a>  </span>
<span id="cb54-29"><a href="completeness-checks.html#cb54-29"></a>  <span class="co"># Print total sampling days and date range</span></span>
<span id="cb54-30"><a href="completeness-checks.html#cb54-30"></a>  <span class="kw">cat</span>(<span class="kw">length</span>(calendar), <span class="st">&quot; sampling days from &quot;</span>, <span class="kw">as.character</span>(<span class="kw">min</span>(calendar)), <span class="st">&quot;to&quot;</span>, <span class="kw">as.character</span>(<span class="kw">max</span>(calendar)))</span>
<span id="cb54-31"><a href="completeness-checks.html#cb54-31"></a>  </span>
<span id="cb54-32"><a href="completeness-checks.html#cb54-32"></a>  <span class="kw">return</span>(calendar)</span>
<span id="cb54-33"><a href="completeness-checks.html#cb54-33"></a>  </span>
<span id="cb54-34"><a href="completeness-checks.html#cb54-34"></a>}</span></code></pre></div>
<p>Find the date range of the data and create the expected sampling schedule with the function above.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="completeness-checks.html#cb55-1"></a><span class="co"># Find the year range of your data</span></span>
<span id="cb55-2"><a href="completeness-checks.html#cb55-2"></a>date_range &lt;-<span class="st"> </span><span class="kw">range</span>(data<span class="op">$</span>Date)</span>
<span id="cb55-3"><a href="completeness-checks.html#cb55-3"></a></span>
<span id="cb55-4"><a href="completeness-checks.html#cb55-4"></a><span class="co"># Create expected sample calendar</span></span>
<span id="cb55-5"><a href="completeness-checks.html#cb55-5"></a>epa_schedule &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">Date =</span> <span class="kw">sample_calendar</span>(<span class="dt">start =</span> <span class="kw">format</span>(date_range[<span class="dv">1</span>], <span class="st">&quot;%Y-01-01&quot;</span>), <span class="co"># Extend range to first day of the year</span></span>
<span id="cb55-6"><a href="completeness-checks.html#cb55-6"></a>                                                  <span class="dt">end   =</span> <span class="kw">format</span>(date_range[<span class="dv">2</span>], <span class="st">&quot;%Y-12-31&quot;</span>), <span class="co"># Extend range to last day of the year</span></span>
<span id="cb55-7"><a href="completeness-checks.html#cb55-7"></a>                                                  <span class="dt">day_interval =</span> <span class="dv">6</span>))</span></code></pre></div>
<pre><code>## 304  sampling days from  2009-01-05 to 2013-12-28</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="completeness-checks.html#cb57-1"></a><span class="co"># Add year and calendar quarter columns</span></span>
<span id="cb57-2"><a href="completeness-checks.html#cb57-2"></a>epa_schedule &lt;-<span class="st"> </span>epa_schedule <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Year        =</span> <span class="kw">year</span>(Date),</span>
<span id="cb57-3"><a href="completeness-checks.html#cb57-3"></a>                                        <span class="dt">cal_quarter =</span> <span class="kw">quarter</span>(Date))</span>
<span id="cb57-4"><a href="completeness-checks.html#cb57-4"></a></span>
<span id="cb57-5"><a href="completeness-checks.html#cb57-5"></a></span>
<span id="cb57-6"><a href="completeness-checks.html#cb57-6"></a><span class="co"># Count the expected number of samples per quarter and year.</span></span>
<span id="cb57-7"><a href="completeness-checks.html#cb57-7"></a>epa_schedule &lt;-<span class="st"> </span>epa_schedule <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb57-8"><a href="completeness-checks.html#cb57-8"></a><span class="st">                </span><span class="kw">group_by</span>(Year, cal_quarter) <span class="op">%&gt;%</span></span>
<span id="cb57-9"><a href="completeness-checks.html#cb57-9"></a><span class="st">                </span><span class="kw">summarize</span>(<span class="dt">expected_quarter_samples =</span> <span class="kw">length</span>(<span class="kw">unique</span>(Date))) <span class="op">%&gt;%</span></span>
<span id="cb57-10"><a href="completeness-checks.html#cb57-10"></a><span class="st">                </span><span class="kw">group_by</span>(Year) <span class="op">%&gt;%</span></span>
<span id="cb57-11"><a href="completeness-checks.html#cb57-11"></a><span class="st">                </span><span class="kw">mutate</span>(<span class="dt">expected_annual_samples =</span> <span class="kw">sum</span>(expected_quarter_samples))</span></code></pre></div>
<br>
<strong>Expected number of samples.</strong>
<div class="figure"><span id="fig:unnamed-chunk-75"></span>
<div id="htmlwidget-58a03391e178ffc4884f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-58a03391e178ffc4884f">{"x":{"filter":"none","data":[[2009,2009,2009,2009,2010,2010,2010,2010,2011,2011,2011,2011,2012,2012,2012,2012,2013,2013,2013,2013],[1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4],[15,15,15,16,15,15,15,15,15,16,15,15,15,16,15,15,15,15,16,15],[61,61,61,61,60,60,60,60,61,61,61,61,61,61,61,61,61,61,61,61]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Year<\/th>\n      <th>cal_quarter<\/th>\n      <th>expected_quarter_samples<\/th>\n      <th>expected_annual_samples<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"searching":false,"ordering":false,"lengthChange":false,"paginate":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[0,1,2,3]}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.2: Expected number of samples.
</p>
</div>
<p><br></p>
<p><strong>Step 2:</strong> Count number of valid samples.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="completeness-checks.html#cb58-1"></a><span class="co"># Assign each date to a calendar quarter</span></span>
<span id="cb58-2"><a href="completeness-checks.html#cb58-2"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">cal_quarter =</span> <span class="kw">quarter</span>(Date))</span>
<span id="cb58-3"><a href="completeness-checks.html#cb58-3"></a></span>
<span id="cb58-4"><a href="completeness-checks.html#cb58-4"></a><span class="co"># Count the number of sampling dates for each quarter and year.</span></span>
<span id="cb58-5"><a href="completeness-checks.html#cb58-5"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb58-6"><a href="completeness-checks.html#cb58-6"></a><span class="st">          </span><span class="kw">group_by</span>(AQSID, Param_Code, CAS, Year, cal_quarter) <span class="op">%&gt;%</span></span>
<span id="cb58-7"><a href="completeness-checks.html#cb58-7"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">valid_quarter_samples =</span> <span class="kw">length</span>(<span class="kw">unique</span>(Date[<span class="op">!</span><span class="kw">is.na</span>(Concentration)]))) <span class="op">%&gt;%</span></span>
<span id="cb58-8"><a href="completeness-checks.html#cb58-8"></a><span class="st">          </span><span class="kw">group_by</span>(AQSID, Param_Code, CAS, Year) <span class="op">%&gt;%</span></span>
<span id="cb58-9"><a href="completeness-checks.html#cb58-9"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">valid_annual_samples =</span> <span class="kw">length</span>(<span class="kw">unique</span>(Date[<span class="op">!</span><span class="kw">is.na</span>(Concentration)]))) </span></code></pre></div>
<p><br></p>
<p><strong>Step 3:</strong> Divide the number of valid samples by the number of expected samples.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="completeness-checks.html#cb59-1"></a><span class="co"># Join expected sample table to data by quarter and year columns</span></span>
<span id="cb59-2"><a href="completeness-checks.html#cb59-2"></a>data &lt;-<span class="st"> </span><span class="kw">left_join</span>(data, epa_schedule, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;cal_quarter&quot;</span>))</span>
<span id="cb59-3"><a href="completeness-checks.html#cb59-3"></a></span>
<span id="cb59-4"><a href="completeness-checks.html#cb59-4"></a></span>
<span id="cb59-5"><a href="completeness-checks.html#cb59-5"></a><span class="co"># Divide valid samples by expected samples</span></span>
<span id="cb59-6"><a href="completeness-checks.html#cb59-6"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb59-7"><a href="completeness-checks.html#cb59-7"></a><span class="st">          </span><span class="kw">group_by</span>(AQSID, CAS, Year, cal_quarter) <span class="op">%&gt;%</span></span>
<span id="cb59-8"><a href="completeness-checks.html#cb59-8"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">pct_quarter_samples =</span> valid_quarter_samples <span class="op">/</span><span class="st"> </span>expected_quarter_samples) <span class="op">%&gt;%</span></span>
<span id="cb59-9"><a href="completeness-checks.html#cb59-9"></a><span class="st">          </span><span class="kw">group_by</span>(AQSID, CAS, Year) <span class="op">%&gt;%</span></span>
<span id="cb59-10"><a href="completeness-checks.html#cb59-10"></a><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">pct_annual_samples =</span> valid_annual_samples <span class="op">/</span><span class="st"> </span>expected_annual_samples) </span></code></pre></div>
<p><br></p>
<p><strong>Step 4:</strong> Mark results as incomplete if they fail one of the completeness checks.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="completeness-checks.html#cb60-1"></a><span class="co"># Set incomplete to zero if any completeness checks fail</span></span>
<span id="cb60-2"><a href="completeness-checks.html#cb60-2"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb60-3"><a href="completeness-checks.html#cb60-3"></a><span class="st">        </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span></span>
<span id="cb60-4"><a href="completeness-checks.html#cb60-4"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">complete =</span> <span class="kw">sum</span>(<span class="kw">c</span>(pct_quarter_samples <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.75</span>, </span>
<span id="cb60-5"><a href="completeness-checks.html#cb60-5"></a>                                pct_annual_samples  <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.75</span>)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span></span>
<span id="cb60-6"><a href="completeness-checks.html#cb60-6"></a><span class="st">       </span><span class="kw">ungroup</span>()</span></code></pre></div>
<p><br></p>
<strong>Final table with added <code>complete</code> column.</strong>
<div class="figure"><span id="fig:unnamed-chunk-79"></span>
<div id="htmlwidget-51a1cb1f615273fe94d3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-51a1cb1f615273fe94d3">{"x":{"filter":"none","data":[[270535501,270535501,270535501,270535501,270535501,270535501,270535501,270535501,270535501,270535501],[1,1,1,1,1,1,1,1,1,1],["2009-07-30","2009-08-05","2009-08-11","2009-09-16","2009-09-22","2009-08-17","2009-08-23","2009-08-29","2009-09-04","2009-09-10"],["Antimony","Antimony","Antimony","Antimony","Antimony","Antimony","Antimony","Antimony","Antimony","Antimony"],[2009,2009,2009,2009,2009,2009,2009,2009,2009,2009],[3,3,3,3,3,3,3,3,3,3],[11,11,11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11],[15,15,15,15,15,15,15,15,15,15],[61,61,61,61,61,61,61,61,61,61],[0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333,0.733333333333333],[0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459,0.180327868852459],[false,false,false,false,false,false,false,false,false,false]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AQSID<\/th>\n      <th>POC<\/th>\n      <th>Date<\/th>\n      <th>Pollutant<\/th>\n      <th>Year<\/th>\n      <th>cal_quarter<\/th>\n      <th>valid_quarter_samples<\/th>\n      <th>valid_annual_samples<\/th>\n      <th>expected_quarter_samples<\/th>\n      <th>expected_annual_samples<\/th>\n      <th>pct_quarter_samples<\/th>\n      <th>pct_annual_samples<\/th>\n      <th>complete<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"searching":false,"ordering":false,"lengthChange":false,"paginate":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[0,1,4,5,6,7,8,9,10,11]}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.3: Final table with added <code>complete</code> column.
</p>
</div>
<p><br></p>
<p><strong>Step 6 (Optional):</strong> By collapsing the <code>complete</code> status to 1 row per site-pollutant-quarter combination, you can save the table and attach a site’s <em>completeness</em> status to a future data analysis as needed.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="completeness-checks.html#cb61-1"></a><span class="co"># Collapse table to 1 row per unique site-pollutant-quarter</span></span>
<span id="cb61-2"><a href="completeness-checks.html#cb61-2"></a> data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb61-3"><a href="completeness-checks.html#cb61-3"></a><span class="st">         </span><span class="kw">group_by</span>(AQSID, Pollutant, Year, cal_quarter) <span class="op">%&gt;%</span><span class="st">  </span><span class="co">#Check completeness for every quarter</span></span>
<span id="cb61-4"><a href="completeness-checks.html#cb61-4"></a><span class="st">         </span><span class="kw">summarize</span>(<span class="dt">complete              =</span> complete[<span class="dv">1</span>], </span>
<span id="cb61-5"><a href="completeness-checks.html#cb61-5"></a>                   <span class="dt">valid_annual_samples  =</span> valid_annual_samples[<span class="dv">1</span>],</span>
<span id="cb61-6"><a href="completeness-checks.html#cb61-6"></a>                   <span class="dt">valid_quarter_samples =</span> valid_quarter_samples[<span class="dv">1</span>])</span>
<span id="cb61-7"><a href="completeness-checks.html#cb61-7"></a></span>
<span id="cb61-8"><a href="completeness-checks.html#cb61-8"></a><span class="co"># Collapse table to 1 row per unique site-pollutant-year</span></span>
<span id="cb61-9"><a href="completeness-checks.html#cb61-9"></a> data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st">          </span></span>
<span id="cb61-10"><a href="completeness-checks.html#cb61-10"></a><span class="st">         </span><span class="kw">group_by</span>(AQSID, Pollutant, Year) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb61-11"><a href="completeness-checks.html#cb61-11"></a><span class="st">         </span><span class="kw">summarize</span>(<span class="dt">complete            =</span> <span class="kw">sum</span>(complete, <span class="dt">na.rm =</span> T) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>,</span>
<span id="cb61-12"><a href="completeness-checks.html#cb61-12"></a>                   <span class="dt">annual_samples      =</span> valid_annual_samples[<span class="dv">1</span>],</span>
<span id="cb61-13"><a href="completeness-checks.html#cb61-13"></a>                   <span class="dt">min_quarter_samples =</span> <span class="kw">min</span>(valid_quarter_samples, <span class="dt">na.rm =</span> T))</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-81"></span>
<div id="htmlwidget-1f78026923c118066240" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1f78026923c118066240">{"x":{"filter":"none","data":[[270031002,270031002,270031002,270031002,270031002,270031002,270031002,270031002,270031002,270031002],["1,3-Butadiene","1,3-Butadiene","Acetaldehyde","Acetaldehyde","Antimony","Antimony","Antimony","Arsenic","Arsenic","Arsenic"],[2012,2013,2012,2013,2011,2012,2013,2011,2012,2013],[false,false,false,false,false,true,true,false,true,true],[50,51,51,54,1,59,60,1,59,60],[7,8,7,8,1,14,15,1,14,15]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>AQSID<\/th>\n      <th>Pollutant<\/th>\n      <th>Year<\/th>\n      <th>complete<\/th>\n      <th>annual_samples<\/th>\n      <th>min_quarter_samples<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"searching":false,"ordering":false,"lengthChange":false,"paginate":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[0,2,4,5]}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.4: Collapsed table showing <code>completeness</code> status.
</p>
</div>
</div>
<p><br> <strong>References</strong></p>
<p><a href="https://www.ecfr.gov/cgi-bin/text-idx?tpl=/ecfrbrowse/Title40/40cfr50_main_02.tpl">Appendices of 40 CFR 50</a></p>
<p><br> <a href="completeness-checks.html#completeness-checks">Back to top</a></p>

</div>
</div>
<script>
  $(".btn_code").click(function() {
    $(this.parentNode).toggleClass("open");
  });
</script>
            </section>

          </div>
        </div>
      </div>
<a href="detection-limits.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary-methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/MPCA-air/air-methods/edit/master/06-completeness_checks.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["air-methods.pdf", "air-methods.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
